<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

		<title>The Code4Lib Journal &#8211; Using R and the Tidyverse to Generate Library Usage Reports</title>

		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="generator" content="WordPress 6.8.1" /> <!-- leave this for stats -->
    <link rel="shortcut icon" href="../wp-content/themes/c4lj-theme/images/favicon.ico" />
		<link rel="stylesheet" href="../wp-content/themes/c4lj-theme/style.css" type="text/css" media="screen, print" />
		<!--[if lte IE 7]>
		<link rel="stylesheet" href="https://journal.code4lib.org/wp-content/themes/c4lj-theme/fix-ie7.css" type="text/css" media="screen" />
		<![endif]-->
		<!--[if lte IE 6]>
		<link rel="stylesheet" href="https://journal.code4lib.org/wp-content/themes/c4lj-theme/fix-ie6.css" type="text/css" media="screen" />
		<![endif]-->
		<link rel="stylesheet" href="../wp-content/themes/c4lj-theme/print.css" type="text/css" media="print" />
		<link rel="alternate" type="application/rss+xml" title="The Code4Lib Journal Syndication Feed" href="http://feeds.feedburner.com/c4lj" />
		<link rel="pingback" href="https://journal.code4lib.org/xmlrpc.php" />

<!-- Google Scholar Stuff -->
	<meta name="citation_title" content="Using R and the Tidyverse to Generate Library Usage Reports">
 <meta name="citation_author" content="Andy Meyer">
<meta name="citation_publication_date" content="2018/02/05">
	<meta name="citation_journal_title" content="Code4Lib Journal">
		<meta name="citation_issue" content="39">
<!-- end  Google Scholar Stuff -->

<meta name='robots' content='max-image-preview:large' />
	<style>img:is([sizes="auto" i], [sizes^="auto," i]) { contain-intrinsic-size: 3000px 1500px }</style>
	<link rel="alternate" type="application/rss+xml" title="The Code4Lib Journal &raquo; Using R and the Tidyverse to Generate Library Usage Reports Comments Feed" href="13282/feed" />
<script type="text/javascript">
/* <![CDATA[ */
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.1.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.1.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/journal.code4lib.org\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.8.1"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f","\ud83c\udff3\ufe0f\u200b\u26a7\ufe0f")?!1:!n(e,"\ud83c\uddfa\ud83c\uddf3","\ud83c\uddfa\u200b\ud83c\uddf3")&&!n(e,"\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f","\ud83c\udff4\u200b\udb40\udc67\u200b\udb40\udc62\u200b\udb40\udc65\u200b\udb40\udc6e\u200b\udb40\udc67\u200b\udb40\udc7f");case"emoji":return!n(e,"\ud83d\udc26\u200d\ud83d\udd25","\ud83d\udc26\u200b\ud83d\udd25")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
/* ]]> */
</script>
<style id='wp-emoji-styles-inline-css' type='text/css'>

	img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}
</style>
<link rel='stylesheet' id='wp-block-library-css' href='../wp-includes/css/dist/block-library/style.min.css%3Fver=6.8.1.css' type='text/css' media='all' />
<style id='classic-theme-styles-inline-css' type='text/css'>
/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}
</style>
<style id='global-styles-inline-css' type='text/css'>
:root{--wp--preset--aspect-ratio--square: 1;--wp--preset--aspect-ratio--4-3: 4/3;--wp--preset--aspect-ratio--3-4: 3/4;--wp--preset--aspect-ratio--3-2: 3/2;--wp--preset--aspect-ratio--2-3: 2/3;--wp--preset--aspect-ratio--16-9: 16/9;--wp--preset--aspect-ratio--9-16: 9/16;--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flex{display: flex;}.is-layout-flex{flex-wrap: wrap;align-items: center;}.is-layout-flex > :is(*, div){margin: 0;}body .is-layout-grid{display: grid;}.is-layout-grid > :is(*, div){margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
:root :where(.wp-block-pullquote){font-size: 1.5em;line-height: 1.6;}
</style>
<style id='akismet-widget-style-inline-css' type='text/css'>

			.a-stats {
				--akismet-color-mid-green: #357b49;
				--akismet-color-white: #fff;
				--akismet-color-light-grey: #f6f7f7;

				max-width: 350px;
				width: auto;
			}

			.a-stats * {
				all: unset;
				box-sizing: border-box;
			}

			.a-stats strong {
				font-weight: 600;
			}

			.a-stats a.a-stats__link,
			.a-stats a.a-stats__link:visited,
			.a-stats a.a-stats__link:active {
				background: var(--akismet-color-mid-green);
				border: none;
				box-shadow: none;
				border-radius: 8px;
				color: var(--akismet-color-white);
				cursor: pointer;
				display: block;
				font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen-Sans', 'Ubuntu', 'Cantarell', 'Helvetica Neue', sans-serif;
				font-weight: 500;
				padding: 12px;
				text-align: center;
				text-decoration: none;
				transition: all 0.2s ease;
			}

			/* Extra specificity to deal with TwentyTwentyOne focus style */
			.widget .a-stats a.a-stats__link:focus {
				background: var(--akismet-color-mid-green);
				color: var(--akismet-color-white);
				text-decoration: none;
			}

			.a-stats a.a-stats__link:hover {
				filter: brightness(110%);
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06), 0 0 2px rgba(0, 0, 0, 0.16);
			}

			.a-stats .count {
				color: var(--akismet-color-white);
				display: block;
				font-size: 1.5em;
				line-height: 1.4;
				padding: 0 13px;
				white-space: nowrap;
			}
		
</style>
<link rel="https://api.w.org/" href="../wp-json/index.html" /><link rel="alternate" title="JSON" type="application/json" href="../wp-json/wp/v2/posts/13282" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://journal.code4lib.org/xmlrpc.php?rsd" />
<link rel="canonical" href="../index.html%3Fp=13282.html" />
<link rel='shortlink' href='../index.html%3Fp=13282.html' />
<link rel="alternate" title="oEmbed (JSON)" type="application/json+oembed" href="../wp-json/oembed/1.0/embed%3Furl=https:%252F%252Fjournal.code4lib.org%252Farticles%252F13282" />
<link rel="alternate" title="oEmbed (XML)" type="text/xml+oembed" href="../wp-json/oembed/1.0/embed%3Furl=https:%252F%252Fjournal.code4lib.org%252Farticles%252F13282&amp;format=xml" />
<style>
@media all and (max-width : 768px) {
.syntaxhighlighter a, .syntaxhighlighter div, .syntaxhighlighter code, .syntaxhighlighter table, .syntaxhighlighter table td, .syntaxhighlighter table tr, .syntaxhighlighter table tbody, .syntaxhighlighter table thead, .syntaxhighlighter table caption, .syntaxhighlighter textarea
{
	font-size: 0.95em !important;
}
}
</style>
	</head>
	<body>
		<div id="page">
			<div id="header">
				<div id="headerbackground">
					<h1><a href="../index.html"><img src="../wp-content/themes/c4lj-theme/images/logo.png" alt="The Code4Lib Journal" /></a></h1>
				</div>
				<div id="about">
					<ul>
						<li class="page_item page-item-5"><a href="../index.html%3Fp=5.html">Mission</a></li>
<li class="page_item page-item-6"><a href="../editorial-committee/index.html">Editorial Committee</a></li>
<li class="page_item page-item-8"><a href="../process/index.html">Process and Structure</a></li>
						<li><a href="http://code4lib.org/">Code4Lib</a></li>
					</ul>
				</div>
				<div class="mobile-search">
					<form method="get" id="searchform" action="../index.html">
						<div>
							<input type="text" value="" aria-labelledby="searchsubmit" name="s" id="s" />
							<input type="submit" value="Search" id="searchsubmit" />
						</div>
					</form>
				</div>
			</div>

			<div id="content">
								<div class="article" id="post-13282">
					<p id="issueDesignation"><a href="../issues/issues/issue39.html">Issue 39, 2018-02-05</a></p>
					<h1 class="articletitle">Using R and the Tidyverse to Generate Library Usage Reports</h1>
					<div class="abstract">
						<p>Gathering, analyzing, and communicating library usage data provides a foundation for thoughtful assessment. However, the amount of time and expertise required creates a barrier to actually using this data. By using the statistical programming language R and the tools and approach of the Tidyverse, the process of gathering, analyzing, and communicating data can be automated in ways that reduce the amount of time and energy required. At the same time, this approach increases staff capacity for other data science projects and creates a shareable model and framework for other libraries. This article focuses on electronic resource usage reports &#8211; especially Counter DB1 Reports &#8211; but this approach could be extended to other data sources and needs.</p>
					</div>
					<div class="entry">
						<p>by Andy Meyer</p>
<h2>Introduction</h2>
<p>This article describes a project that used the statistical programming language R to generate reports about electronic usage and spending. This project had three main goals. First, to automate and systematize the process of gathering, compiling, and communicating data about electronic resource usage. Second, to increase library staff capacity for data science. Third, to provide a shareable framework and model for other libraries to use when dealing with data intensive projects. This project focused on electronic resource usage information in the form of Counter Reports but can be extended to manage and communicate data from a variety of other library systems or other data sources.</p>
<h2>Background</h2>
<p>With library budgets shrinking and the cost of online resources growing, many libraries must critically examine electronic resource usage and related costs to make responsible collection development decisions. Yet gathering this information, transforming the raw data into something usable, and communicating relevant information is a difficult and labor intensive process. The goal for this particular project is to provide electronic resource usage information to other library staff to aid collection development decisions. However, this approach could be extended to deal with other data and communicate those results to a wide variety of stakeholders.</p>
<h3>R and the Tidyverse</h3>
<p>R is an open source programming language freely available under the GNU General Public License. R excels in statistical computing and is growing in popularity across many disciplines. R enjoys a large and active user community as well as a number of packages that extend the basic functions of R. The growing popularity of R, the strong and active user community, the ability to do reproducible and rigorous data analysis, and the open nature of R make this an excellent option for many library applications. Furthermore, developing staff expertise in R may position the library to take on additional roles in data management and create new connections on campus.</p>
<p>The Tidyverse is a set of R packages that &ldquo;share a common philosophy of data and R programming and are designed to work together naturally.&rdquo;[<a id="ref1" href="../index.html%3Fp=13282.html#note1">1</a>] The Tidyverse is a great place to begin learning R because these packages are widely adopted and relatively intuitive. There is also an abundance of high quality documentation that is freely available online.</p>
<h3>Counter Reports</h3>
<p>COUNTER is a non-profit organization that provides libraries, publishers, and vendors a Code of Practice and set of definitions that facilitates the standard and consistent way to look at electronic resource usage.[<a id="ref2" href="../index.html%3Fp=13282.html#note2">2</a>] The project described in this paper uses the Database 1 report. These reports include the number of regular searches, result clicks, record views, federated/automated searches by Month and by Database. This is a standard report that most electronic resource vendors provide; details and definitions are available on the counter website.[<a id="ref3" href="../index.html%3Fp=13282.html#note3">3</a>] This project uses revision 4 reports but the general approach outlined here could easily be extended to include other revisions and/or other counter-complaint reports.</p>
<h2>Code Structure and Style</h2>
<p>This project approaches data science following the model proposed by Garrett Grolemund and Hadley Wickham in &#8220;R for Data Science&#8221;. The code is divided and structured into three discrete stages:</p>
<ol start="1">
<li>Import and Tidy</li>
<li>Transform, Visualize, and Model</li>
<li>Communicate</li>
</ol>
<p class="caption"><a href="../media/issue39/meyer/figure1.png"><img decoding="async" src="../media/issue39/meyer/figure1.png" alt="tracking form" /></a><br />
<strong>Figure 1.</strong> Model of the tidyverse approach to data science from from Grolemund, Garrett, and Hadley Wickham. &#8220;R for Data Science&#8221; <a href="http://r4ds.had.co.nz/introduction.html">http://r4ds.had.co.nz/introduction.html</a>.[<a id="ref4" href="../index.html%3Fp=13282.html#note4">4</a>]</p>
<p>Following another tenet of the Tidyverse, this project has adopted a functional approach to R. This approach limits redundant code and makes the meaning of the code more transparent. In terms of style, the code is written for clarity and simplicity; it is not written to optimize performance. The hope is that the variable and function names as well as the comments allow others to easily use and adapt this code to their local institutional needs. Lastly, this project makes extensive use of the pipe function in R. As a core member of the Tidyverse, this function makes R code more readable and beautiful by combining complex operations without requiring nested functions. The book &#8220;R for Data Science&#8221; offers a very clear explanation of the pipe function.[<a id="ref5" href="../index.html%3Fp=13282.html#note5">5</a>]</p>
<h3>Tidy Data</h3>
<p>Before moving on, a note about terminology. In the context of the Tidyverse and throughout this paper, the word &ldquo;tidy&rdquo; carries a specific and technical definition. The goal of tidy data is to create an underlying structure that makes various types of transformation easier. Hadley Wickham offers this definition of tidy data:</p>
<p>&#8220;Tidy data is a standard way of mapping the meaning of a dataset to its structure. A dataset is messy or tidy depending on how rows, columns and tables are matched up with observations, variables and types. In tidy data:</p>
<ol start="1">
<li>Each variable forms a column.</li>
<li>Each observation forms a row.</li>
<li>Each type of observational unit forms a table.</li>
</ol>
<p>Messy data is any other arrangement of the data.&#8221;[<a id="ref6" href="../index.html%3Fp=13282.html#note6">6</a>]</p>
<p>According to this definition, COUNTER-compliant reports, although standardized, are messy because the structure of the data &#8211; the column and row arrangement &#8211; does not correspond with the observations and variables. The process of tidying data begins by identifying the variables. For COUNTER-compliant database report 1, the variables are:</p>
<ul>
<li>Database</li>
<li>Publisher</li>
<li>Platform</li>
<li>User Activity</li>
<li>Date (expressed as Month-Year)</li>
<li>Usage</li>
</ul>
<p>Looking at data from a sample report, we can see that while the report is standardized the data is messy because each row contains many observations.</p>
<p><a id="t.0"></a></p>
<table>
<tbody>
<tr>
<td>database Report 1 (r4)</td>
<td colspan="7">Total Searches, Result Clicks and Record Views by Month and Database</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td colspan="3">Period covered by Report:</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td colspan="3">2015-01-01 to 2015-12-31</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>date run:</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td colspan="2"></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>database</td>
<td>publisher</td>
<td>platform</td>
<td>user Activity</td>
<td>reporting Period total</td>
<td>jan- 2015</td>
<td>feb- 2015</td>
<td>mar-2015</td>
<td>apr-2015</td>
<td>may- 2015</td>
<td>jun- 2015</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>regular Searches</td>
<td>13811</td>
<td>758</td>
<td>1884</td>
<td>1686</td>
<td>1951</td>
<td>601</td>
<td>186</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>searches &#8211; federated and automated</td>
<td>988</td>
<td>49</td>
<td>163</td>
<td>108</td>
<td>145</td>
<td>60</td>
<td>16</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>result clicks</td>
<td>10719</td>
<td>611</td>
<td>1562</td>
<td>1277</td>
<td>1609</td>
<td>531</td>
<td>181</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>record views</td>
<td>1032</td>
<td>80</td>
<td>223</td>
<td>173</td>
<td>177</td>
<td>50</td>
<td>31</td>
</tr>
</tbody>
</table>
<p>Conveying this data in a tidy dataframe would keep the Database, Publisher, Platform, and User Activity columns and add columns for Date and Usage.</p>
<p><a id="t.1"></a></p>
<table>
<tbody>
<tr>
<td>database</td>
<td>publisher</td>
<td>platform</td>
<td>user_Activity</td>
<td>date</td>
<td>usage</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>regular Searches</td>
<td>jan-15</td>
<td>758</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>searches &#8211; federated and automated</td>
<td>jan-15</td>
<td>49</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>result clicks</td>
<td>jan-15</td>
<td>611</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>record views</td>
<td>jan-15</td>
<td>80</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>regular Searches</td>
<td>feb-15</td>
<td>1884</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>searches &#8211; federated and automated</td>
<td>feb-15</td>
<td>163</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>result clicks</td>
<td>feb-15</td>
<td>1562</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>record views</td>
<td>feb-15</td>
<td>223</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>regular Searches</td>
<td>mar-15</td>
<td>1686</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>searches &#8211; federated and automated</td>
<td>mar-15</td>
<td>108</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>result clicks</td>
<td>mar-15</td>
<td>1277</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>record views</td>
<td>mar-15</td>
<td>173</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>regular Searches</td>
<td>apr-15</td>
<td>1951</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>searches &#8211; federated and automated</td>
<td>apr-15</td>
<td>145</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>result clicks</td>
<td>apr-15</td>
<td>1609</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>record views</td>
<td>apr-15</td>
<td>177</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>regular Searches</td>
<td>may-15</td>
<td>601</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>searches &#8211; federated and automated</td>
<td>may-15</td>
<td>60</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>result clicks</td>
<td>may-15</td>
<td>531</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>record views</td>
<td>may-15</td>
<td>50</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>regular Searches</td>
<td>jun-15</td>
<td>186</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>searches &#8211; federated and automated</td>
<td>jun-15</td>
<td>16</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>result clicks</td>
<td>jun-15</td>
<td>181</td>
</tr>
<tr>
<td>database A</td>
<td>publisher X</td>
<td>platform Z</td>
<td>record views</td>
<td>jun-15</td>
<td>31</td>
</tr>
</tbody>
</table>
<p>The data in this table is tidy because all of the variables are in columns and each observation is a row.</p>
<h2>Code Overview</h2>
<p>All of the code for this project lives on Github: <a href="https://github.com/ameyer24/LearningR/tree/master/Electronic%20Resources">https://github.com/ameyer24/LearningR/tree/master/Electronic%20Resources</a></p>
<h3>Setup</h3>
<p>As a preliminary step, this project includes a file that sets up the rest of the process by loading the appropriate packages and by setting up the folder structure.</p>
<pre class="brush: r; title: ; notranslate" title="">
###############################################################################
# Loading Packages ____________________________________________________________
###############################################################################

library(tidyverse)
library(readxl)
library(lubridate)
library(mosaic)
library(zoo)
library(scales)
library(knitr)

###############################################################################
# Setting Up  Working Directory _______________________________________________
###############################################################################

getwd()
DB1_folder &lt;- &quot;./DB1_reports&quot;
output_folder &lt;- &quot;./outputs&quot;
</pre>
<p>The <code>library</code> commands load the appropriate packages that are required in this project. If the packages are not installed, you will first need to install the packages. The &ldquo;Setting Up Working Directory&rdquo; section sets relative file paths to the inputs folder as well as output folder. This definitions could be changed to explicit file paths to meet local needs.</p>
<h3>Import and Tidy</h3>
<p>The first step of this project is to import the data from all the files from the folder defined above and create a single tidy dataframe in R. This process might be complicated by a variety of file formats and inconsistent data ranges. To address these problems, the functions in this project can handle COUNTER-compliant reports as both CSV and Excel files while providing a generalizable framework for other file types. The functions can also de-duplicate the usage data so that reports spanning overlapping date ranges will not cause problems. An area of improvement would be to improve handling of missing data. These functions are designed to work with Database Report 1 data but could easily be adapted to import and tidy other COUNTER-compliant reports.</p>
<h4>Tidy the Data from Counter Reports</h4>
<pre class="brush: r; title: ; notranslate" title="">
# Transforms data from the standard Counter Format to a tidy dataframe.
tidy_reports &lt;- function(df) {
  df %&gt;%
    select(-c(5)) %&gt;%
    gather(Date, Usage, -c(1:4)) %&gt;%
    mutate(Date = as.yearmon(Date, &quot;%b-%Y&quot;)) %&gt;%
    mutate(Usage = as.numeric(Usage)) %&gt;%
    rename(&quot;User_Activity&quot; = &quot;User Activity&quot;)
}
</pre>
<p>This function transform data from a COUNTER-compliant format to a tidy dataframe. Looking at each line in detail:</p>
<ol start="1">
<li><code>select(-c(5))</code> &#8211; This line deletes the 5th column. The Reporting Period Total is not useful within the &#8220;Tidyverse&#8221; and is therefore removed.</li>
<li><code>gather(Date, Usage, -c(1:4))</code> &#8211; The <code>gather</code> function is the primary way of moving data from a &#8220;wide&#8221; format into a tidy &#8220;long&#8221; format. This step keeps the data in columns 1-4 by collapsing all the other columns in key-value pairs. This function creates new variables for the key and value; for COUNTER-compliant reports, the key is the &#8220;Date&#8221; variable and the value is the &#8220;Usage&#8221; variable.</li>
<li><code>mutate(Date = as.yearmon(Date, "%b-%Y"))</code> The <code>mutate</code> function adds a new variable from existing variables; here we update the &#8220;Date&#8221; variable by converting that data from a simple character string to the Year-Mon data type.</li>
<li><code>mutate(usage = as.numerIc(usage))</code> &#8211; Similarly, this function converts the Usage data from a character to numeric.</li>
<li><code>rename("User_activity" = "user activity")</code> &#8211; Lastly, this function renames the &#8220;User Activity&#8221; column to avoid the space in the column name; this is probably optional but made life easier while working with the data.</li>
</ol>
<h4>Import the Data from the Files</h4>
<p>The function above transforms a dataframe within R; these functions load the data from a specific file and then apply the <code>tidy_reports</code> function defined above.</p>
<pre class="brush: r; title: ; notranslate" title="">
# This function imports data from CSV files and makes that data tidy.
import_csv &lt;- function(file) {
  file %&gt;%
    read_csv(skip=7, col_names = TRUE) %&gt;%
    tidy_reports()
}
# This function imports data from Excel files and makes that data tidy.
import_excel &lt;- function(file) {
  file %&gt;%
    read_excel(skip=7, col_names = TRUE) %&gt;%
    tidy_reports()
}
</pre>
<p>These functions accept a single file as a parameter and import that data by calling the appropriate reading function. Both processes skip the first 7 lines because those lines do not contain relevant information for this analysis and then tidy the data using the function defined above. It is somewhat inelegant to have two functions that do essentially the same thing but keeping the two function separate improves the readability of the code and is effective, conceptually simple, and easily extendable. A generalized import function would also be an improvement.</p>
<h4>Loading and Tidying</h4>
<p>This phase of the project now has functions that can load a file and tidy the data; we now need a function that can apply these functions to all the files in a given folder.</p>
<pre class="brush: r; title: ; notranslate" title="">
# These functions load DB1 reports from a given folder.
load_csv &lt;- function(path) { 
  csv_files &lt;- dir(path, pattern = &quot;*.(CSV|csv)&quot;, full.names = TRUE)
  tables &lt;- lapply(csv_files, import_csv)
  do.call(rbind, tables)
}

load_excel &lt;- function(path) { 
  excel_files &lt;- dir(path, pattern = &quot;*.(XL*|xl*)&quot;, full.names = TRUE)
  tables &lt;- lapply(excel_files, import_excel)
  do.call(rbind, tables)
}
</pre>
<p>These functions accept a path to a folder as a parameter and then create a list of file names for files that match a particular pattern. The second line applies the appropriate import function to the list of files. Lastly, the <code>do.call(rbind, tables)</code> line binds together these tables by row.</p>
<h4>The Tidy Dataframe</h4>
<p>At last, we have the functions needed to import data from every CSV and Excel file in a specified folder and create a single tidy dataframe in R.</p>
<pre class="brush: r; title: ; notranslate" title="">
DB1_data_csv   &lt;- load_csv(DB1_folder)
DB1_data_excel &lt;- load_excel(DB1_folder)

DB1 &lt;- unique(rbind(DB1_data_csv,DB1_data_excel))
</pre>
<p>The first two steps create two separate dataframes call <code>DB1_data_csv</code> and <code>DB1_data_excel</code> that contain the data from the respective file formats. The final line combines the data into in a single dataframe called DB1. The <code>unique</code> operation deletes any duplicate observations that may be present in the original usage reports.</p>
<h3>Transform and Visualize</h3>
<p>After importing and tidying the usage data, the next step in Wickham&rsquo;s model is to transform, visualize, and model this data. Right now, this project performs basic transformations such as filtering, summarizing, and graphing the data. However, given the tidy structure of the data and the powerful tools that R provides for data transformation, there is an opportunity to build functions that radically transform the data and that allow for new insights. Additionally, given the shared data structures and tools, there are opportunities to share these transformation and visualizations freely and create new sets of best practices.</p>
<p>Like the import and tidy process, this project uses a functional approach to handle transformations and visualizations. The majority of these functions perform transformations on the tidy dataframe created earlier without changing or updating that original dataframe. Rather than exhaustively surveying all possible transformations, this paper will highlight two functions. The first function transformation summarizes the data based on academic terms; the second function uses that summarized data to create a simple barplot.</p>
<h4>Transform</h4>
<pre class="brush: r; title: ; notranslate" title="">
summarize_usage_academic_term &lt;- function(DatabaseName,
                                         StartYear,
                                         EndYear,
                                         Action = all_actions){
  DB1 %&gt;%
    filter(Database %in% DatabaseName) %&gt;%
    filter(Date &gt;= StartYear, Date &lt;= EndYear) %&gt;%
    filter(User_Activity %in% Action) %&gt;%
    mutate(Year = year(Date), Month=month(Date)) %&gt;%
    mutate(Academic_Term = derivedFactor(
      &quot;Spring&quot; = (Month==1 | Month==2  | Month==3  | Month==4),
      &quot;Summer&quot; = (Month==5 | Month==6  | Month==7  | Month==8),
      &quot;Fall&quot;   = (Month==9 | Month==10 | Month==11 | Month==12)
    )) %&gt;%
    group_by(Database,User_Activity,Academic_Term,Year) %&gt;%
    summarize(Usage=sum(Usage)) %&gt;%
    rename(&quot;User Activity&quot; = &quot;User_Activity&quot;)
}
</pre>
<p>This function accepts four parameters: database name, start year, end year, and action. It uses these parameters as filters to the tidy dataframe by returning only observations that match the parameters. The action parameter is optional and defaults to all actions through a variable defined earlier.</p>
<p>As noted earlier, the <code>mutate</code> function creates new variables from existing variables. In this case, the <code>mutate</code> function creates three new variables from the existing date information: Year, Month, and Academic Term. Strictly speaking it was not necessary to create a new variable for month &#8211; the Academic Term could be derived directly from the date &#8211; but it has been included in the hopes that it makes the code more accessible. The <code>mutate</code> function that creates the Academic Term variable uses the <code>derivedfactor</code> function from the Mosaic package. The last transformation of the data was to group the data and then summarize the usage data based on academic term.</p>
<p>When this function is applied to our sample data, we get this:</p>
<p><a id="t.2"></a></p>
<table>
<tbody>
<tr>
<td>database</td>
<td>user Activity</td>
<td>academic_Term</td>
<td>year</td>
<td>usage</td>
</tr>
<tr>
<td>database A</td>
<td>record views</td>
<td>spring</td>
<td>2015</td>
<td>653</td>
</tr>
<tr>
<td>database A</td>
<td>record views</td>
<td>spring</td>
<td>2016</td>
<td>147</td>
</tr>
<tr>
<td>database A</td>
<td>record views</td>
<td>summer</td>
<td>2015</td>
<td>103</td>
</tr>
<tr>
<td>database A</td>
<td>record views</td>
<td>summer</td>
<td>2016</td>
<td>53</td>
</tr>
<tr>
<td>database A</td>
<td>record views</td>
<td>fall</td>
<td>2015</td>
<td>276</td>
</tr>
<tr>
<td>database A</td>
<td>record views</td>
<td>fall</td>
<td>2016</td>
<td>174</td>
</tr>
<tr>
<td>database A</td>
<td>regular Searches</td>
<td>spring</td>
<td>2015</td>
<td>6279</td>
</tr>
<tr>
<td>database A</td>
<td>regular Searches</td>
<td>spring</td>
<td>2016</td>
<td>4896</td>
</tr>
<tr>
<td>database A</td>
<td>regular Searches</td>
<td>summer</td>
<td>2015</td>
<td>1125</td>
</tr>
<tr>
<td>database A</td>
<td>regular Searches</td>
<td>summer</td>
<td>2016</td>
<td>1802</td>
</tr>
<tr>
<td>database A</td>
<td>regular Searches</td>
<td>fall</td>
<td>2015</td>
<td>6407</td>
</tr>
<tr>
<td>database A</td>
<td>regular Searches</td>
<td>fall</td>
<td>2016</td>
<td>5474</td>
</tr>
<tr>
<td>database A</td>
<td>result clicks</td>
<td>spring</td>
<td>2015</td>
<td>5059</td>
</tr>
<tr>
<td>database A</td>
<td>result clicks</td>
<td>spring</td>
<td>2016</td>
<td>3879</td>
</tr>
<tr>
<td>database A</td>
<td>result clicks</td>
<td>summer</td>
<td>2015</td>
<td>933</td>
</tr>
<tr>
<td>database A</td>
<td>result clicks</td>
<td>summer</td>
<td>2016</td>
<td>1481</td>
</tr>
<tr>
<td>database A</td>
<td>result clicks</td>
<td>fall</td>
<td>2015</td>
<td>4727</td>
</tr>
<tr>
<td>database A</td>
<td>result clicks</td>
<td>fall</td>
<td>2016</td>
<td>4091</td>
</tr>
<tr>
<td>database A</td>
<td>searches &#8211; federated and automated</td>
<td>spring</td>
<td>2015</td>
<td>465</td>
</tr>
<tr>
<td>database A</td>
<td>searches &#8211; federated and automated</td>
<td>spring</td>
<td>2016</td>
<td>338</td>
</tr>
<tr>
<td>database A</td>
<td>searches &#8211; federated and automated</td>
<td>summer</td>
<td>2015</td>
<td>88</td>
</tr>
<tr>
<td>database A</td>
<td>searches &#8211; federated and automated</td>
<td>summer</td>
<td>2016</td>
<td>89</td>
</tr>
<tr>
<td>database A</td>
<td>searches &#8211; federated and automated</td>
<td>fall</td>
<td>2015</td>
<td>435</td>
</tr>
<tr>
<td>database A</td>
<td>searches &#8211; federated and automated</td>
<td>fall</td>
<td>2016</td>
<td>122</td>
</tr>
</tbody>
</table>
<h4>Visualize</h4>
<p>This function transforms the summarized usage data into a barplot.</p>
<pre class="brush: r; title: ; notranslate" title="">
ggplot(data = summarized_usage_academic_term,
       aes(x = Year, y = Usage)) +
  geom_bar(aes(fill=factor(Year)),stat=&quot;identity&quot;) +
  facet_grid(. ~ Academic_Term) +
  labs(y = &quot;Usage&quot;, fill=&quot;Year&quot;) +
  ggtitle(&quot;Database Usage by Academic Term&quot;) +
  theme(axis.title.x = element_blank(),
        axis.text.x  = element_blank(),
        axis.ticks.x = element_blank())
</pre>
<p>The ggplot function comes from the ggplot2 package, a core member of the Tidyverse, that is able to create publication quality graphics from a robust set of options and layers.</p>
<p>The graphing function creates a base layer with the summarized usage data and sets the aesthetic properties for the entire graph with Year on the x axis and the Usage data on the y axis. The next layer creates a bar graph; the color of the bars will be determined by the Year and the statistic to graph is the identity. We also want a faceted graph; one bar graph for each Academic Term.</p>
<p>The last few lines &#8211; started with labs &#8211; add labels, titles, and some theming to the barplot. These lines are optional and only scratch the surface of the customization options available within ggplot.</p>
<p class="caption"><a href="../media/issue39/meyer/figure2.png"><img fetchpriority="high" decoding="async" src="../media/issue39/meyer/figure2.png" alt="Bar Graph created from sample data" width="426" height="470" /></a><br />
<strong>Figure 2.</strong> Bar Graph created from sample data.</p>
<p>In a few short lines, these functions have transformed the tidy usage data into a high quality graph that shows database usage by academic term. Creating a comparable graph in Excel is possible but the advantages of R are clear. This function exists apart from the actual data; that means that the usage data can be updated and the function can simply be re-run on the updated data set creating consistent graphs over time. Similarly, this same function can be used to updated to examine a different database or different date range. Lastly, this approach allows for libraries to develop and share transformations and create best practices for domain-specific usage data.</p>
<h3>Communicate</h3>
<p>The final stage in the model and the last step in this project is to communicate the results. For this part of the process, this project uses the R Markdown package. R Markdown can combine text, R code, and the results of R code such as graphs and tables and output the results in a variety of file formats including Word, PDF, and HTML. R Markdown also offers formatting options and customized themes that can create professional and polished reports.</p>
<p>This project&#39;s R Markdown file begins by calling all the previous files as a <code>source</code>. This allows the R Markdown document to use the underlying data and all of the functions defined in earlier files. Next, because this project hopes to generate a standard report for many different databases, the document specifies a database and data ranges at the beginning of the document. With these definitions in place, the rest of the R Markdown document can call and execute R code without the need for repetitive data entry; updating the database variable at the beginning of the report updates the entire report. This makes generating the same report on a regular basis simple; add new data in the specified folder and re-run the report to include the new data.</p>
<h2>Conclusion</h2>
<p>Using R and the Tidyverse to generate library usage reports has many clear advantages relative to alternative methods. Automating the reporting process for electronic resource usage has the potential to save hours of staff time and create standardized reports that allow for better collection development decisions. Transforming and visualizing this data has the potential to create new insights and raise new questions.</p>
<p>Beyond improving this particular process, using R and the Tidyverse provides the library with many other benefits and new opportunities. Learning and using R for data projects builds capacity for other data projects and collaborations across campus. Using a free, open source language allows allows libraries to build and share data structures, transformations, and visualizations. The programming language R is powerful enough to recreate any data transformation and is much more shareable than data manipulation done in spreadsheets or in proprietary software. Lastly, R has the ability to combine data from a variety of sources. Data from circulation transactions, gate counts, computer usage, and head counts could be combined to get a more comprehensive sense of library usage.</p>
<p>R is a free and open language that is growing in popularity. This article shares one library&#39;s limited experience using R to automate electronic resource usage reports but also argues that the opportunities and advantages for the library community are strong and clear.</p>
<h2>About the Author</h2>
<p>Andy Meyer is the Head of Electronic Resources and Interlibrary Loan at North Park University in Chicago. He holds a masters degree in Library and Information Science from the University of Illinois Urbana-Champaign where he earned a specialization in data curation. He is interested in developing and sharing resources that help libraries of all sizes manage and use data. ORCID: <a href="https://orcid.org/0000-0001-9198-7100">0000-0001-9198-7100</a>.</p>
<h2>References</h2>
<p>[<a id="note1" href="../index.html%3Fp=13282.html#ref1">1</a>] Grolemund, Garrett, and Hadley Wickham. &#8220;R for Data Science&#8221;. This title is available in print or online: <a href="http://r4ds.had.co.nz/introduction.html">http://r4ds.had.co.nz/introduction.html</a></p>
<p>[<a id="note2" href="../index.html%3Fp=13282.html#ref2">2</a>] The Project Counter website provides more information: <a href="https://www.projectcounter.org/">https://www.projectcounter.org/</a></p>
<p>[<a id="note3" href="../index.html%3Fp=13282.html#ref3">3</a>] <a href="https://www.projectcounter.org/code-of-practice-sections/usage-reports/">https://www.projectcounter.org/code-of-practice-sections/usage-reports/</a></p>
<p>[<a id="note4" href="../index.html%3Fp=13282.html#ref4">4</a>] Grolemund and Wickham. &#8220;R for Data Science&#8221; &#8211; <a href="http://r4ds.had.co.nz/introduction.html">http://r4ds.had.co.nz/introduction.html</a>. This approach is also discussed in a lecture Hadley Wichham gave at Reed College entitled &ldquo;Data Science with R.&rdquo; <a href="https://www.youtube.com/watch?v%3DK-ss_ag2k9E.">https://www.youtube.com/watch?v=K-ss_ag2k9E.</a></p>
<p>[<a id="note5" href="../index.html%3Fp=13282.html#ref5">5</a>] Grolemund and Wickham. &#8220;R for Data Science&#8221; &#8211; <a href="http://r4ds.had.co.nz/pipes.html">http://r4ds.had.co.nz/pipes.html</a>. The Vignette for the Magrittr package also provides a helpful guide: <a href="https://cran.r-project.org/web/packages/magrittr/vignettes/magrittr.html">https://cran.r-project.org/web/packages/magrittr/vignettes/magrittr.html</a></p>
<p>[<a id="note6" href="../index.html%3Fp=13282.html#ref6">6</a>] Grolemund and Wickham. &#8220;R for Data Science&#8221; &#8211; <a href="http://r4ds.had.co.nz/tidy-data.html">http://r4ds.had.co.nz/tidy-data.html</a>. For a more detailed treatment, see: Hadley Wickham &#8220;Tidy data.&#8221; The Journal of Statistical Software, vol. 59, 2014 &#8211; <a href="https://www.jstatsoft.org/article/view/v059i10">https://www.jstatsoft.org/article/view/v059i10</a></p>
					</div>
														</div>
				<!-- You can start editing here. -->

<div class="comments">
	<p class="subscriptionlinks">Subscribe to comments: <a href="13282/feed">For this article</a> | <a href="http://feeds.feedburner.com/c4lj/comments">For all articles</a></p>
	<h3>One Response to "Using R and the Tidyverse to Generate Library Usage Reports"</h3>

	<p class="aboutcomments">
					Please <a href="../index.html%3Fp=13282.html#respond">leave a response</a> below:
			</p>

	<ol class="commentlist">

			<li class="oddcomment" id="comment-2555799">
			<p class="commentheader"><cite>Terry Reese</cite>,
			
			<span class="commentmetadata"><a href="../index.html%3Fp=13282.html#comment-2555799" title="">2018-02-06</a></span></p>

      <div class="commentbody">
  			<p>Thanks for the heads up Tom.  We&#8217;ve taken care of updating the link in the article. </p>
<p>Best,</p>
<p>&#8211;tr</p>
      </div>

		</li>
	
	
	</ol>

 

<h3 id="respond">Leave a Reply</h3>


<form action="https://journal.code4lib.org/wp-comments-post.php" method="post" id="commentform">


<p><input type="text" name="author" id="author" value=""/>
<label for="author">Name (required)</label></p>

<p><input type="text" name="email" id="email" value="" />
<label for="email">Mail (will not be published) (required)</label></p>

<p><input type="text" name="url" id="url" value="" />
<label for="url">Website</label></p>


<p><textarea autocomplete="new-password"  aria-label="Comment box" id="f127f6ccbe"  name="f127f6ccbe"   cols="50" rows="10"></textarea><textarea id="comment" aria-label="hp-comment" aria-hidden="true" name="comment" autocomplete="new-password" style="padding:0 !important;clip:rect(1px, 1px, 1px, 1px) !important;position:absolute !important;white-space:nowrap !important;height:1px !important;width:1px !important;overflow:hidden !important;" tabindex="-1"></textarea><script data-noptimize>document.getElementById("comment").setAttribute( "id", "ab2c30b592ca3a74c8862dd1f838799c" );document.getElementById("f127f6ccbe").setAttribute( "id", "comment" );</script></p>

<p><input name="submit" type="submit" id="submit"  value="Submit Comment" />
<input type="hidden" name="comment_post_ID" value="13282" />
</p>
<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="fda44365db" /></p><p style="display: none !important;" class="akismet-fields-container" data-prefix="ak_"><label>&#916;<textarea name="ak_hp_textarea" cols="45" rows="8" maxlength="100"></textarea></label><input type="hidden" id="ak_js_1" name="ak_js" value="136"/><script>document.getElementById( "ak_js_1" ).setAttribute( "value", ( new Date() ).getTime() );</script></p>
</form>


</div>
							</div>

			<div id="meta">
				<div id="issn">
					<p>ISSN 1940-5758</p>
				</div>
				<div class="search-sidebar">
				<form method="get" id="searchform" action="../index.html">
					<div>
						<input type="text" value="" aria-labelledby="searchsubmit" name="s" id="s" />
						<input type="submit" value="Search" id="searchsubmit"/>
					</div>
				</form>
				</div>
				<div id="archives">
					<h2>Current Issue</h2>
						<ul>
							<li><a href="../issues/issues/issue60.html">Issue 60, 2025-04-14</a></li>
						</ul>

					<h2>Previous Issues</h2>
						<ul>
              <li><a href="../issues/issues/issue59.html">Issue 59, 2024-10-07</a></li><li><a href="../issues/issues/issue58.html">Issue 58, 2023-12-04</a></li><li><a href="../issues/issues/issue57.html">Issue 57, 2023-08-29</a></li><li><a href="../issues/issues/issue56.html">Issue 56, 2023-04-21</a></li>              <li><a href="../index.html%3Fp=2476.html">Older Issues</a></li>
						</ul>
				</div>
				<div id="forauthors">
					<h2>For Authors</h2>
					<ul>
						<li class="page_item page-item-4"><a href="../index.html%3Fp=4.html">Call for Submissions</a></li>
<li class="page_item page-item-7"><a href="../index.html%3Fp=7.html">Article Guidelines</a></li>
					</ul>
				</div>
			</div>
						<div id="footer">
				<p id="login"><a href="../wp-login.php.html">Log in</a></p>
				<p id="copyright">This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/us/">Creative Commons Attribution 3.0 United States License</a>.<br /><a rel="license" href="http://creativecommons.org/licenses/by/3.0/us/"><img alt="Creative Commons License" src="http://i.creativecommons.org/l/by/3.0/us/80x15.png" /></a></p>
			</div>
			<script type="speculationrules">
{"prefetch":[{"source":"document","where":{"and":[{"href_matches":"\/*"},{"not":{"href_matches":["\/wp-*.php","\/wp-admin\/*","\/wp-content\/uploads\/*","\/wp-content\/*","\/wp-content\/plugins\/*","\/wp-content\/themes\/c4lj-theme\/*","\/*\\?(.+)"]}},{"not":{"selector_matches":"a[rel~=\"nofollow\"]"}},{"not":{"selector_matches":".no-prefetch, .no-prefetch a"}}]},"eagerness":"conservative"}]}
</script>
<script type="text/javascript" src="../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js%3Fver=3.0.9b" id="syntaxhighlighter-core-js"></script>
<script type="text/javascript" src="../wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushR.js%3Fver=20100919" id="syntaxhighlighter-brush-r-js"></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://journal.code4lib.org/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.head.appendChild( corecss );
		var themecssurl = "https://journal.code4lib.org/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		document.head.appendChild( themecss );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}
</script>
<script defer type="text/javascript" src="../wp-content/plugins/akismet/_inc/akismet-frontend.js%3Fver=1748382734" id="akismet-frontend-js"></script>
		</div>
	</body>
</html>
