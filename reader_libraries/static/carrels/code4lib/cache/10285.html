<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

		<title>The Code4Lib Journal &#8211; Query Translation in Europeana</title>

		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="generator" content="WordPress 6.8.1" /> <!-- leave this for stats -->
    <link rel="shortcut icon" href="../wp-content/themes/c4lj-theme/images/favicon.ico" />
		<link rel="stylesheet" href="../wp-content/themes/c4lj-theme/style.css" type="text/css" media="screen, print" />
		<!--[if lte IE 7]>
		<link rel="stylesheet" href="https://journal.code4lib.org/wp-content/themes/c4lj-theme/fix-ie7.css" type="text/css" media="screen" />
		<![endif]-->
		<!--[if lte IE 6]>
		<link rel="stylesheet" href="https://journal.code4lib.org/wp-content/themes/c4lj-theme/fix-ie6.css" type="text/css" media="screen" />
		<![endif]-->
		<link rel="stylesheet" href="../wp-content/themes/c4lj-theme/print.css" type="text/css" media="print" />
		<link rel="alternate" type="application/rss+xml" title="The Code4Lib Journal Syndication Feed" href="http://feeds.feedburner.com/c4lj" />
		<link rel="pingback" href="https://journal.code4lib.org/xmlrpc.php" />

<!-- Google Scholar Stuff -->
	<meta name="citation_title" content="Query Translation in Europeana">
 <meta name="citation_author" content="Péter Király ">
<meta name="citation_publication_date" content="2015/01/21">
	<meta name="citation_journal_title" content="Code4Lib Journal">
		<meta name="citation_issue" content="27">
<!-- end  Google Scholar Stuff -->

<meta name='robots' content='max-image-preview:large' />
	<style>img:is([sizes="auto" i], [sizes^="auto," i]) { contain-intrinsic-size: 3000px 1500px }</style>
	<link rel="alternate" type="application/rss+xml" title="The Code4Lib Journal &raquo; Query Translation in Europeana Comments Feed" href="10285/feed" />
<script type="text/javascript">
/* <![CDATA[ */
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.1.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.1.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/journal.code4lib.org\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.8.1"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f","\ud83c\udff3\ufe0f\u200b\u26a7\ufe0f")?!1:!n(e,"\ud83c\uddfa\ud83c\uddf3","\ud83c\uddfa\u200b\ud83c\uddf3")&&!n(e,"\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f","\ud83c\udff4\u200b\udb40\udc67\u200b\udb40\udc62\u200b\udb40\udc65\u200b\udb40\udc6e\u200b\udb40\udc67\u200b\udb40\udc7f");case"emoji":return!n(e,"\ud83d\udc26\u200d\ud83d\udd25","\ud83d\udc26\u200b\ud83d\udd25")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
/* ]]> */
</script>
<style id='wp-emoji-styles-inline-css' type='text/css'>

	img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}
</style>
<link rel='stylesheet' id='wp-block-library-css' href='../wp-includes/css/dist/block-library/style.min.css%3Fver=6.8.1.css' type='text/css' media='all' />
<style id='classic-theme-styles-inline-css' type='text/css'>
/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}
</style>
<style id='global-styles-inline-css' type='text/css'>
:root{--wp--preset--aspect-ratio--square: 1;--wp--preset--aspect-ratio--4-3: 4/3;--wp--preset--aspect-ratio--3-4: 3/4;--wp--preset--aspect-ratio--3-2: 3/2;--wp--preset--aspect-ratio--2-3: 2/3;--wp--preset--aspect-ratio--16-9: 16/9;--wp--preset--aspect-ratio--9-16: 9/16;--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flex{display: flex;}.is-layout-flex{flex-wrap: wrap;align-items: center;}.is-layout-flex > :is(*, div){margin: 0;}body .is-layout-grid{display: grid;}.is-layout-grid > :is(*, div){margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
:root :where(.wp-block-pullquote){font-size: 1.5em;line-height: 1.6;}
</style>
<style id='akismet-widget-style-inline-css' type='text/css'>

			.a-stats {
				--akismet-color-mid-green: #357b49;
				--akismet-color-white: #fff;
				--akismet-color-light-grey: #f6f7f7;

				max-width: 350px;
				width: auto;
			}

			.a-stats * {
				all: unset;
				box-sizing: border-box;
			}

			.a-stats strong {
				font-weight: 600;
			}

			.a-stats a.a-stats__link,
			.a-stats a.a-stats__link:visited,
			.a-stats a.a-stats__link:active {
				background: var(--akismet-color-mid-green);
				border: none;
				box-shadow: none;
				border-radius: 8px;
				color: var(--akismet-color-white);
				cursor: pointer;
				display: block;
				font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen-Sans', 'Ubuntu', 'Cantarell', 'Helvetica Neue', sans-serif;
				font-weight: 500;
				padding: 12px;
				text-align: center;
				text-decoration: none;
				transition: all 0.2s ease;
			}

			/* Extra specificity to deal with TwentyTwentyOne focus style */
			.widget .a-stats a.a-stats__link:focus {
				background: var(--akismet-color-mid-green);
				color: var(--akismet-color-white);
				text-decoration: none;
			}

			.a-stats a.a-stats__link:hover {
				filter: brightness(110%);
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06), 0 0 2px rgba(0, 0, 0, 0.16);
			}

			.a-stats .count {
				color: var(--akismet-color-white);
				display: block;
				font-size: 1.5em;
				line-height: 1.4;
				padding: 0 13px;
				white-space: nowrap;
			}
		
</style>
<link rel="https://api.w.org/" href="../wp-json/index.html" /><link rel="alternate" title="JSON" type="application/json" href="../wp-json/wp/v2/posts/10285" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://journal.code4lib.org/xmlrpc.php?rsd" />
<link rel="canonical" href="../index.html%3Fp=10285.html" />
<link rel='shortlink' href='../index.html%3Fp=10285.html' />
<link rel="alternate" title="oEmbed (JSON)" type="application/json+oembed" href="../wp-json/oembed/1.0/embed%3Furl=https:%252F%252Fjournal.code4lib.org%252Farticles%252F10285" />
<link rel="alternate" title="oEmbed (XML)" type="text/xml+oembed" href="../wp-json/oembed/1.0/embed%3Furl=https:%252F%252Fjournal.code4lib.org%252Farticles%252F10285&amp;format=xml" />
<style>
@media all and (max-width : 768px) {
.syntaxhighlighter a, .syntaxhighlighter div, .syntaxhighlighter code, .syntaxhighlighter table, .syntaxhighlighter table td, .syntaxhighlighter table tr, .syntaxhighlighter table tbody, .syntaxhighlighter table thead, .syntaxhighlighter table caption, .syntaxhighlighter textarea
{
	font-size: 0.95em !important;
}
}
</style>
	</head>
	<body>
		<div id="page">
			<div id="header">
				<div id="headerbackground">
					<h1><a href="../index.html"><img src="../wp-content/themes/c4lj-theme/images/logo.png" alt="The Code4Lib Journal" /></a></h1>
				</div>
				<div id="about">
					<ul>
						<li class="page_item page-item-5"><a href="../index.html%3Fp=5.html">Mission</a></li>
<li class="page_item page-item-6"><a href="../editorial-committee/index.html">Editorial Committee</a></li>
<li class="page_item page-item-8"><a href="../process/index.html">Process and Structure</a></li>
						<li><a href="http://code4lib.org/">Code4Lib</a></li>
					</ul>
				</div>
				<div class="mobile-search">
					<form method="get" id="searchform" action="../index.html">
						<div>
							<input type="text" value="" aria-labelledby="searchsubmit" name="s" id="s" />
							<input type="submit" value="Search" id="searchsubmit" />
						</div>
					</form>
				</div>
			</div>

			<div id="content">
								<div class="article" id="post-10285">
					<p id="issueDesignation"><a href="../issues/issues/issue27.html">Issue 27, 2015-01-21</a></p>
					<h1 class="articletitle">Query Translation in Europeana</h1>
					<div class="abstract">
						<p>Europeana – a database containing European digital cultural heritage objects – recently introduced query translation in order to aid users in searching the collections regardless of language. The user enters query terms, and the portal searches for those terms in multiple languages. This article discusses the technical details of query translation with the aim of assisting similar projects to implement similar features.</p>
					</div>
					<div class="entry">
						<p>By Péter Király</p>
<h2>Introduction</h2>
<p>Europeana <a id="ref1" href="../index.html%3Fp=10285.html#cit 1">[1]</a> is a multilingual database that contains cultural heritage metadata from all European countries in many languages. The service provides different tools to help users run automatic machine translations, one of which is a new tool for query translation. The usage scenario is simple: the user sets the languages he or she wants to use in the process (up to six languages in total), then when a search expression is entered, the Europeana portal extends the query by injecting translations of the terms or phrases found in it, and runs the modified version against the search index. This paper highlights the details of this process in the hope that it can be reused in other projects.</p>
<p>Europeana makes use of Apache Solr for searching. Solr reads and parses the search expressions, runs a couple of transformations, analyses and filters, and creates its own internal representation. The process is highly configurable, and Solr provides tools to modify the query by injecting synonyms or by skipping stop words. Query translation is a similar modification; however, while the synonyms come from a static source (usually a file), translations come dynamically from external sources. This would normally not be a problem because Solr provides methods which enable the developer to write a custom plugin, but there is a price for that: the developer has to separate this particular part of his/her project into a different codebase because its product will be a distinct artifact – a Solr plugin. It should have its own development cycle with deployment and maintenance issues – partly-independent from the main project. This plugin should be inline with the Solr version and can become outdated if the Solr API changes.</p>
<p>At Europeana, we chose a different route. We made this injection code part of the main Europeana project and the system performs a query modification <em>before</em> the query reaches Solr. This code takes a query string and produces another query string. The string should conform to the underlying Lucene query syntax <a id="ref2" href="../index.html%3Fp=10285.html#cit2">[2]</a>, which has not changed much in the past ten years and is less dependent on Solr API changes.</p>
<p>In order to do this, the process somewhat mimics what Solr itself does:</p>
<ol>
<li>Normalize the Boolean operators of the query</li>
<li>Extract the terms from the query</li>
<li>Call translation service on the extracted terms</li>
<li>Inject the translations back into the appropriate position of the query string</li>
</ol>
<p>Below we will discuss these steps in detail.</p>
<h3>Boolean Normalization</h3>
<p>Normalizing the Boolean operators of the query is the easiest step. Solr lets us set a default Boolean operator. Solr&#8217;s default operator is <em>OR</em>, but Europeana uses <em>AND</em>. This means that when the user enters <em>Mona Lisa</em>, Solr understands that the query has two atomic terms and it sets the Boolean <em>AND</em> operator between them. So the resulting query will be <em>Mona AND Lisa</em>. But what happens if the user enters <em>Mona Lisa OR La Joconda</em>? You would expect that Solr understands that it is two expressions: <em>Mona Lisa</em>, and <em>La Joconda</em>, however what Solr really understands is three expressions: the first is <em>Mona</em>, the second is either <em>Lisa</em> or <em>La</em>, and the third one is <em>Joconda</em>. Fortunately the Lucene query language allows us to use parentheses for grouping terms together forming an expression in an unambiguous way. The query <em>(Mona Lisa) OR (La Joconda)</em> does what the we originally expected: it finds the records either having both <em>Mona</em> and <em>Lisa</em> or both <em>La</em> and <em>Joconda</em>. The query normalization uses some text analysis to add parentheses to the user query and groups together the common parts. It does not use any Solr-related library. It is purely text manipulation based on guessing.</p>
<h3>Extraction of Terms</h3>
<p>Now we have a normalized query from which we have to extract terms and phrases. For instance, in <em>dog OR cat</em> we have two terms; in <em>(Mona Lisa) OR (La Joconda)</em> we have two phrases and each contains multiple terms. Solr supports a number of syntactical patterns to distinguish between query types (descendant of Lucene&#8217;s basic Query object). Some examples include:</p>
<ul>
<li><em>Spinoza</em> – a term query (Lucene&#8217;s TermQuery object)</li>
<li><em>Den Haag</em> – a Boolean query (BooleanQuery) composed of two term queries, using the default boolean operator</li>
<li><em>“</em><em>Den Haag”</em> – a phrase query (PhraseQuery)</li>
<li><em>Spinoza*</em> – a prefix query: terms starting with <em>Spinoza</em> (PrefixQuery)</li>
<li><em>Spinoza~</em> – a fuzzy query: terms similar to Spinoza <a id="ref3" href="../index.html%3Fp=10285.html#cit3">[3]</a> (FuzzyQuery)</li>
<li><em>[alpha TO beta]</em> – a term range query: terms in lexicographical order standing between <em>alpha</em> and <em>beta</em> (TermRangeQuery)</li>
<li><em>timestamp_created:[2013-03-15T19:58:36.43Z TO 2013-04-15T19:58:36.43Z]</em> – a special term range query: because the type of this particular field is a date (represented in ISO 8601 format for UTC standard), the query using date comparisions. This example matches records created between 15<sup>th</sup> March and 15<sup>th</sup> April, 2013.</li>
<li><em>*:*</em> – matches all documents (MatchAllDocsQuery)</li>
</ul>
<p>Any query could be a component in a bigger Boolean query. The process should take into account that we do not have to inject translations into certain types of queries. To be precise, we only need to inject them into term queries and phrase queries. Sometimes we should handle two terms as a compound phase (for example <em>Mona Lisa</em> or <em>Den Haag</em>), and we have to subject them to query translation.</p>
<p>The Lucene Java library provides a way to deconstruct queries into atomic components (via the QueryParser class) by extracting terms and query types, but the Query object and descendants do not give information about the position, e.g. where the term or phrase takes place in the user-entered query. Moreover, usually the extracted term has undergone some character transformations such as white space removal, making terms lower case, and truncation.</p>
<p>Let us imagine a fictitious query for ‘<em>“Prince” is the prince of music’</em>. The first <em>Prince</em> is a phrase query, so we do not extract it. The second <em>prince</em> is a term query, so we would like to get synonyms for that. Now we have translations for only one <em>prince</em>, but how do we inject it? We do not know which <em>prince</em> should be modified in the string. In the time we built a mapping of the normalized query terms and their translated versions, we already lost the information where the term occurred in the original query string.</p>
<p>Lucene provides tokenization as another tool for solving this problem. The same analyzer – which the process uses in creating the QueryParser – can extract the stream of tokens, which are terms in the query string with additional metadata, such as position (start and end offset). When both tokenization and query parsing end, the next process merges the two kinds of information and tries to figure out which token belongs to which query component. By the end of this process our aforementioned mapping will contain the position information as well. Thus it has now been enabled for use in injecting translations into the right position.</p>
<h3>Calling the Translation Service</h3>
<p>Currently, Europeana uses Wikipedia&#8217;s API to run translations via the following URL pattern:</p>
<p>http://[language].wikipedia.org/w/api.php?action=query&amp;prop=langlinks&amp;lllimit=200&amp;format=json&amp;titles=[query term]</p>
<p>There are two variables in this pattern. The first is the [language] variable which is the ISO 639-1 language code <a id="ref4" href="https://journal.code4lib.org/articles/cit4">[4]</a> and in Europeana&#8217;s case comes from the user&#8217;s settings. The second variable is the [query term], which is a title of a Wikipedia entry and comes from the term extraction. We know the user&#8217;s language preferences, but we do not know which language was used in entering the query string, so the process runs the same API call in all languages in order to be certain. It then extracts all possible language variations (so it calls en.wikipedia.org, de.wikipedia.org, nl.wikipedia.org, etc., with the same query). The API returns the response in JSON format and the software ingests it using Google&#8217;s GSON library.</p>
<p>An example for the returning JSON (querying for the Hungarian version of Den Haag <a title="http://hu.wikipedia.org/w/api.php?action=query&amp;prop=langlinks&amp;lllimit=200&amp;format=json&amp;titles=h%C3%A1ga" href="http://hu.wikipedia.org/w/api.php?action=query&amp;prop=langlinks&amp;lllimit=200&amp;format=json&amp;titles=h%C3%A1ga">http://hu.wikipedia.org/w/api.php?action=query&amp;prop=langlinks&amp;lllimit=200&amp;format=json&amp;titles=h%C3%A1ga</a>):</p>
<pre class="brush: jscript; title: ; notranslate" title="">
{
  ...
  &quot;query&quot;: {
    &quot;normalized&quot;: &#x5B;
      {
        &quot;from&quot;: &quot;hága&quot;,
        &quot;to&quot;: &quot;Hága&quot;
      }
    ],
    &quot;pages&quot;: {
      &quot;123336&quot;: {
        &quot;pageid&quot;: 123336,
        &quot;ns&quot;: 0,
        &quot;title&quot;: &quot;Hága&quot;,
        &quot;langlinks&quot;: &#x5B;
          ...
          {&quot;lang&quot;: &quot;de&quot;, &quot;*&quot;: &quot;Den Haag&quot;},
          {&quot;lang&quot;: &quot;en&quot;,&quot;*&quot;: &quot;The Hague&quot;},
          ...
        ]
      }
    }
  }
}
</pre>
<p>The Wikipedia API does some normalization and corrects lower case issues (line 4-9). The current language&#8217;s main translation in the <em>title</em> property (line 14), and all other versions are available in the <em>langlinks</em> array (we removed the bulk of the items in the array, keeping only two language versions).</p>
<h3>Post-Translation Positioning</h3>
<p>Now that we have both the positions and the translations, all we have left to do is modify the query in order to inject the translations back into the appropriate position within the query string. The basic pattern looks like this:</p>
<p>Original query: <em>term<sub>a</sub> AND term<sub>b</sub></em></p>
<p>Modified query: <em>(term<sub>a</sub> OR translation<sub>a1</sub> OR translation<sub>a2</sub>) AND (term<sub>b</sub> OR translation<sub>b1</sub> translation<sub>b2</sub>)</em></p>
<p>For example:</p>
<p>Original query: Den Haag AND Warsaw</p>
<p>Modified query: (&#8220;Den Haag&#8221; OR &#8220;The Hague&#8221; OR Hága) AND (Warsaw OR Varsó OR Warschau)</p>
<p>The injection is usually rather straightforward, but there are some cases where it is a bit complicated.  For example:</p>
<ul>
<li>If the translations are the same for multiple languages, the second instance of the term is filtered out.</li>
<li>If the term or translation is a phrase or expression, then we have to handle quotation marks correctly (Lucene QueryParser does not accept them as part of the phrase).</li>
<li>Lucene handles phrases containing only one element such as <em>place:”Paris”</em> as a TermQuery and not a PhraseQuery, so <em>place:”Paris” </em>and <em>place:Paris</em> are equivalent.</li>
</ul>
<h3>User Interfaces</h3>
<p>The query translation feature is available in the Europeana API and Europeana portal.</p>
<p>In the Europeana API the end point is <a href="http://europeana.eu/api/v2/translateQuery.json">http://europeana.eu/api/v2/translateQuery.json</a>. On top of parameters common to all Europeana APIs (namely <em>wskey</em> and <em>callback</em>, see <a href="http://labs.europeana.eu/api">http://labs.europeana.eu/api</a>) it accepts the following two parameters:</p>
<ul>
<li><em>term</em>, the query string to be translated</li>
<li><em>languageCodes,</em> space or comma separated list of ISO 639-1 language codes denoting the language(s) of the translations</li>
</ul>
<p>It returns the list of the translations and a well-formed query string which can be used in a Search API call.</p>
<p>The example:</p>
<p><a href="https://journal.code4lib.org/articles/&quot;http://europeana.eu/api/v2/translateQuery.json?wskey=xxxxxxxx&amp;term=%28Den%20Haag%29%20OR%20Warsaw&amp;languageCodes=de,nl,hu,en">http://europeana.eu/api/v2/translateQuery.json?wskey=xxxxxxxx&amp;term=%28Den%20Haag%29%20OR%20Warsaw&amp;languageCodes=de,nl,hu,en</a></p>
<p>returns</p>
<p>&nbsp;</p>
<pre class="brush: jscript; title: ; notranslate" title="">
{
  &quot;apikey&quot;: &quot;xxxxxxxx&quot;,
  &quot;action&quot;: &quot;translateQuery.json&quot;,
  &quot;success&quot;: true,
  &quot;requestNumber&quot;: 13811,
  &quot;translations&quot;: &#x5B;
    {&quot;text&quot;: &quot;Den Haag&quot;,  &quot;languageCode&quot;: &quot;de&quot;},
    {&quot;text&quot;: &quot;Warsaw&quot;,    &quot;languageCode&quot;: &quot;de&quot;},
    {&quot;text&quot;: &quot;Warschau&quot;,  &quot;languageCode&quot;: &quot;de&quot;},
    {&quot;text&quot;: &quot;The Hague&quot;, &quot;languageCode&quot;: &quot;en&quot;},
    {&quot;text&quot;: &quot;Warsaw&quot;,    &quot;languageCode&quot;: &quot;en&quot;},
    {&quot;text&quot;: &quot;Hága&quot;,      &quot;languageCode&quot;: &quot;hu&quot;},
    {&quot;text&quot;: &quot;Varsó&quot;,     &quot;languageCode&quot;: &quot;hu&quot;},
    {&quot;text&quot;: &quot;Den Haag&quot;,  &quot;languageCode&quot;: &quot;nl&quot;},
    {&quot;text&quot;: &quot;Warsaw&quot;,    &quot;languageCode&quot;: &quot;nl&quot;},
    {&quot;text&quot;: &quot;Warschau&quot;,  &quot;languageCode&quot;: &quot;nl&quot;}
  ],
  &quot;translatedQuery&quot;: &quot;(\&quot;Den Haag\&quot; OR \&quot;The Hague\&quot; OR \&quot;Hága\&quot;)) OR (Warsaw OR \&quot;Varsó\&quot; OR \&quot;Warschau\&quot;)&quot;
}
</pre>
<p>The API key used in this example (line 2) is fictitious – please use your own API key. The <em>translations</em> key (lines 6-17) contains the list of translations, each having two properties: <em>text</em> is the translation and <em>languageCode</em> is the ISO 639-1 code of the language. The <em>translatedQuery</em> key (lines 18-19) contains the Solr query the API user can run in a distinct search call.</p>
<p>In the portal the user has to set up language preferences in order to utilize the query translation feature. It can be done in Language settings within My Europeana (available for anonymous users as well).  Below the search input box the user can see the individual translations (with language information), and he or she can remove them one by one or all of them with one click. The language versions are saved in all the links of the search result page, and if the user follows a link, the portal extracts the translation from the URL instead of trying to call the translation API again.</p>
<p>&nbsp;</p>
<p><a href="../media/issue27/kiraly/image001.png"><img fetchpriority="high" decoding="async" class="alignnone" src="../media/issue27/kiraly/image001.png" alt="" width="650" height="246" /></a></p>
<h2>Conclusion</h2>
<p>This model can be followed in other projects as it is flexible enough to use a different translation service or any other service to help users enhance their query by other means than multilinguality. One can imagine a classification system, a thesaurus, or an ontology instead of a translation service – each would serve different purposes and target different user experiences.</p>
<p>The hardest part of implementation is term extraction. Europeana&#8217;s solution is closely coupled with the Lucene library and Java language. If another project would like to follow this approach they should find out which techniques support the parsing of the query language used by their favorite search engine. If they do not use Java but still use Solr (or any other Lucene-based search engine), Lucene query parsers are available in almost all programming languages (such as Python, PHP, C#, C++, Perl, Ruby, JavaScript).</p>
<h2>Appendix</h2>
<p>In this section you will find some code snippets from the Europeana&#8217;s QueryExtractor class. I removed some of the details such as parameter checking and try-catch blocks etc. to concentrate instead on the Lucene library usage. If you are interested please consult the code at Europeana&#8217;s GitHub repository. <a id="ref5" href="../index.html%3Fp=10285.html#cit5">[5]</a></p>
<p>a) By initializing the QueryParser we made use of SimpleAnalyzer, and “text” as the default query field <a id="ref6" href="../index.html%3Fp=10285.html#cit6">[6]</a>:</p>
<pre class="brush: java; title: ; notranslate" title="">
Analyzer analyzer = new SimpleAnalyzer();
QueryParser queryParser = new QueryParser(Version.LUCENE_40, &quot;text&quot;, analyzer);
queryParser.setDefaultOperator(Operator.AND);
</pre>
<p>b) Getting the topmost Query object:</p>
<pre class="brush: java; title: ; notranslate" title="">
Query query = queryParser.parse(rawQueryString);
</pre>
<p>c) Iterating over the query components:</p>
<pre class="brush: java; title: ; notranslate" title="">
public void deconstructQuery(Query query, Stack&lt;QueryType&gt; queryTypeStack) {
  if (query == null) {
    return;
  }
  if (query instanceof TermQuery) {
    queryTypeStack.add(QueryType.TERM);
    deconstructTermQuery((TermQuery)query, queryTypeStack);
  } else if (query instanceof PhraseQuery) {
    group++;
    queryTypeStack.add(QueryType.PHRASE);
    deconstructPhraseQuery((PhraseQuery)query, queryTypeStack);
  } else if (query instanceof BooleanQuery) {
    group++;
    queryTypeStack.add(QueryType.BOOLEAN);
    deconstructBooleanQuery((BooleanQuery)query, queryTypeStack);
  } else if (query instanceof PrefixQuery) {
    group++;
    queryTypeStack.add(QueryType.PREFIX);
    deconstructPrefixQuery((PrefixQuery)query, queryTypeStack);
  } else if (query instanceof FuzzyQuery) {
    group++;
    queryTypeStack.add(QueryType.FUZZY);
    deconstructFuzzyQuery((FuzzyQuery)query, queryTypeStack);
  } else if (query instanceof TermRangeQuery) {
    group++;
    queryTypeStack.add(QueryType.TERMRANGE);
    deconstructTermRangeQuery((TermRangeQuery)query, queryTypeStack);
  } else if (query instanceof MatchAllDocsQuery) {
    group++;
    queryTypeStack.add(QueryType.MATCHALLDOCS);
    deconstructMatchAllDocsQuery((MatchAllDocsQuery)query, queryTypeStack);
  } else {
    log.warning(&quot;Unhandled query class: &quot; + query.getClass());
  }
  if (queryTypeStack.size() &gt; 0) {
    queryTypeStack.pop();
  }
}
</pre>
<p>In this method QueryType is an enumeration of the Lucene QueryTypes and denotes the name of the actual query class. The object collects them into a stack, for later usage (in some cases we have to investigate the parent query component&#8217;s type to determine what to do with the terms of the actual component). The deconstructXxxQuery() methods usually extract and save the terms. I mentioned previously that BooleanQuery connects two or more components together, so the deconstructBooleanQuery() method recursively calls this deconstructQuery() method to find those components. The role of the group variable is simple. It helps to find implicit phrases such as <em>Den Haag</em> without the quotes.</p>
<p>d) Lastly, extracting tokens from the user-entered search query.</p>
<pre class="brush: java; title: ; notranslate" title="">
TokenStream ts = analyzer.tokenStream(&quot;text&quot;, new StringReader(query));
OffsetAttribute offsetAttribute = ts.addAttribute(OffsetAttribute.class);
CharTermAttribute charTermAttribute = ts.addAttribute(CharTermAttribute.class);
ts.reset();
while (ts.incrementToken()) {
  int start = offsetAttribute.startOffset();
  int end = offsetAttribute.endOffset();
  String term = charTermAttribute.toString();
  String termInQuery = query.substring(start, end);
  // save the above information
}
</pre>
<p>We use the same analyzer as in the first snippet. We explicitly have to ask the TokenStream object to provide information about the position (OffsetAttribute), and the term (CharTermAttribute). In line 10 we extract the original term, since the token may be in an already transformed state, which could be different than the user entered version.</p>
<h2>Notes</h2>
<p><a id="cit1" href="../index.html%3Fp=10285.html#ref1">[1]</a> <a href="http://europeana.eu">http://europeana.eu</a></p>
<p><a id="cit2" href="../index.html%3Fp=10285.html#ref2">[2]</a> Apache Lucene is a Java library created for supporting indexing and searching. Solr is built on top of this library, and makes use Lucene&#8217;s query language. The Europeana query translation also depends on some functionalities of this library.</p>
<p><a href="../index.html%3Fp=10285.html#ref3" name="cit3">[3]</a> The similarity between terms are measured with the edit distance: how many atomic letter changes (replacement, deletion, addition) should be done to get from term<sub>a</sub> to term<sub>b</sub>. See <a href="http://lucene.apache.org/core/4_0_0/queryparser/org/apache/lucene/queryparser/classic/package-summary.html#Fuzzy_Searches">http://lucene.apache.org/core/4_0_0/queryparser/org/apache/lucene/queryparser/classic/package-summary.html#Fuzzy_Searches</a> and <a href="http://en.wikipedia.org/wiki/Damerau%D0Levenshtein_distance">http://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance</a>.</p>
<p><a href="../index.html%3Fp=10285.html#ref4" name="cit4">[4]</a> <a href="http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes">http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes</a></p>
<p><a href="../index.html%3Fp=10285.html#ref5" name="cit5">[5]</a> <a href="https://github.com/europeana/api2/">https://github.com/europeana/api2/</a>, and <a href="https://github.com/europeana/corelib/">https://github.com/europeana/corelib/</a>. You can use the API&#8217;s QueryTranslationController class (<a href="https://github.com/europeana/api2/blob/master/api2-war/src/main/java/eu/europeana/api2/v2/web/controller/QueryTranslationController.java">https://github.com/europeana/api2/blob/master/api2-war/src/main/java/eu/europeana/api2/v2/web/controller/QueryTranslationController.java</a>) as entry point.</p>
<p><a href="../index.html%3Fp=10285.html#ref6" name="cit6">[6]</a> <em>Text</em> is a kind of super field in Europeana&#8217;s index. The indexing process copies almost every other field&#8217;s content into this field. When the user does not specify a field, the search runs this field again.</p>
<h2>About the Author</h2>
<p>Péter Király is a software developer with a humanities background (history and philology). He works at Gesellschaft für wissenschaftliche Datenverarbeitung Göttingen (Germany). His main interests are publishing and searching large textual corpora, digital libraries, digital humanities, and new possibilities of digital cultural heritage. He has participated in projects like Project Gutenberg, eXtensible Catalog and Europeana. You can reach Péter at peter.kiraly[at]gwdg.de.</p>
					</div>
														</div>
				<!-- You can start editing here. -->

<div class="comments">
	<p class="subscriptionlinks">Subscribe to comments: <a href="10285/feed">For this article</a> | <a href="http://feeds.feedburner.com/c4lj/comments">For all articles</a></p>

			<!-- If comments are open, but there are no comments. -->

	 

<h3 id="respond">Leave a Reply</h3>


<form action="https://journal.code4lib.org/wp-comments-post.php" method="post" id="commentform">


<p><input type="text" name="author" id="author" value=""/>
<label for="author">Name (required)</label></p>

<p><input type="text" name="email" id="email" value="" />
<label for="email">Mail (will not be published) (required)</label></p>

<p><input type="text" name="url" id="url" value="" />
<label for="url">Website</label></p>


<p><textarea autocomplete="new-password"  aria-label="Comment box" id="f127f6ccbe"  name="f127f6ccbe"   cols="50" rows="10"></textarea><textarea id="comment" aria-label="hp-comment" aria-hidden="true" name="comment" autocomplete="new-password" style="padding:0 !important;clip:rect(1px, 1px, 1px, 1px) !important;position:absolute !important;white-space:nowrap !important;height:1px !important;width:1px !important;overflow:hidden !important;" tabindex="-1"></textarea><script data-noptimize>document.getElementById("comment").setAttribute( "id", "ad0c1ebd2adc219b99493ca343b655dd" );document.getElementById("f127f6ccbe").setAttribute( "id", "comment" );</script></p>

<p><input name="submit" type="submit" id="submit"  value="Submit Comment" />
<input type="hidden" name="comment_post_ID" value="10285" />
</p>
<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="a5336afcda" /></p><p style="display: none !important;" class="akismet-fields-container" data-prefix="ak_"><label>&#916;<textarea name="ak_hp_textarea" cols="45" rows="8" maxlength="100"></textarea></label><input type="hidden" id="ak_js_1" name="ak_js" value="73"/><script>document.getElementById( "ak_js_1" ).setAttribute( "value", ( new Date() ).getTime() );</script></p>
</form>


</div>
							</div>

			<div id="meta">
				<div id="issn">
					<p>ISSN 1940-5758</p>
				</div>
				<div class="search-sidebar">
				<form method="get" id="searchform" action="../index.html">
					<div>
						<input type="text" value="" aria-labelledby="searchsubmit" name="s" id="s" />
						<input type="submit" value="Search" id="searchsubmit"/>
					</div>
				</form>
				</div>
				<div id="archives">
					<h2>Current Issue</h2>
						<ul>
							<li><a href="../issues/issues/issue60.html">Issue 60, 2025-04-14</a></li>
						</ul>

					<h2>Previous Issues</h2>
						<ul>
              <li><a href="../issues/issues/issue59.html">Issue 59, 2024-10-07</a></li><li><a href="../issues/issues/issue58.html">Issue 58, 2023-12-04</a></li><li><a href="../issues/issues/issue57.html">Issue 57, 2023-08-29</a></li><li><a href="../issues/issues/issue56.html">Issue 56, 2023-04-21</a></li>              <li><a href="../index.html%3Fp=2476.html">Older Issues</a></li>
						</ul>
				</div>
				<div id="forauthors">
					<h2>For Authors</h2>
					<ul>
						<li class="page_item page-item-4"><a href="../index.html%3Fp=4.html">Call for Submissions</a></li>
<li class="page_item page-item-7"><a href="../index.html%3Fp=7.html">Article Guidelines</a></li>
					</ul>
				</div>
			</div>
						<div id="footer">
				<p id="login"><a href="../wp-login.php.html">Log in</a></p>
				<p id="copyright">This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/us/">Creative Commons Attribution 3.0 United States License</a>.<br /><a rel="license" href="http://creativecommons.org/licenses/by/3.0/us/"><img alt="Creative Commons License" src="http://i.creativecommons.org/l/by/3.0/us/80x15.png" /></a></p>
			</div>
			<script type="speculationrules">
{"prefetch":[{"source":"document","where":{"and":[{"href_matches":"\/*"},{"not":{"href_matches":["\/wp-*.php","\/wp-admin\/*","\/wp-content\/uploads\/*","\/wp-content\/*","\/wp-content\/plugins\/*","\/wp-content\/themes\/c4lj-theme\/*","\/*\\?(.+)"]}},{"not":{"selector_matches":"a[rel~=\"nofollow\"]"}},{"not":{"selector_matches":".no-prefetch, .no-prefetch a"}}]},"eagerness":"conservative"}]}
</script>
<script type="text/javascript" src="../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js%3Fver=3.0.9b" id="syntaxhighlighter-core-js"></script>
<script type="text/javascript" src="../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js%3Fver=3.0.9b" id="syntaxhighlighter-brush-jscript-js"></script>
<script type="text/javascript" src="../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJava.js%3Fver=3.0.9b" id="syntaxhighlighter-brush-java-js"></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://journal.code4lib.org/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.head.appendChild( corecss );
		var themecssurl = "https://journal.code4lib.org/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		document.head.appendChild( themecss );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}
</script>
<script defer type="text/javascript" src="../wp-content/plugins/akismet/_inc/akismet-frontend.js%3Fver=1748382734" id="akismet-frontend-js"></script>
		</div>
	</body>
</html>
