<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

		<title>The Code4Lib Journal &#8211; Predictable Book Shifting</title>

		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="generator" content="WordPress 6.8.1" /> <!-- leave this for stats -->
    <link rel="shortcut icon" href="../wp-content/themes/c4lj-theme/images/favicon.ico" />
		<link rel="stylesheet" href="../wp-content/themes/c4lj-theme/style.css" type="text/css" media="screen, print" />
		<!--[if lte IE 7]>
		<link rel="stylesheet" href="https://journal.code4lib.org/wp-content/themes/c4lj-theme/fix-ie7.css" type="text/css" media="screen" />
		<![endif]-->
		<!--[if lte IE 6]>
		<link rel="stylesheet" href="https://journal.code4lib.org/wp-content/themes/c4lj-theme/fix-ie6.css" type="text/css" media="screen" />
		<![endif]-->
		<link rel="stylesheet" href="../wp-content/themes/c4lj-theme/print.css" type="text/css" media="print" />
		<link rel="alternate" type="application/rss+xml" title="The Code4Lib Journal Syndication Feed" href="http://feeds.feedburner.com/c4lj" />
		<link rel="pingback" href="https://journal.code4lib.org/xmlrpc.php" />

<!-- Google Scholar Stuff -->
	<meta name="citation_title" content="Predictable Book Shifting">
 <meta name="citation_author" content="Joshua Lambert">
<meta name="citation_publication_date" content="2022/08/29">
	<meta name="citation_journal_title" content="Code4Lib Journal">
		<meta name="citation_issue" content="54">
<!-- end  Google Scholar Stuff -->

<meta name='robots' content='max-image-preview:large' />
	<style>img:is([sizes="auto" i], [sizes^="auto," i]) { contain-intrinsic-size: 3000px 1500px }</style>
	<link rel="alternate" type="application/rss+xml" title="The Code4Lib Journal &raquo; Predictable Book Shifting Comments Feed" href="16577/feed" />
<script type="text/javascript">
/* <![CDATA[ */
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.1.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.1.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/journal.code4lib.org\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.8.1"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f","\ud83c\udff3\ufe0f\u200b\u26a7\ufe0f")?!1:!n(e,"\ud83c\uddfa\ud83c\uddf3","\ud83c\uddfa\u200b\ud83c\uddf3")&&!n(e,"\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f","\ud83c\udff4\u200b\udb40\udc67\u200b\udb40\udc62\u200b\udb40\udc65\u200b\udb40\udc6e\u200b\udb40\udc67\u200b\udb40\udc7f");case"emoji":return!n(e,"\ud83d\udc26\u200d\ud83d\udd25","\ud83d\udc26\u200b\ud83d\udd25")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
/* ]]> */
</script>
<style id='wp-emoji-styles-inline-css' type='text/css'>

	img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}
</style>
<link rel='stylesheet' id='wp-block-library-css' href='../wp-includes/css/dist/block-library/style.min.css%3Fver=6.8.1.css' type='text/css' media='all' />
<style id='classic-theme-styles-inline-css' type='text/css'>
/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}
</style>
<style id='global-styles-inline-css' type='text/css'>
:root{--wp--preset--aspect-ratio--square: 1;--wp--preset--aspect-ratio--4-3: 4/3;--wp--preset--aspect-ratio--3-4: 3/4;--wp--preset--aspect-ratio--3-2: 3/2;--wp--preset--aspect-ratio--2-3: 2/3;--wp--preset--aspect-ratio--16-9: 16/9;--wp--preset--aspect-ratio--9-16: 9/16;--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flex{display: flex;}.is-layout-flex{flex-wrap: wrap;align-items: center;}.is-layout-flex > :is(*, div){margin: 0;}body .is-layout-grid{display: grid;}.is-layout-grid > :is(*, div){margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
:root :where(.wp-block-pullquote){font-size: 1.5em;line-height: 1.6;}
</style>
<style id='akismet-widget-style-inline-css' type='text/css'>

			.a-stats {
				--akismet-color-mid-green: #357b49;
				--akismet-color-white: #fff;
				--akismet-color-light-grey: #f6f7f7;

				max-width: 350px;
				width: auto;
			}

			.a-stats * {
				all: unset;
				box-sizing: border-box;
			}

			.a-stats strong {
				font-weight: 600;
			}

			.a-stats a.a-stats__link,
			.a-stats a.a-stats__link:visited,
			.a-stats a.a-stats__link:active {
				background: var(--akismet-color-mid-green);
				border: none;
				box-shadow: none;
				border-radius: 8px;
				color: var(--akismet-color-white);
				cursor: pointer;
				display: block;
				font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen-Sans', 'Ubuntu', 'Cantarell', 'Helvetica Neue', sans-serif;
				font-weight: 500;
				padding: 12px;
				text-align: center;
				text-decoration: none;
				transition: all 0.2s ease;
			}

			/* Extra specificity to deal with TwentyTwentyOne focus style */
			.widget .a-stats a.a-stats__link:focus {
				background: var(--akismet-color-mid-green);
				color: var(--akismet-color-white);
				text-decoration: none;
			}

			.a-stats a.a-stats__link:hover {
				filter: brightness(110%);
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06), 0 0 2px rgba(0, 0, 0, 0.16);
			}

			.a-stats .count {
				color: var(--akismet-color-white);
				display: block;
				font-size: 1.5em;
				line-height: 1.4;
				padding: 0 13px;
				white-space: nowrap;
			}
		
</style>
<link rel="https://api.w.org/" href="../wp-json/index.html" /><link rel="alternate" title="JSON" type="application/json" href="../wp-json/wp/v2/posts/16577" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://journal.code4lib.org/xmlrpc.php?rsd" />
<link rel="canonical" href="../index.html%3Fp=16577.html" />
<link rel='shortlink' href='../index.html%3Fp=16577.html' />
<link rel="alternate" title="oEmbed (JSON)" type="application/json+oembed" href="../wp-json/oembed/1.0/embed%3Furl=https:%252F%252Fjournal.code4lib.org%252Farticles%252F16577" />
<link rel="alternate" title="oEmbed (XML)" type="text/xml+oembed" href="../wp-json/oembed/1.0/embed%3Furl=https:%252F%252Fjournal.code4lib.org%252Farticles%252F16577&amp;format=xml" />
<style>
@media all and (max-width : 768px) {
.syntaxhighlighter a, .syntaxhighlighter div, .syntaxhighlighter code, .syntaxhighlighter table, .syntaxhighlighter table td, .syntaxhighlighter table tr, .syntaxhighlighter table tbody, .syntaxhighlighter table thead, .syntaxhighlighter table caption, .syntaxhighlighter textarea
{
	font-size: 0.95em !important;
}
}
</style>
	</head>
	<body>
		<div id="page">
			<div id="header">
				<div id="headerbackground">
					<h1><a href="../index.html"><img src="../wp-content/themes/c4lj-theme/images/logo.png" alt="The Code4Lib Journal" /></a></h1>
				</div>
				<div id="about">
					<ul>
						<li class="page_item page-item-5"><a href="../index.html%3Fp=5.html">Mission</a></li>
<li class="page_item page-item-6"><a href="../editorial-committee/index.html">Editorial Committee</a></li>
<li class="page_item page-item-8"><a href="../process/index.html">Process and Structure</a></li>
						<li><a href="http://code4lib.org/">Code4Lib</a></li>
					</ul>
				</div>
				<div class="mobile-search">
					<form method="get" id="searchform" action="../index.html">
						<div>
							<input type="text" value="" aria-labelledby="searchsubmit" name="s" id="s" />
							<input type="submit" value="Search" id="searchsubmit" />
						</div>
					</form>
				</div>
			</div>

			<div id="content">
								<div class="article" id="post-16577">
					<p id="issueDesignation"><a href="../issues/issues/issue54.html">Issue 54, 2022-08-29</a></p>
					<h1 class="articletitle">Predictable Book Shifting</h1>
					<div class="abstract">
						<p>There are many methods to carry out a library book shift but those methods allow for varying degrees of predictability. The Bookshift.py script, when used in conjunction with accurate measurements of a library&#8217;s collection and shelving, provides library staff with predictability, flexibility, and the ability to shift in parallel. For every shelf, the script outputs a phrase such as the following, &#8220;The last book from this shelf goes 12.3 in/cm into shelf 776.&#8221; While complicated shifts can still create surprises, using Bookshift.py or similar methods typically make those surprises easy to correct.</p>
					</div>
					<div class="entry">
						<p>By Joshua Lambert</p>
<h2>Introduction</h2>
<p>Libraries eventually must move to new buildings or renovate old ones. When they shift a collection, they must decide how to move the books into the new space. If the collection is large enough, then slight, but repeated misplacements during a shift can lead to many extra hours of work once library staff recognize there is a problem.</p>
<p>The Missouri State University Libraries staff were faced with the task of moving thousands of shelves of books. To make the move more predictable, the staff wanted an answer to the question, “Before a single book is moved, how can I determine which shelf each book should sit on after the shift is complete?” Looking at library literature provided hints and good processes to follow, but those processes were not predictable or flexible enough. The following table (Table 1) illustrates one possible outcome of the general goal, and the rest of this article explains how to obtain that outcome with the help of a Python script, bookshift.py, in the <a href="https://github.com/distichum/bookshift">GitHub repository</a> (Lambert 2022). The repository also contains data from the actual MSU shift described in this article.</p>
<div class = "caption">
<strong>Table 1.</strong> Example Shifting Report</p>
<table style="text-align:left">
<tr>
<th>shelf_num</th>
<th>goal</th>
</tr>
<tr>
<td>1</td>
<td>The last book from this shelf goes 24.0 in/cm into shelf 1</td>
</tr>
<tr>
<td>2</td>
<td>The last book from this shelf goes 18.9 in/cm into shelf 2</td>
</tr>
<tr>
<td>&#8230;</td>
<td>&#8230;</td>
</tr>
<tr>
<td>1478</td>
<td>The last book from this shelf goes 26 in/cm into shelf 1550</td>
</tr>
</table>
</div>
<p>Shifting library books is difficult for many reasons. Books that were on the shelves during shift preparation may no longer be on the shelf during the shift. Likewise, what was checked out may be back on the shelf. Books must remain in their exact order due to the classification system. The number of shelves and shelving layout may change. Librarians may want to leave more empty space in some book collections because they expect the number of books in that collection to grow faster than other collections. Shifting inconsistencies cause unexpected problems. If someone shifting books puts one less inch of books on every shelf, that will be a big problem after 1000 shelves. Yet, the process given in this article allows library staff to shift not only predictably, but also backward, forward, in an arbitrary number of places simultaneously, or all of the above, at the same time. The author acknowledges that real life does not fit nicely into mathematical formulas and computer algorithms. That said, the process put forward in this article provides acceptable and understandable trade-offs in many if not most cases.</p>
<h2>Background information</h2>
<p>There have been discussions of moving books in North American library literature since at least <a href="https://catalog.hathitrust.org/Record/100562245/Home">Melvil Dewey&#8217;s Library Notes</a> discussions in Volume 2, 1887 (Dewey 1887). From that time forward, people have published advancements and refinements that fit their goals and contexts. There is a large body of literature related to the intersection of Operations Research and librarianship from the late 1960s and early 1970s that applied mathematical techniques to library processes. There was even an operations research themed library conference in 1971 (Morse 1972). The pairing of the library world and Operations Research was mostly short-lived, but some influence remains (Reisman and Xu 1994; Warwick 2012).</p>
<p>In 1983, Donna Lee Kurkul, as a library practitioner, published an article with a page containing seven mathematical formulas (Kurkul 1983). Those formulas were not new to library literature, nor complicated, but Kurkul presented them together in a more concise and understandable manner than previous publications. The ideas in those formulas are useful in understanding the Python script which is the subject of this article. After Kurkul&#8217;s article, most publications on the topic have contributed by explaining new tools or processes, as computers and spreadsheets have become integral parts of library operation.</p>
<p>Steven Carl Fortriede’s book and <a href="https://www.ala.org/aboutala/offices/publishing/editions/webextras/fortriede09942/fortriede09942">accompanying spreadsheets</a> provide both information and the tools needed to make a library move successful (Fortriede 2010). It contains many of the ideas presented in this article. Importantly, his work uses the term “waypoint”, and describes it as “a defined spot in a collection designated by the call number of the book to be filed immediately after the waypoint.” The idea of a waypoint is very important, and it adds predictability to the shifting process.</p>
<p>The author&#8217;s previous conference presentation provides the mathematical basis behind the bookshift.py script presented in this article (Lambert 2016). The resulting algorithm is in the <tt>set_measurement_totals_after</tt> function. </p>
<p>This article uses the following terminology to refer to library shelving. A shelf is the horizontal structure that books sit on. A section is a vertical group of shelves of similar size, stacked above each other, with vertical space between them for books. A range is a group of sections, attached to each other, forming a line. Ranges are arranged in parallel with aisles for people to walk down and look at books. For the purposes of this article, and the script, a double-sided shelving unit consists of two ranges of shelving, sitting back to back, with books facing out on each side.</p>
<p class = "caption">
<a href="../media/issue54/lambert/figure1.png"><img src = "../media/issue54/lambert/figure1-scaled.png"></a><br />
<strong>Figure 1.</strong> Depiction of Shelf, Section and Range.
</p>
<p>Fortriede&#8217;s spreadsheets allowed library staff to split the shift into &#8220;collections&#8221; (Fortriede 2010). Each collection could have its own future fill ratio. For example, library staff might want shelves that hold books from collection one to have a fill ratio of 80%. That means that 80% of the shelf would have books on it. Mathematically, that would be the measure of books on a shelf divided by the measure of books that could be on the shelf if it were full. After that collection, someone might want to leave more growth room for collection two and want those shelves to have a fill ratio of 60%. Using Fortriede&#8217;s method, shift coordinators must adjust the &#8220;growth factor&#8221; for each collection manually until your plan matches future shelving capacity. Missouri State University shift coordinators did not want to have to specify fill ratios for all collections, but they wanted to for some. For this paper, an &#8220;imposed fill ratio&#8221; is a fill ratio chosen by library staff that the Python script will not change. In Fortriede&#8217;s spreadsheets each collection has an imposed fill ratio but bookshift.py requires that some collections not have a fill ratio imposed on them. Note that the script will not work if any shelf or collection of shelves has a fill ratio of greater than 100%.</p>
<p>Consider the scale of a book shift and the effect that incorrect measurements and book circulation have on the overall process. The Missouri State University library shift example provided in the GitHub repository in the &#8220;files-to-import&#8221; directory is a good example. If people measuring the collection measured 2,833 too few inches, that would mean that each of the 3,864 shelves would have 0.73 inches more on them than expected. While annoying to find out, this will not require much, if any, extra labor. If a library uses the recommended one waypoint per range, someone shifting will get near the end of the range and realize they have too many books. The shifter can adjust by adding extra books to shelves near the end. It will make fill ratios in that range, and every range, uneven, but acceptable. The good thing is that the problem will not compound but can be addressed between each waypoint with small adjustments. Mismeasuring 2,833 inches also seems highly unlikely if the shelving coordinator uses quality control measures. Also, if a shift coordinator wants extra assurance, they can tell the measurers to round up to the nearest half inch or centimeter for each measurement. This creates a small amount of extra space between waypoints but it will be inconsequential to the overall shift.</p>
<h2>Required data</h2>
<p>To create predictable results, bookshelf.py requires three input files with predictable data formats. The first file provides measurement data from before the shift. The second provides destination shelving data. The third file provides imposed fill ratios for collections of books. The following sections describe what should be in each file.</p>
<h3>Data placement</h3>
<p>The script looks for a subdirectory by the name of &#8220;files-to-import&#8221; which should contain three files: current.csv, future.csv, and collections.csv. Library staff can clone the GitHub repository and work within the resulting directory. Library staff can also download the bookshift.py file, create a subdirectory named &#8220;files-to-import&#8221; and place the three relevant files in that directory. The GitHub repository contains data used during the Missouri State University shift.</p>
<h3>Measurements before the shift</h3>
<p>Before the shift, there are at least four data points that must be collected for each shelf. Three of those are implicitly or intermittently collected. The data points are:</p>
<ol>
<li>Horizontal measurement of books on a shelf.</li>
<li>The start of a new section.</li>
<li>The call number of the first book on the first shelf of a range.</li>
<li>Collection number.</li>
</ol>
<p>Paper-based tables, like Table 2, imitate the look of shelves and make it simpler for student workers to comprehend the process. Table 2 shows recorded measurements in inches, though someone may use any unit of measure, assuming they use the same unit the whole time. The top of every new column is the first shelf of a section, therefore section numbers do not need to be listed on the form because they are implicit in the table itself. Each range is visually separated by a different paper table. The author&#8217;s experience is that using paper is the easiest, fastest, and most reliable method for student workers, but using this method will require transcribing the data into a spreadsheet before processing. </p>
<p>The collection number need not be tracked on this paper form, but may be if library staff choose to do so. Note that for the sake of this process, and bookshift.py, one shelf, before the shift, can only have one collection on it. If there are books on a shelf that library staff would like to be in two separate collections, it is easiest to ignore the fact and just assign it to one collection or the other. Alternatively, shift the offending books one shelf over, so there are not books from two collections on a shelf.</p>
<div class = "caption">
<strong>Table 2.</strong> Example Shelving Table</p>
<table style="width:100%">
<tr style="min-width:400px">
<td colspan=6 style="text-align:left"><strong>CallNum</strong>: A1.1: D35<br /><strong>RangeNum</strong>: 1</th>
</tr>
<tr>
<td style="text-align:left">24</td>
<td style="text-align:left">23</td>
<td style="text-align:left">24</td>
<td style="text-align:left">22</td>
<td style="text-align:left">1</td>
<td style="text-align:left">24</td>
</tr>
<tr>
<td style="text-align:left">21</td>
<td style="text-align:left">25</td>
<td style="text-align:left">26</td>
<td style="text-align:left">21</td>
<td style="text-align:left">29</td>
<td style="text-align:left">25</td>
</tr>
<tr>
<td style="text-align:left">25</td>
<td style="text-align:left">25</td>
<td style="text-align:left">26</td>
<td style="text-align:left">25</td>
<td style="text-align:left">26</td>
<td style="text-align:left">25</td>
</tr>
<tr>
<td style="text-align:left">27</td>
<td style="text-align:left">26</td>
<td style="text-align:left">24</td>
<td style="text-align:left">24</td>
<td style="text-align:left">26</td>
<td style="text-align:left">25</td>
</tr>
<tr>
<td style="text-align:left">8</td>
<td style="text-align:left">23</td>
<td style="text-align:left">26</td>
<td style="text-align:left">26</td>
<td style="text-align:left">23</td>
<td style="text-align:left">25</td>
</tr>
<tr>
<td style="text-align:left">26</td>
<td style="text-align:left">23</td>
<td style="text-align:left">25</td>
<td style="text-align:left">9</td>
<td style="text-align:left">26</td>
<td style="text-align:left">25</td>
</tr>
</table>
</div>
<p>The use of paper may be skipped entirely and a spreadsheet used instead. The spreadsheet is designed to reduce keystrokes and labor. Library staff can first type in a range of measurements in a spreadsheet column, then go back to add new section increments and call numbers as shown in Figure 3. Library staff can quickly copy down collection numbers for each range or for entire collections at a time if all the measurements are present. The following table shows the measurements above in the required format. A spreadsheet is not required, but the end result must be a CSV file, and many people will prefer to input data in a spreadsheet and then export to a CSV file. Table 3 shows the first lines of the &#8220;<a href="https://github.com/distichum/bookshift/blob/main/files-to-import/current.csv">current.csv</a>&#8221; file in the &#8220;files-to-import&#8221; directory of the GitHub repository.</p>
<div class = "caption">
<strong>Table 3.</strong> Example current.csv file layout</p>
<table style="width:100%">
<tr>
<th>measure</th>
<th>sctn_increment</th>
<th>call_num</th>
<th>collection_num</th>
</tr>
<tr>
<td style="text-align:right">24</td>
<td style="text-align:left">x</td>
<td style="text-align:left">Q1 .H68 1975</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">21</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">25</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">27</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">8</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">26</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">23</td>
<td style="text-align:left">x</td>
<td style="text-align:left"></td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">25</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">25</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">26</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:right">1</td>
</tr>
</table>
</div>
<p>The data entry will take some time and probably be thousands if not tens of thousands of lines long. It is important that the data be correct for the process to provide accurate results. That said, the process is resilient enough that some measurement or data entry mistakes still allow shifters to easily adjust for the mistakes. The definition of &#8220;some&#8221; depends on the magnitude of the mistake. After the data is in the spreadsheet it should be exported to CSV format with the name &#8220;current.csv&#8221;.</p>
<h3>Destination shelf measurements</h3>
<p>While it does take extra time, recording shelving configurations and measurements for the future shelving locations allows library staff to carry out a predictable shift. Shelf sizes are often similar, therefore one can quickly copy and paste a large section of shelf measurements in a spreadsheet. The data points required are:</p>
<ol>
<li>Shelf measurement</li>
<li>The start of a new section.</li>
<li>The start of a new range.</li>
</ol>
<p>This data likewise should be exported as a CSV file, and its name should be &#8220;future.csv&#8221;. The resulting file will look like the example Missouri State University &#8220;<a href="https://github.com/distichum/bookshift/blob/main/files-to-import/future.csv">future.csv</a>&#8221; file in the repository. While the example shows &#8220;x&#8221; or &#8220;c&#8221; for section and range increments, the script accepts any character. If it is not the first shelf of a section or range, then the field must be empty.</p>
<h3>Collection data</h3>
<p>This last file is not required if library staff do not intend to use imposed fill ratios. If they do, the data points needed for the file are:</p>
<ol>
<li>Collection number, starting at one.</li>
<li>Imposed fill ratio.</li>
</ol>
<div class = "caption">
<strong>Table 4.</strong> Example collection data</p>
<table style="width:50%">
<tr>
<th>col_num</th>
<th>imposed_fill_ratio</th>
</tr>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">2</td>
<td style="text-align:left">0.65</td>
</tr>
<tr>
<td style="text-align:left">3</td>
<td style="text-align:left">0.7</td>
</tr>
<tr>
<td style="text-align:left">4</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">5</td>
<td style="text-align:left">0.5</td>
</tr>
<tr>
<td style="text-align:left">6</td>
<td style="text-align:left">0.5</td>
</tr>
</table>
</div>
<p>If library staff intends to use collections, and therefore wants to change the file, every collection number in the shift must be listed. Only imposed fill ratios should be placed in the second column. This file may contain two or more rows of data if library staff choose to divide the shift into collections. The data should be exported as a CSV file with the name of &#8220;collections.csv&#8221;.</p>
<p>If library staff do not choose to use collections, then make sure there is no &#8220;collections.csv&#8221; file in the &#8220;files-to-import&#8221; directory available for the script to find. Instead, the &#8220;no_collections.csv&#8221; file will be used. The repository contains such a file that you can place in the &#8220;files-to-import&#8221; directory.</p>
<h3>Data proliferation</h3>
<p>The script converts each CSV file into a Python dictionary that can later be converted into a Pandas dataframe. Once the data is ingested from the CSV files the script creates new columns. The new columns may be used for further column creation or for later error checking and human inspection. The script adds the columns to the original data and creates the &#8220;data_before.csv&#8221; file in the &#8220;export-data&#8221; directory. The <tt>add_calculated_data</tt> function creates most of the additional columns. It usually does so by calling one small function that creates the data for one column. The <tt>add_calculated_data</tt> function creates additional columns using data from both &#8220;current.csv&#8221; and &#8220;future.csv.&#8221; </p>
<p>The dataframe headers created from the &#8220;current.csv&#8221; file, along with short descriptions, are as follows:</p>
<ul>
<li><strong>measure</strong>: Imported from CSV file.</li>
<li><strong>sctn_increment</strong>: Imported from CSV file.</li>
<li><strong>call_num</strong>: Imported from CSV file.</li>
<li><strong>col_num</strong>: Imported from CSV file.</li>
<li><strong>shelf_num</strong>: Calculated field. This is a simple index beginning with 1, the first shelf, and ending with the x shelf.</li>
<li><strong>section_num</strong>: Calculated field. The first section is 1 and increments each time there is an &#8220;x&#8221; in the <tt>sctn_increment</tt> field.</li>
<li><strong>range_num</strong>: Calculated field. The first range is 1 and increments each time there is a character in the <tt>call_num</tt> field.</li>
<li><strong>runsum</strong>: Calculated field. This starts with the first value of &#8220;measure&#8221; and creates a running sum, sometimes known as a sequence of partial sums.</li>
<li><strong>col_num2</strong>: Calculated field. This is validated and normalized data from col_num.</li>
<li><strong>shelf_per_section</strong>: Calculated field. This displays the nth shelf per section. This is a convenience and error checking column.</li>
<li><strong>section_per_range</strong>: Calculated field. This displays the nth section per range. It is a convenience and error checking column.</li>
<li><strong>way</strong>: Calculated field. This displays the waypoint.</li>
<li><strong>units_into</strong>: Calculated field. This displays the number of inches or centimeters into shelf x where the last book from the current shelf should end up.</li>
<li><strong>pretty_waypoint</strong>: Calculated field. This is a convenience column constructed from &#8220;way&#8221; and &#8220;units_into,&#8221; for each row.</li>
</ul>
<p>The &#8220;future.csv&#8221; file gains a similar set of columns:</p>
<ul>
<li><strong>shelf_measure</strong></li>
<li><strong>sctn_increment</strong></li>
<li><strong>range_increment</strong></li>
<li><strong>shelf_num</strong></li>
<li><strong>section_num</strong></li>
<li><strong>range_num</strong></li>
<li><strong>shelf_per_section</strong></li>
<li><strong>section_per_range</strong></li>
<li><strong>book_measure</strong></li>
<li><strong>final_runsum</strong></li>
<li><strong>way</strong></li>
<li><strong>units_into</strong></li>
<li><strong>pretty_waypoint</strong></li>
</ul>
<h2>Analysis</h2>
<p>The following paragraphs explain the foundational ideas for getting useful output. Most of this work happens in the function named <tt>set_measurement_totals_after</tt>. A first step toward analysis of the data is to calculate the shelf space occupied by each collection before the shift. Python&#8217;s Pandas library easily calculates such things using the <tt>groupby</tt> method. The &#8220;<a href="https://github.com/distichum/bookshift/blob/main/export-data/set_data.csv">set_data.csv</a>&#8221; file shows this calculation in the column called &#8220;books_measure&#8221; and Figure 5 illustrates the final table.</p>
<div class = "caption">
<strong>Table 5.</strong> Final table calculations</p>
<table style="width:100%">
<tr>
<th>col_num</th>
<th>imposed_fill_ratio</th>
<th>books_measure</th>
<th>fill_ratio</th>
<th>space_needed</th>
</tr>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left"></td>
<td style="text-align:left">34514.0</td>
<td style="text-align:left">0.74476424049762</td>
<td style="text-align:left">46342.18202654199</td>
</tr>
<tr>
<td style="text-align:left">2</td>
<td style="text-align:left">0.65</td>
<td style="text-align:left">1723.0</td>
<td style="text-align:left">0.65</td>
<td style="text-align:left">2650.7692307692305
</td>
</tr>
<tr>
<td style="text-align:left">3</td>
<td style="text-align:left">0.7</td>
<td style="text-align:left">3437.0</td>
<td style="text-align:left">0.7</td>
<td style="text-align:left">4910.0</td>
</tr>
<tr>
<td style="text-align:left">4</td>
<td style="text-align:left"></td>
<td style="text-align:left">27076.0</td>
<td style="text-align:left">0.74476424049762</td>
<td style="text-align:left">36355.128949140955</td>
</tr>
<tr>
<td style="text-align:left">5</td>
<td style="text-align:left">0.5</td>
<td style="text-align:left">1287.0</td>
<td style="text-align:left">0.5</td>
<td style="text-align:left">2574.0</td>
</tr>
<tr>
<td style="text-align:left">6</td>
<td style="text-align:left">0.5</td>
<td style="text-align:left">901.0</td>
<td style="text-align:left">0.5</td>
<td style="text-align:left">1802.0</td>
</tr>
<tr>
<td style="text-align:left">7</td>
<td style="text-align:left">0.7</td>
<td style="text-align:left">347.0</td>
<td style="text-align:left">0.7</td>
<td style="text-align:left">495.7142857142857</td>
</tr>
<tr>
<td style="text-align:left">8</td>
<td style="text-align:left">0.4</td>
<td style="text-align:left">551</td>
<td style="text-align:left">0.4</td>
<td style="text-align:left">1377.5</td>
</tr>
<tr>
<td style="text-align:left">9</td>
<td style="text-align:left"></td>
<td style="text-align:left">12362.0</td>
<td style="text-align:left">0.74476424049762</td>
<td style="text-align:left">16598.541293739123</td>
</tr>
<tr>
<td style="text-align:left">10</td>
<td style="text-align:left">0.5</td>
<td style="text-align:left">894.0</td>
<td style="text-align:left">0.5</td>
<td style="text-align:left">1788.0</td>
</tr>
<tr>
<td style="text-align:left">11</td>
<td style="text-align:left">0.6</td>
<td style="text-align:left">1708.0</td>
<td style="text-align:left">0.6</td>
<td style="text-align:left">2846.666666666667</td>
</tr>
<tr>
<td style="text-align:left">12</td>
<td style="text-align:left"></td>
<td style="text-align:left">13033.0</td>
<td style="text-align:left">0.74476424049762</td>
<td style="text-align:left">17499.49754742776</td>
</tr>
</table>
</div>
<p>Once bookshift.py calculates the book measure for each collection, it needs to calculate the space needed for each collection. We can do so immediately for collections with imposed fill ratios, because the book measure and fill ratio are known. The &#8220;fill_ratio&#8221; column in Table 5 shows the final calculation. Note that the full table is given above but the script can calculate only rows with imposed fill ratios at the beginning. Figure 2 shows how to calculate space needed.</p>
<p class = "caption">
<img decoding="async" alt="space needed = book measure / fill ratio" src="../media/issue54/lambert/figure2.png"><br />
<strong>Figure 2.</strong> Space calculation formula.
</p>
<p>The <tt>set_measurement_totals_after</tt> function calculates the space needed for each imposed fill ratio. But, we do not yet know the fill ratio or space needed for collections that do not have imposed fill ratios. The script can calculate those using the subsequent steps.</p>
<p>First, the amount of space left for all collections with no imposed fill ratio can be calculated using a second formula (Figure 3). For the sample data this calculation is approximately <em>116795.35 = 135240 &#8211; 18444.65</em>.</p>
<p class = "caption">
<img decoding="async" alt="space remaining for non-imposed collections = total space - space needed for imposed" src="../media/issue54/lambert/figure3.png"><br />
<strong>Figure 3.</strong> Non-imposed collections space formula.
</p>
<p>Using this formula, the fill ratio for all non-imposed collections is discovered, and once the script has that, it uses the first formula above to calculate space needed for each non-imposed collection. Note that &#8220;space needed&#8221; at this point is synonymous with &#8220;space remaining&#8221; because we want to use the remaining shelf space for the rest of the collections. The script can now calculate the <tt>space_needed</tt> column for all collections. Library staff can double-check that by finding the summation of the space needed for each collection and comparing that to the total available space. They should be identical except for minor rounding errors.</p>
<p>To be useful, the script must provide actionable information that library staff can use to shift materials. One of the fields calculated above for the current books was the running sum value. The measure of books on each shelf allowed us to calculate that. We know the fill ratio and future shelving configuration, therefore we can now calculate the measure of books we want on each future shelf using a third formula (Figure 4).</p>
<p class = "caption">
<img decoding="async" alt="future measure of books on a shelf = shelf length * fill ratio" src="../media/issue54/lambert/figure4.png"><br />
<strong>Figure 4.</strong> Future shelf usage formula.
</p>
<p>In situations where books from two collections occupy the same shelf, the formula is more complicated, but the script takes that into account. Once we know the measure of books on each shelf, we can calculate a running sum for the future locations. The function <tt>runsum_after</tt> accomplishes this in the script. </p>
<p>Using running sum values for before and after shifting, we can now calculate waypoints. A book at a running sum measure of 119 before the shift will still be at a running sum of 119 after the shift, as illustrated in Table 6. The <tt>runsum_after</tt> column gives the last possible measure on a shelf where a book should be. After shifting, shelf one should hold books occupying measures 0 to 28. Shelf five should hold books at measures greater than 102, but not exceeding 130. Therefore, a book at measure 119 of <tt>runsum_before</tt> starts at shelf four and ends up on shelf five, as illustrated by the &#8220;x&#8221; in column <tt>book_after</tt> of Table 6.</p>
<div class = "caption">
<strong>Table 6.</strong> Before and after waypoints table (Note that this figure is made for illustration only and does not come from the data listed elsewhere) </p>
<table style="width:100%">
<tr>
<th>shelf_num</th>
<th>runsum_before</th>
<th>book_before</th>
<th>runsum_after</th>
<th>book_after</th>
</tr>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left">34</td>
<td style="text-align:left"></td>
<td style="text-align:left">28</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">2</td>
<td style="text-align:left">64</td>
<td style="text-align:left"></td>
<td style="text-align:left">56</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">3</td>
<td style="text-align:left">92</td>
<td style="text-align:left"></td>
<td style="text-align:left">84</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">4</td>
<td style="text-align:left">124</td>
<td style="text-align:left">x</td>
<td style="text-align:left">102</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">5</td>
<td style="text-align:left">149</td>
<td style="text-align:left"></td>
<td style="text-align:left">130</td>
<td style="text-align:left">x</td>
</tr>
</table>
</div>
<p>The function <tt>waypoint_calc</tt> calculates the waypoint for every shelf and creates a list. It also creates a list that tracks how many units into the shelf a waypoint is. This ultimately allows the script to create the last dataframe column, which takes the form of a sentence. That dataframe exports to the file, &#8220;data_before.csv&#8221;, and it will contain phrases such as &#8220;The last book from this shelf goes 24.0 in/cm into shelf 1.&#8221; Following are two columns taken out of &#8220;data_before.csv&#8221; to illustrate the result. It is telling the book shifter that the last book from shelf 1 before the shift should be placed 24 inches into shelf 1 of its future location.</p>
<div class = "caption">
<strong>Table 7.</strong> Final waypoints table</p>
<table style="width:100%">
<tr>
<th>shelf_num</th>
<th>goal</th>
</tr>
<tr>
<td>1</td>
<td>The last book from this shelf goes 24.0 in/cm into shelf 1</td>
</tr>
<tr>
<td>1</td>
<td>The last book from this shelf goes 18.9 in/cm into shelf 2</td>
</tr>
<tr>
<td>1</td>
<td>The last book from this shelf goes 17.9 in/cm into shelf 3</td>
</tr>
<tr>
<td>1</td>
<td>The last book from this shelf goes 18.8 in/cm into shelf 4</td>
</tr>
</table>
</div>
<p>There is also a file called &#8220;data_after.csv&#8221; that provides a look from the future shelving location back to the original. It will contain a phrase such as &#8220;The last book on this shelf comes from 7.1 in/cm into shelf 3.&#8221; The shift coordinator should only use one table as waypoints but they can choose which one best meets their needs. These phrases are the actionable output, created by the bookshift.py, that allows predictable shifting.</p>
<h2>Discussion</h2>
<p>Missouri State University shifted Library of Congress classified books on the Q-Z shelves, with data mentioned above. We moved the first books to two ranges of empty shelves, then we took apart and moved the newly vacated shelves, moved them to the new location, loaded them with different books, and repeated the process. We also needed to shift books from the R shelves before we shifted all of the books on the Q shelves. During that time, we had people shifting books in two or three places simultaneously and the process worked well. Subsequent smaller shifts outside of the Q &#8211; Z range allowed the author to refine the process presented here.</p>
<p>Using this method of measuring, calculating, and shifting provides great advantages. First, it provides a very high degree of predictability which aids staff planning. Second, the method provides flexibility by accounting for varying shelf counts, varying shelf lengths, and the separation of different fill ratios for different collections. Third, assuming there are not external factors that would negatively affect almost any shift, library staff can work in parallel without worrying that they will run into major surprises which would require re-shifting everything. If there are 10 student workers independently shifting at the same time, they can shift in different places and there is no worry of interfering with the others. This could also provide extra direction if the library hires a moving company whose personnel are not used to working in libraries. In addition, library staff can start shifting in the middle of the collection and work backward, or forward, as needed. The waypoints will keep book shifters on track, and they will give planners confidence things are moving as planned.</p>
<p>This shifting process should involve someone proficient and experienced in shelving and shifting. Shifting a collection in a library requires being exact but being tolerant of the unexpected. Do not expect all measurements to be correct, and do not expect that every place staff shift to will have exactly the number of books needed. A three inch wide book may occupy the last 1 inch of a shelf and then add two extra inches that shouldn&#8217;t be there. That is OK, just move forward with the typical shelf length and there will be extra space somewhere else before the next waypoint.</p>
<p>Although the script provides waypoints for every shelf, the author highly suggests having shelver visible waypoints only once per range. The people doing the shelving, and their supervisors, must have the freedom to make small adjustments within those ranges to make things work. For instance, if there is a large encyclopedia set that is no longer published, the shifter may not need space between volumes. If the shifter puts three shelves worth of encyclopedias together, with a fill ratio of 100%, there will be extra space at the end of the range that will make the waypoint or shelving job seem wrong. The extra space here and there is tolerable, and it should not affect placement of books on any other range. The extra space will be available in the future when it is needed. The beauty of the method presented in this article is that mistakes or oddities are easily fixed within a range by shifting books a few shelves left or right. People who regularly shelve are often trained to make such shifts without consulting with a supervisor, so it takes less labor, specifically less supervisor labor, to address.</p>
<p>The script described here does not account for cases in which library staff must combine book collections while simultaneously shifting. While out of scope for this article, there are some ways to accomplish that, but with fewer waypoints.</p>
<p>There are some unusual situations where shifting books is probably never a good idea and the method presented here does not account for such situations. The script presented here will not work well if 50% of the collection is checked out when you measure and only 5% is checked out when you shift or vice versa. Also, if a whole section of books is checked out and not initially measured, but returned before the shift, then there will be too many books in that area. It is the author&#8217;s experience that such checkout patterns are unusual and when they do occur, they are well known by the shelvers or other circulation staff. A shift coordinator can use imposed fill ratios to address such issues. That means, someone will have to make an educated guess, or use other evidence based processes outside the scope of this article, to determine the imposed fill ratio. If measurements are off by too much in one place, the described process will not work. An experienced shift coordinator should be able to recognize such problems and not start the shift process at all, revise the process, or review and correct incorrect data. It is always best to measure and shift in as short a time frame as possible and when the maximum number of books are on the shelf. That said, Missouri State University circulation does not vary enough at any point in the year for it to matter for it to negatively affect the shift process.</p>
<p>After considering the discussion above, there are a number of research directions people could follow. This method of shifting requires strict adherence to processes when creating CSV files. Can some of that strict process be relaxed to make data collection and processing easier? Also, the fact that this shift method requires basic Python knowledge, at least enough to execute a program, will mean that many library staff will not use it. It is likely that more people would adopt this method if they could do so using only spreadsheets.</p>
<h2>References</h2>
<p>Dewey M. 1887. Library notes: improved methods and labor-savers for librarians, readers and writers. Library Notes [Internet]. [cited 2022 June 9]; 2(6):95-97. Available from: <a href="http://hdl.handle.net/2027/hvd.hxh1dc">http://hdl.handle.net/2027/hvd.hxh1dc</a></p>
<p>Fortriede SC. 2009. Moving Your Library. ALA Publishing. [accessed 2022 Jun 9]. <a href="https://www.ala.org/aboutala/offices/publishing/editions/webextras/fortriede09942/fortriede09942">https://www.ala.org/aboutala/offices/publishing/editions/webextras/fortriede09942/fortriede09942</a></p>
<p>Fortriede SC. 2010. Moving Your Library: Getting the Collection from Here to There. Chicago: American Library Association.</p>
<p>Kurkul DL. 1983. The Planning, Implementation, and Movement of an Academic Library Collection. College and Research Libraries. 44(4):220–234.</p>
<p>Lambert J. Confident Shifting for Complex Moves. Brick and Click: an academic library conference; 2016 Nov 4 [accessed 2022 June 9]. <a href="https://static.sched.com/hosted_files/brickclickanacademiclibrary2016/3d/Joshua%20Lambert%20Confident%20Shifting.pptx">https://static.sched.com/hosted_files/brickclickanacademiclibrary2016/3d/Joshua%20Lambert%20Confident%20Shifting.pptx</a></p>
<p>Lambert J. bookshift.py &#8211; Predictable Library Book Shifting. [accessed 2022 Jun 9]. <a href="https://github.com/distichum/bookshift">https://github.com/distichum/bookshift</a></p>
<p>Morse PM, Leimkuhler, FF, Buckland, MK et al. 1972. Proceedings of the thirty-fifth annual conference of the graduate library school. The Library Quarterly. 42(1).</p>
<p>Reisman A, Xu X. 1994. Operations research in libraries: A review of 25 years of activity. Operations Research. 42(1):34–40.</p>
<p>Warwick J. 2012. Library Operational Research: Time for a New Paradigm? In: Higher Education Management and Operational Research. Brill Sense. p. 269–291.</p>
<h2 class="abouttheauthor">About the author</h2>
<p>Joshua Lambert is a Librarian and Associate Professor at Missouri State University. He manages government documents, provides reference assistance, teaches courses for credit, provides library instruction, and gathers and analyzes data for the library and other researchers.</p>
					</div>
														</div>
				<!-- You can start editing here. -->

<div class="comments">
	<p class="subscriptionlinks">Subscribe to comments: <a href="16577/feed">For this article</a> | <a href="http://feeds.feedburner.com/c4lj/comments">For all articles</a></p>

			<!-- If comments are open, but there are no comments. -->

	 

<h3 id="respond">Leave a Reply</h3>


<form action="https://journal.code4lib.org/wp-comments-post.php" method="post" id="commentform">


<p><input type="text" name="author" id="author" value=""/>
<label for="author">Name (required)</label></p>

<p><input type="text" name="email" id="email" value="" />
<label for="email">Mail (will not be published) (required)</label></p>

<p><input type="text" name="url" id="url" value="" />
<label for="url">Website</label></p>


<p><textarea autocomplete="new-password"  aria-label="Comment box" id="f127f6ccbe"  name="f127f6ccbe"   cols="50" rows="10"></textarea><textarea id="comment" aria-label="hp-comment" aria-hidden="true" name="comment" autocomplete="new-password" style="padding:0 !important;clip:rect(1px, 1px, 1px, 1px) !important;position:absolute !important;white-space:nowrap !important;height:1px !important;width:1px !important;overflow:hidden !important;" tabindex="-1"></textarea><script data-noptimize>document.getElementById("comment").setAttribute( "id", "a01977e27c430e2cafc7417de2d6f269" );document.getElementById("f127f6ccbe").setAttribute( "id", "comment" );</script></p>

<p><input name="submit" type="submit" id="submit"  value="Submit Comment" />
<input type="hidden" name="comment_post_ID" value="16577" />
</p>
<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="2f072f4b05" /></p><p style="display: none !important;" class="akismet-fields-container" data-prefix="ak_"><label>&#916;<textarea name="ak_hp_textarea" cols="45" rows="8" maxlength="100"></textarea></label><input type="hidden" id="ak_js_1" name="ak_js" value="98"/><script>document.getElementById( "ak_js_1" ).setAttribute( "value", ( new Date() ).getTime() );</script></p>
</form>


</div>
							</div>

			<div id="meta">
				<div id="issn">
					<p>ISSN 1940-5758</p>
				</div>
				<div class="search-sidebar">
				<form method="get" id="searchform" action="../index.html">
					<div>
						<input type="text" value="" aria-labelledby="searchsubmit" name="s" id="s" />
						<input type="submit" value="Search" id="searchsubmit"/>
					</div>
				</form>
				</div>
				<div id="archives">
					<h2>Current Issue</h2>
						<ul>
							<li><a href="../issues/issues/issue60.html">Issue 60, 2025-04-14</a></li>
						</ul>

					<h2>Previous Issues</h2>
						<ul>
              <li><a href="../issues/issues/issue59.html">Issue 59, 2024-10-07</a></li><li><a href="../issues/issues/issue58.html">Issue 58, 2023-12-04</a></li><li><a href="../issues/issues/issue57.html">Issue 57, 2023-08-29</a></li><li><a href="../issues/issues/issue56.html">Issue 56, 2023-04-21</a></li>              <li><a href="../index.html%3Fp=2476.html">Older Issues</a></li>
						</ul>
				</div>
				<div id="forauthors">
					<h2>For Authors</h2>
					<ul>
						<li class="page_item page-item-4"><a href="../index.html%3Fp=4.html">Call for Submissions</a></li>
<li class="page_item page-item-7"><a href="../index.html%3Fp=7.html">Article Guidelines</a></li>
					</ul>
				</div>
			</div>
						<div id="footer">
				<p id="login"><a href="../wp-login.php.html">Log in</a></p>
				<p id="copyright">This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/us/">Creative Commons Attribution 3.0 United States License</a>.<br /><a rel="license" href="http://creativecommons.org/licenses/by/3.0/us/"><img alt="Creative Commons License" src="http://i.creativecommons.org/l/by/3.0/us/80x15.png" /></a></p>
			</div>
			<script type="speculationrules">
{"prefetch":[{"source":"document","where":{"and":[{"href_matches":"\/*"},{"not":{"href_matches":["\/wp-*.php","\/wp-admin\/*","\/wp-content\/uploads\/*","\/wp-content\/*","\/wp-content\/plugins\/*","\/wp-content\/themes\/c4lj-theme\/*","\/*\\?(.+)"]}},{"not":{"selector_matches":"a[rel~=\"nofollow\"]"}},{"not":{"selector_matches":".no-prefetch, .no-prefetch a"}}]},"eagerness":"conservative"}]}
</script>
<script defer type="text/javascript" src="../wp-content/plugins/akismet/_inc/akismet-frontend.js%3Fver=1748382734" id="akismet-frontend-js"></script>
		</div>
	</body>
</html>
