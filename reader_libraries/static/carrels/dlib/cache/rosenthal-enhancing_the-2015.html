<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="DOI" content="10.1045/september2015-rosenthal" />
<meta name="description" content="D-Lib Magazine" /> 
<meta name="keywords" content="D-Lib Magazine, Digital Libraries, Digital Library Research" />
<link rel="metadata" href="09rosenthal.meta.xml" />
<link rel="metadata" href="../09bib.meta.bib" />
<link rel="metadata" href="../09ris.meta.ris" />
<link href="../../../style/style1.css" rel="stylesheet" type="text/css" />
<title>Enhancing the LOCKSS Digital Preservation Technology</title>
</head>

<body>
<form action="https://www.dlib.org/cgi-bin/search.cgi" method="get">

<table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#2b538e">
<tr>
<td><img src="../../../img2/space.gif" alt="" width="10" height="2" /></td></tr>
</table>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="bottom" colspan="4" align="right" bgcolor="#4078b1">

<table border="0">
<tr>
<td align="right" class="search"><img src="../../../img2/search2.gif" alt="" width="51" height="20" align="middle" />Search D-Lib:</td>

<td>
<input type="text" name="words" value="" size="25" />
</td>

<td align="left" valign="middle">
<input type="submit" name="search" value="Go!" />
<input type="hidden" name="config" value="htdig" />
<input type="hidden" name="restrict" value="" />
<input type="hidden" name="exclude" value="" /> 
</td>
</tr>
</table>

</td></tr></table>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="bottom" colspan="4">

<table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#e04c1e" id="outer" summary="Main Table">
<tr>
<td><img src="../../../img2/space.gif" alt="" width="10" height="1" /></td></tr>
</table>

<table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#F6F6F6" id="bannertable">
  <tr>
    <td width="830" bgcolor="#4078b1" class="backBannerImage" align="left"><img src="../../../img2/D-Lib-blocks.gif" alt="D-Lib Magazine" width="450" height="100" border="0" /></td>
  </tr>
  <tr>
    <td width="830" bgcolor="#e04c1e"><img src="../../../img2/transparent.gif" alt="spacer" height="1" /></td>
  </tr>
  <tr>
    <td width="830" bgcolor="#eda443" align="left"><img src="../../../img2/magazine.gif" alt="The Magazine of Digital Library Research" width="830" height="24" border="0" /></td>
  </tr>
  <tr>
    <td width="830" bgcolor="#e04c1e"><img src="../../../img2/transparent.gif" alt="spacer" height="1" /></td>
   </tr>
</table>

<table width="100%" border="0" cellpadding="0" cellspacing="0" id="navtable">
  <tr>
    <td width="5" height="20" bgcolor="#2b538e">&nbsp;</td>
    <td width="24" height="20" bgcolor="#2b538e"><img src="../../../img2/transparent.gif" alt="" width="24" height="20" /></td>
    <td height="20" align="left" bgcolor="#2b538e" class="navtext" nowrap="nowrap"><a href="../../../dlib.html">HOME</a>&nbsp;|&nbsp;<a href="../../../about.html">ABOUT D-LIB</a>&nbsp;|&nbsp;<a href="../../../contents.html" class="navtext">CURRENT ISSUE</a>&nbsp;|&nbsp;<a href="../../../back.html">ARCHIVE</a>&nbsp;|&nbsp;<a href="../../../author-index.html">INDEXES</a>&nbsp;|&nbsp;<a href="../../../groups.html">CALENDAR</a>&nbsp;|&nbsp;<a href="../../author-guidelines.html">AUTHOR GUIDELINES</a>&nbsp;|&nbsp;<a href="https://www.dlib.org/mailman/listinfo/dlib-subscribers">SUBSCRIBE</a>&nbsp;|&nbsp;<a href="../../letters.html">CONTACT D-LIB</a></td>
    <td width="5" height="20" bgcolor="#2b538e">&nbsp;</td>
  </tr>
</table>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td width="55" height="1" bgcolor="#e04c1e"><img src="../../../img2/space.gif" alt="transparent image" width="1" height="1" /></td></tr>
</table>

<!-- CONTENT TABLE -->
<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
  <td>
 
<!-- BEGIN MAIN CONTENT TABLE -->

<table width="100%" border="0" cellspacing="0" cellpadding="10" bgcolor="#ffffff">
<tr>

<td width="10"><img src="../../../img2/space.gif" alt="" width="1" height="1" /></td>

<td valign="top"> 

<h3 class="blue-space">D-Lib Magazine</h3>
<p class="blue">September/October 2015<br />
Volume 21, Number 9/10<br />
<a href="../09contents.html">Table of Contents</a>
</p> 

<div class="divider-full">&nbsp;</div>

<h3 class="blue-space">Enhancing the LOCKSS Digital Preservation Technology</h3>

<p class="blue">
David S. H. Rosenthal, Daniel L. Vargas, Tom A. Lipkis and Claire T. Griffin<br /> 
LOCKSS Program, Stanford University Libraries<br /><br />
Point of Contact: David S. H. Rosenthal, dshr&#064;stanford.edu

<br /><br />DOI: 10.1045/september2015-rosenthal</p>

<div class="divider-full">&nbsp;</div>

<p class="blue"><a href="09rosenthal.print.html" class="fc">Printer-friendly Version</a></p>

<div class="divider-full">&nbsp;</div>

 <!-- Abstract or TOC goes here --> 

<h3 class="blue">Abstract</h3>

<p class="blue">The LOCKSS Program develops and supports libraries using open source peer-to-peer digital preservation software. Although initial development and deployment was funded by grants including from NSF and the Mellon Foundation, grant funding is not a sustainable basis for long-term preservation. The LOCKSS Program runs the "Red Hat" model of free, open source software and paid support. From 2007 through 2012 the program was in the black with no grant funds at all. The demands of the "Red Hat" model make it hard to devote development resources to enhancements that don't address immediate user demands but are targeted at longer-term issues. After discussing this issue with the Mellon Foundation, the LOCKSS Program was awarded a grant to cover a specific set of infrastructure enhancements. It made significant functional and performance improvements to the LOCKSS software in the areas of ingest, preservation and dissemination. The LOCKSS Program's experience shows that the "Red Hat" model is a viable basis for long-term digital preservation, but that it may need to be supplemented by occasional small grants targeted at longer-term issues.</p>

<!-- Article goes next --> 

<div class="divider-full">&nbsp;</div>
<h3>1 Introduction</h3>

<p>In 2010 a Blue Ribbon Task Force on Sustainable Preservation and Access [<a href="09rosenthal.html#3">3</a>] confirmed that the major obstacle preventing digital content surviving to be used by future scholars was economic. No-one had a sustainable business model providing adequate funding for the organizational and technical processes needed to assure preservation.</p>

<p>The LOCKSS<span style="vertical-align: super;"><a href="09rosenthal.html#n1">1</a></span> Program started in 1998 with a small grant from the NSF [<a href="09rosenthal.html#28">28</a>]. The technology was developed into a production system with support from NSF, the Andrew W. Mellon Foundation and Sun Microsystems. Grants such as these are not a sustainable basis for long-term preservation. The LOCKSS Program planned to use the "Red Hat" business model of free, open-source software and paid support<span style="vertical-align: super;"><a href="09rosenthal.html#n2">2</a></span>. Libraries using the technology would subscribe to the LOCKSS Alliance and would receive support. In 2005 the Mellon Foundation gave the program a 3-year grant which had to be matched from LOCKSS Alliance income. After the grant period the program had to survive without grant funding.</p>

<p>The program met the grant conditions with a year to spare, and has operated in the black ever since. No grants were received from 2007 to 2012. Now, nearly 20 networks use the LOCKSS technology to preserve content including books, journals, government documents and collections stored in institutional repositories. Experience with operating the "Red Hat" model has been generally positive. It requires a development process yielding frequent small enhancements to the system that meet the evolving needs of the user community, and a consistent focus on reducing the costs the system imposes on both the users and the support organization.</p>

<p>The need for frequent small releases and reducing costs makes it difficult for the support organization to commit resources to infrastructure developments that, while not responding to immediate user needs, are necessary to handle foreseeable issues in the medium term. After earlier work involving the instrumentation of several LOCKSS networks to investigate their detailed behavior, the LOCKSS team had identified a number of such developments. In 2012, after discussions with the Mellon Foundation about them, the LOCKSS Program was awarded a grant that, over its three years, allowed for about a 10% increase in program expenditure. Below, we report on the results of this funding.</p>

<div class="divider-full">&nbsp;</div>
<h3>2 The LOCKSS Technology</h3>

<p>The LOCKSS system ingests, preserves and disseminates content using networks of <i>peers</i>, sometimes called LOCKSS boxes [<a href="09rosenthal.html#21">21</a>]. Each peer is an independent computer running software called the LOCKSS daemon, implemented in Java, which performs all three functions. Each peer's LOCKSS daemon collects content independently by acting as a Web crawler, and disseminates it by acting as either a Web server or a Web proxy. The daemon is configured to collect content from a particular Web site via a <i>plugin</i>, a set of Java classes mostly defined in XML that understands how to crawl that site, and how to divide the site's content into <i>Archival Units</i> (AUs). An AU is typically a volume of a journal.</p>

<p>All LOCKSS networks run the same daemon software in different configurations. The enhancements were released to all networks, but initially only two production preservation networks enabled them in their configurations:</p>

<ul>
	<li style="padding-bottom: .5em;">The Global LOCKSS Network (GLN), a network of nearly 150 peers each under independent administration and each intended to hold only materials to which the host library subscribes.</li>

	<li>The CLOCKSS network, a Private LOCKSS Network (PLN) of 12 peers under central administration and each intended to hold exactly the same content.</li>
</ul>

<div class="divider-dot">&nbsp;</div>
<h4>2.1 Preservation</h4>

<p>The preservation of content in LOCKSS networks depends on peers detecting damage to their content, and repairing it. The LOCKSS daemon's peer-to-peer polling mechanism detects damage by discovering disagreement between the content of the instances of the same AUs at different peers, and enables its repair by discovering agreement. A peer that detects damage to its AU requests a repair from another peer that has agreed with it about the same AU in the past. The LOCKSS system is intended to preserve copyright content. The peer from which a repair is requested knows it is not leaking content if it remembers the requestor agreeing in the past about the requested content. If it does, it knows it is replacing a pre-existing copy, not creating a new one.</p>

<p>Thus LOCKSS boxes at libraries form a peer-to-peer network which performs five functions:</p>

<ul>
	<li style="padding-bottom: .5em;"><b>Location</b>: enabling a LOCKSS box in the network to find at least some of the other LOCKSS boxes in the network that are preserving the same AU.</li>

	<li style="padding-bottom: .5em;"><b>Verification</b>: enabling a LOCKSS box to confirm that the content it has collected for an AU is the same (matching URLs, with matching content) as other LOCKSS boxes preserving the same AU have collected, thus identifying and correcting errors in the collection process.</li>

	<li style="padding-bottom: .5em;"><b>Authorization</b>: enabling a LOCKSS box that is preserving an AU to provide content from that AU to another LOCKSS box preserving the same AU in order to repair damage, because the other LOCKSS box has proved to this LOCKSS box that in the past it collected matching content from the publisher. This box is a <i>willing repairer</i> for the other box.</li>

	<li style="padding-bottom: .5em;"><b>Detection</b>: of random loss or damage to content in an AU at a LOCKSS box in order that it might request repairs to the content from other LOCKSS boxes preserving the same AU.</li>

	<li><b>Prevention</b>: of attempts at deliberate modification of content in an AU at multiple LOCKSS boxes in the network, by detecting that non-random change had occurred at multiple LOCKSS boxes.</li>
</ul>

<p>LOCKSS boxes perform these functions by participating in <i>polls</i> [<a href="09rosenthal.html#20">20</a>]. When it has resources available, each box uses a randomized process to choose one of the AUs it holds. It calls a poll on it, becoming the <i>poller</i>, and inviting a number of other boxes to become <i>voters</i> in the poll. The poller generates a random nonce <i>N<sub>p</sub></i> and sends it to the voters. Each voter generates a random nonce <i>N<sub>v</sub></i> and sends the poller a vote containing <i>(N<sub>p</sub>,N<sub>v</sub>,H(N<sub>p</sub>,N<sub>v</sub>, content(AU))</i> where <i>H()</i> is a hash function and <i>content(AU)</i> is the content of each URL in the AU instance at that voter.</p>

<p>The poller receives each of the votes and verifies them by computing <i>H(N<sub>p</sub>,N<sub>v</sub>, content(AU))</i> for each vote using the content of each URL in the poller's instance of the AU. Matching hashes indicate agreement between the corresponding URLs in the AU instance at the poller and that voter, mismatches indicate disagreement. If a majority of the voters disagree with the poller, the poller determines that its content is damaged and requests a repair from one of its "willing repairers".</p>

<div class="divider-full">&nbsp;</div>
<h3>3 Technology Enhancements</h3>

<p>The grant envisaged enhancements to the LOCKSS technology in three areas, ingest, dissemination and preservation.</p>

<div class="divider-dot">&nbsp;</div>
<h4>3.1 Ingest</h4>

<p>Content on the early Web was static. Each time a browser fetched the content at a URL it got the same content. A Web crawler such as Heritrix [<a href="09rosenthal.html#24">24</a>] could collect an individual Web site, or even the entire Web, by following the links in the content, and fetching each of them in turn.</p>

<p>As the Web evolves, it is less and less true that each time a browser fetches content at a URL it gets the same content.</p>

<p><b>3.1.1 Form-Filling</b></p>

<p>One early cause of this was pages containing forms requiring text input or menu selection to access the content. Examples include login pages, search boxes, pulldown menus, and radio buttons. The LOCKSS crawler had from the start special-purpose code to allow it to access content protected by login pages, but this code could not handle general form filling. Among the sites whose use of forms makes them difficult to collect are many federal and state Web sites vital to government documents librarians.</p>

<p>Before the grant, the LOCKSS team and Masters students at Carnegie-Mellon University's Silicon Valley campus prototyped powerful form-filling capabilities for the LOCKSS crawler. During the grant this prototype was re-written to use the JSoup HTML parser. It starts by identifying the forms in collected HTML. It then generates all possible user actions for them thus:</p>

<ul>
	<li style="padding-bottom: .5em;">All form tags and form elements from the <span class="code">JsoupHtmlLinkExtractor</span> are converted into sets of URL components, which are then assembled to produce the possible URLs.</li>

	<li style="padding-bottom: .5em;">To allow form tags, which if they have a form ID may be outside the form itself, to be correctly assigned, the document is searched for all forms with IDs. As form element tags with IDs are encountered they are attached to the form with the matching ID.</li>
 
	<li style="padding-bottom: .5em;">Form <span class="code">submit</span> or <span class="code">image</span> elements are counted to make sure that at least one such element exists and any <span class="code">formaction</span> attribute which may override the form's action is tracked.</li>

	<li style="padding-bottom: .5em;">Forms without IDs are processed as soon as the close tag is encountered. Forms with IDs can only be processed after all other tags have been extracted.</li>

	<li style="padding-bottom: .5em;">When a form is processed each form field is examined to determine the iterator that will generate the set of possible values for that element type from a set of strings supplied by the plugin, and any attributes specified by the field.</li>

	<li>A form emits URLs consisting of the form action followed by a question mark, then pairs of <span class="code">(name)=(value)</span> separated by ampersands.</li>
</ul>

<p>The generated action URLs are filtered by the plugin's crawl rules before being executed.</p>

<p>The mapping between form tags and iterators is shown in Table 1. The available iterators are:</p>

<ul>
	<li style="padding-bottom: .5em;"><span class="code">SingleSelectFieldIterator</span> used to generate a <span class="code">[name, value]</span> pair for each possible value.</li>

	<li style="padding-bottom: .5em;"><span class="code">MultiSelectFieldIterator</span> used to generate <span class="code">[name, value]</span> pairs for a power set of all values.</li>

	<li>Plugin defined iterators are assigned to a field name, allowing the plugin to specify in detail how values for a text or number field should be generated. Examples include:

<ul>
	<li style="padding-top: .5em; padding-bottom: .5em;"><span class="code">IntegerFieldIterator</span> generates all values within a plugin defined range of integer values with a fixed stepping interval.</li>

	<li style="padding-bottom: .5em;"><span class="code">FloatFieldIterator</span> generates all values within a plugin defined range of float values with a fixed stepping interval.</li>

	<li style="padding-bottom: .5em;"><span class="code">CalendarFieldGenerator</span> generates all values within a plugin defined range of dates with a fixed stepping interval.</li>

	<li style="padding-bottom: .5em;"><span class="code">FixedListFieldGenerator</span> generates all values from a plugin defined list of values.</li>

	<li style="padding-bottom: .5em;"><span class="code">FormFieldRestrictions</span> restricts the values of a field to a known set of permissible values either by explicitly excluding and/or including a list of values. Before a field is processed each value is checked against these restrictions before being added to the form collector for that field.</li>
</ul>
</li>
</ul>

<table align="center" border="0" cellpadding="16" cellspacing="0">
<tr>
<td class="topLeft" align="left"><b>Tag</b></td>
<td class="topLeft" align="left"><b>Required</b></td>
<td class="topLeft" align="left"><b>Multi-select</b></td>
<td class="topLeftRight" align="left"><b>Default Iterator</b></td>
</tr>

<tr>
<td class="topLeft" align="left">input:hidden</td>
<td class="topLeft" align="left">Yes</td>
<td class="topLeft" align="left">No</td>
<td class="topLeftRight" align="left">SingleSelectFieldIterator</td>
</tr>

<tr>
<td class="topLeft" align="left">input:checkbox</td>
<td class="topLeft" align="left">Opt</td>
<td class="topLeft" align="left">Yes</td>
<td class="topLeftRight" align="left">MultiSelectFieldIterator</td>
</tr>

<tr>
<td class="topLeft" align="left">input:radio</td>
<td class="topLeft" align="left">Yes</td>
<td class="topLeft" align="left">No</td>
<td class="topLeftRight" align="left">SingleSelectFieldIterator</td>
</tr>

<tr>
<td class="topLeft" align="left">input:submit</td>
<td class="topLeft" align="left">Yes</td>
<td class="topLeft" align="left">No</td>
<td class="topLeftRight" align="left">Submit</td>
</tr>

<tr>
<td class="topLeft" align="left">input:image</td>
<td class="topLeft" align="left">Yes</td>
<td class="topLeft" align="left">No</td>
<td class="topLeftRight" align="left">Submit</td>
</tr>

<tr>
<td class="topLeft" align="left">button:submit</td>
<td class="topLeft" align="left">Yes</td>
<td class="topLeft" align="left">No</td>
<td class="topLeftRight" align="left">Submit</td>
</tr>

<tr>
<td class="topLeft" align="left">select:option</td>
<td class="topLeft" align="left">No</td>
<td class="topLeft" align="left">Opt</td>
<td class="topLeftRight" align="left">Opt defined</td>
</tr>

<tr>
<td class="topLeftBottom" align="left">others</td>
<td class="topLeftBottom" align="left">Opt</td>
<td class="topLeftBottom" align="left">N/A</td>
<td class="all" align="left">Plugin defined</td>
</tr>

</table>

<div align="center"><p><b>Table 1: Form Tags &amp; Iterators</b></p></div>

<p>The effect of adding form-filling capability to the plugins for three journals typical of those using forms is shown in Table 2. The Total URLs column shows the number of URLs collected with form-filling, the Generated URLs column shows how many of them were the result of form-filling, and the Increase column shows the percentage increase in URL collection as a result of enabling form-filling. In these cases the investment of a combinatorial increase in crawling cost returns a significant increase in the amount of content harvested.</p>

<table align="center" border="0" cellpadding="16" cellspacing="0">
<tr>
<td class="topLeft" align="left"><b>Journal</b></td>
<td class="topLeft" align="left"><b>Form Collected</b></td>
<td class="topLeft" align="left"><b>Radio buttons</b></td>
<td class="topLeft" align="left"><b>Check boxes</b></td>
<td class="topLeft" align="left"><b>Total URLs</b></td>
<td class="topLeft" align="left"><b>Forms</b></td>
<td class="topLeft" align="left"><b>Generated URLs</b></td>
<td class="topLeftRight" align="left"><b>Increase</b></td>
</tr>

<tr>
<td class="topLeft" align="left">Intl. J. Geomechanics</td>
<td class="topLeft" align="left">Citations</td>
<td class="topLeft" align="right">6</td>
<td class="topLeft" align="right">1</td>
<td class="topLeft" align="right">1096</td>
<td class="topLeft" align="right">37</td>
<td class="topLeft" align="right">444</td>
<td class="topLeftRight" align="right">67%</td>
</tr>

<tr>
<td class="topLeft" align="left">J. Architectural Engineering</td>
<td class="topLeft" align="left">Citations</td>
<td class="topLeft" align="right">6</td>
<td class="topLeft" align="right">1</td>
<td class="topLeft" align="right">820</td>
<td class="topLeft" align="right">32</td>
<td class="topLeft" align="right">384</td>
<td class="topLeftRight" align="right">88%</td>
</tr>

<tr>
<td class="topLeftBottom" align="left">Genome</td>
<td class="topLeftBottom" align="left">Citations</td>
<td class="topLeftBottom" align="right">3</td>
<td class="topLeftBottom" align="right">0</td>
<td class="topLeftBottom" align="right">820</td>
<td class="topLeftBottom" align="right">121</td>
<td class="topLeftBottom" align="right">242</td>
<td class="all" align="right">44%</td>
</tr>
</table>

<div align="center"><p><b>Table 2: Single-volume increase in collection via form-filling.</b></p></div>

<p><b>3.1.2 AJAX</b></p>

<p>Currently, the major reason that the user's experience is different on every visit to many Web sites is that it is generated dynamically using AJAX (Asynchronous Javascript And XML) [<a href="09rosenthal.html#34">34</a>]. Instead of the browser downloading content from the Web server, parsing and rendering it, the browser downloads a program in Javascript, and runs it. This program interacts with potentially multiple Web servers to provide the dynamically changing user experience. The new HTML5 standard [<a href="09rosenthal.html#33">33</a>] builds on AJAX; in effect it changes the basic language of the Web from HTML, which is a document description language, to Javascript, which is a programming language.</p>

<p>This poses a major problem for Web preservation. Previously, a Web crawler could find the links to follow simply by <i>parsing</i> the content it obtained. With AJAX, and HTML5, the crawler has to <i>execute</i> the program it downloaded, watching to see what other content the program fetches. Executing content downloaded from the Web poses security and resource exhaustion risks for the Web crawler, just as it does for the browser. This is why cautious Web surfers protect themselves using browser plugins such as NoScript [<a href="09rosenthal.html#10">10</a>] to constrain the Javascript their browser will execute.</p>

<p>Before the grant, the joint CMU/LOCKSS team did proof-of-concept work using the Selenium browser automation system [<a href="09rosenthal.html#14">14</a>] to show how the LOCKSS crawler could be extended to collect AJAX content safely. The grant-funded work was based on lessons learned in this process, and on two subsequently available open-source software components:</p>

<ul>
	<li style="padding-bottom: .5em;">The Crawljax crawler [<a href="09rosenthal.html#23">23</a>] supplements the existing crawl mechanisms. It executes the dynamic elements on a page and captures the Document Object Model (DOM) [<a href="09rosenthal.html#32">32</a>] as it transitions between states. This allows for urls which are dynamically generated to be captured for more complete preservation of a site.</li>

	<li>The standard WARC file proxies capture all HTTP requests and responses as they occur and package them as WARC files (ISO 28500) [<a href="09rosenthal.html#19">19</a>]. These files are then processed by the LOCKSS daemon's WARC importer to store the captured information into the appropriate AU. It can then be parsed using the existing parser and crawl rules.</li>
</ul>

<div align="center">
<img src="rosenthal-fig1.png" alt="rosenthal-fig1" width="618" height="443" class="border" vspace="10" />
<p><i>Figure 1: AJAX Crawler Structure</i></p>
</div>

<p>Crawljax is configured via a plugin that determines which elements on the targeted Web page are to be executed, and which proxy will be used to capture the HTTP(S) traffic generated by doing so. The proxies that can be used are:</p>

<ul>
	<li style="padding-bottom: .5em;">LAP, the Live Archiving Proxy [<a href="09rosenthal.html#16">16</a>] developed by the French Institut National de l'Audiovisuel (INA) [<a href="09rosenthal.html#17">17</a>], who were supported to open-source it by the International Internet Preservation Consortium (IIPC) [<a href="09rosenthal.html#15">15</a>].</li>

	<li style="padding-bottom: .5em;">WarcMITMProxy [<a href="09rosenthal.html#8">8</a>], an open-source HTTP(S) proxy implemented in Python that outputs WARC files.</li>
	
	<li>And for testing and development, a Crawljax proxy plugin that outputs traffic in a simple JSON format.</li>
</ul>

<p>In operation, crawling a site containing AJAX involves the following stages:</p>

<ul>
	<li style="padding-bottom: .5em;">A normal LOCKSS crawl whose plugin is configured for AJAX starts.</li>

	<li style="padding-bottom: .5em;">The crawl continues as normal unless a URL is encountered which when matched against the plugin's crawl rules indicates the need for an AJAX crawl.</li>

	<li>The LOCKSS daemon starts two separate processes:
<ul style="list-style-type: disc;">
	<li style="padding-top: .5em; padding-bottom: .5em;">The Crawljax service configured for a single page crawl of the URL in question.</li>
	<li>The selected proxy configured to capture the HTTP(S) traffic generated by Crawljax.</li>
</ul>
</li>
	<li style="padding-bottom: .5em;">Crawljax executes all of the Javascript on the page, and clicks on all the clickable elements in the page.</li>

	<li style="padding-bottom: .5em;">The selected proxy captures the HTTP(S) requests from and responses to Crawljax's rendering of the page.</li>

	<li style="padding-bottom: .5em;">When the page crawl completes Crawljax reports to the LOCKSS daemon the location of the WARC file generated by the proxy.</li>

	<li style="padding-bottom: .5em;">The LOCKSS daemon "explodes" the WARC file, treating each component URL and content as if they had been collected by the LOCKSS crawler, including matching each against the plugin's crawl rules.</li>

	<li>Each matching URL and content is stored in the appropriate AU in the LOCKSS daemon's repository.</li>
</ul>

<p>The process of executing all the Javascript and clicking on all the clickable elements in the page suffers from the same problem as with form-filling. The cost, already much higher than with form-filling, increases combinatorially with depth. It is impractical to use the AJAX crawler except on sites that rely heavily on AJAX, and lack any alternative means of collecting their content (see Table 3).</p>

<table align="center" border="0" cellpadding="16" cellspacing="0">
<tr>
<td class="topLeft" align="left"><b>Depth</b></td>
<td class="topLeft" align="left"><b>Crawl Time(s)</b></td>
<td class="topLeft" align="left"><b>DOM States</b></td>
<td class="topLeftRight" align="left"><b>URLs Visited</b></td>
</tr>

<tr>
<td class="topLeft" align="right">1</td>
<td class="topLeft" align="right">124</td>
<td class="topLeft" align="right">21</td>
<td class="topLeftRight" align="right">14</td>
</tr>

<tr>
<td class="topLeftBottom" align="right">2</td>
<td class="topLeftBottom" align="right">3488</td>
<td class="topLeftBottom" align="right">240</td>
<td class="all" align="right">94</td>
</tr>

</table>
<div align="center"><p><b>Table 3: Increase in cost with AJAX crawl depth.</b></p></div>

<p>Examples of such sites are the journals of the Royal Society of Chemistry (RSC), in which Javascript is used in many ways, including to select which articles appear on an issue table of contents page. As following the links on the issue table of contents page is how the LOCKSS crawler normally finds the articles, this was a barrier to preservation. Figure 2 is a screen capture of a typical RSC table of contents page, showing the user experience. Figure 3 is a screen capture of the same page with Javascript disabled, showing what the LOCKSS crawler would see.</p>

<div align="center">
<img src="rosenthal-fig2.png" alt="rosenthal-fig2" width="652" height="604" class="border" vspace="10" />
<p><i>Figure 2: User view of RSC journal page</i></p>
</div>

<div class="divider-gray">&nbsp;</div>

<div align="center">
<img src="rosenthal-fig3.png" alt="rosenthal-fig3" width="654" height="614" class="border" vspace="10" />
<p><i>Figure 3: No-Javascript view of RSC journal page</i></p>
</div>

<p>The difficulty and cost of finding the content on heavily AJAX-ed sites is a problem not merely for preservation crawlers such as LOCKSS' and the Internet Archive's Heritrix [<a href="09rosenthal.html#24">24</a>], but far more importantly for search engines' crawlers such as the Googlebot [<a href="09rosenthal.html#11">11</a>]. Journals are strongly incentivized to make life easy for the Googlebot, so although one result of the grant is that the LOCKSS system can crawl pages such as the RSC's issue table of contents, doing so is less and less necessary. Figure 4 is a screen capture of the alternate to the page of Figure 2 that became available to crawlers during the grant. Many journals whose user experience is implemented largely by AJAX now provide such alternates.</p>

<div align="center">
<img src="rosenthal-fig4.png" alt="rosenthal-fig4" width="654" height="396" class="border" vspace="10" />
<p><i>Figure 4: No-Javascript view of alternate RSC page</i></p>
</div>

<p>Although the AJAX support is fully functional it has not yet been released in the LOCKSS daemon for two reasons; issues with licensing and some security concerns remain to be addressed, and in most cases alternate, less expensive ways to collect the important content have been provided.</p>

<div class="divider-dot">&nbsp;</div>
<h4>3.2 Dissemination</h4>

<p>Access to preserved Web content, for example via the Internet Archive's Wayback Machine [<a href="09rosenthal.html#18">18</a>], has suffered from a fundamental technical deficiency. The URI (A) from which the preserved content was collected points to the original publisher; the URI (B) from which the preserved version may be obtained points to the archive that preserves it. The Web provided no way to navigate from A to B. This caused two problems:</p>

<ul>
	<li style="padding-bottom: .5em;">A reader wanting to see an earlier version of A had to know <i>a priori</i> about the existence of B; there was no general way to discover the possibly multiple archives preserving the state of B at different times.</li>

	<li>B would typically contain links to other Web content, such as C. A reader clicking on the link to C would see not the state of C as it was when B was current, but the state of C now. As they disseminated content, archives such as the Wayback machine rewrote the links to C in the preserved content B so that instead of pointing to the original publisher, they pointed to the corresponding preserved content. This rewriting process was complex, and error-prone. Failures led to user confusion as they viewed pages partly made up of preserved content, and partly of current content.</li>
</ul>

<p>RFC 7089 [<a href="09rosenthal.html#31">31</a>], or Memento, is a Web standard that resolves these issues in an elegant and effective way by extending the content negotiation capabilities of the HTTP protocol to the time domain. Once it is fully deployed, it will allow Web browsers to specify a time in the past at which they want to view the Web, and transparently obtain the appropriate Mementos, or preserved content versions B of every URI involved, no matter which Web archive is preserving them. In effect, Memento will integrate all collections of preserved Web content into a single, uniformly accessible resource for readers.</p>

<p>Support for Memento is in two parts. The first is <i>intra-archive</i>. It allows each individual archive to respond to Web requests specifying a URI and a datetime by returning the Memento closest in time it has preserved, and associating with it links to the previous, next, first and last Mementos it has preserved. Under the grant, this functionality was implemented and released in the LOCKSS daemon.</p>

<p>The second part is called Memento Aggregation; it is <i>inter-archive</i>, satisfying Web requests for a URI at a datetime from whichever archive has the closest Memento in time by merging the Memento timelines from all available archives. Memento Aggregators can be thought of as search engines in the time domain. Prior to the grant, three problems with Memento's model of aggregation had been identified [<a href="09rosenthal.html#27">27</a>]. It assumes:</p>

<ul>
	<li style="padding-bottom: .5em;">All archived content is open access.</li>

	<li style="padding-bottom: .5em;">Archives supply the Aggregator only with correct information.</li>

	<li>The Aggregator knows every Memento in every archive.</li>
</ul>

<p>The first is not true. Many significant Web archives, for example the British Library's [<a href="09rosenthal.html#13">13</a>], are partly or wholly available only to readers physically at the Library. LOCKSS boxes hold both content which can be made freely available, such as that carrying Creative Commons licenses [<a href="09rosenthal.html#7">7</a>], and subscription content available only to readers at their host institution.</p>

<p>The second isn't true either. A malign archive could claim to have Mementos of URIs at "every minute of every day" [<a href="09rosenthal.html#6">6</a>], making other archives' much sparser collections effectively inaccessible. Archives need not be malign to have a similar effect. For example, the Internet Archive has Mementos of many subscription journal pages despite not having a subscription [<a href="09rosenthal.html#26">26</a>]. Because those journals' websites refuse to supply content to non-subscribers not, as the HTTP specification requires, with a 403 Forbidden error code but with a 200 Success code, the Internet Archive incorrectly thinks that their pages saying "You do not have a subscription" are useful Mementos.</p>

<p>The third is a scaling problem. The Internet Archive alone currently has more than 4.5&#8727;10<sup>11</sup> Mementos. Describing each to an Aggregator requires about 10<sup>2</sup> bytes, so just this one archive would need about 4.5&#8727;10<sup>13</sup> bytes, or 45TB. Clearly, practical Aggregators must use statistical techniques to guide browsers to archives that have a high probability of having an appropriate Memento. They cannot expect perfect accuracy.</p>

<p>During the grant the LOCKSS team contributed to research, primarily funded by the IIPC, into these problems but as yet they remain unresolved [<a href="09rosenthal.html#1">1</a>]. An aggregation capability was added to the LOCKSS daemon such that an institution's users using it will see Mementos from their institution's LOCKSS box, together with Mementos from other archives provided by a fall-back global Aggregator such as the Time Travel Service [<a href="09rosenthal.html#22">22</a>].</p>

<p>Assuming these problems can be resolved, these changes will mean that open access content preserved by the LOCKSS system will form part of the collaborative, uniform Web history resource enabled by Memento. In addition, readers of a library preserving subscription content using a LOCKSS box will see the preserved subscription content as a seamless part of this resource.</p>

<p>Because LOCKSS boxes were designed to preserve content obtained under their host library's subscriptions, they used the same IP address based access control method as the journal publishers did. Gradually, publishers are adding support for Shibboleth [<a href="09rosenthal.html#25">25</a>], which allows readers to access content to which their institution subscribes irrespective of their IP address.</p>

<p>To take part in the more integrated dissemination process enabled by Memento, LOCKSS boxes need a more flexible access control technology and Shibboleth is the obvious choice. We added Shibboleth support to the daemon, and in order to test it we connected one of our development LOCKSS boxes to Stanford's Shibboleth-based authentication infrastructure. In the test environment, the result was that a reader attempting to access the box would encounter first the normal LOCKSS administrator login sequence, then Stanford's two-factor authentication system. Figure 5 is a sequence of four screenshots, showing the LOCKSS login, the Stanford login/password page, the page for the Stanford hardware token, and finally the LOCKSS box's daemon status page.</p>

<p>These tests showed that the mechanism worked, but that we needed more experience of connecting to different institution's Shibboleth infrastructures before deploying it to the production networks would be feasible. We will be working with some PLNs to acquire this experience.</p>

<div align="center">
<img src="rosenthal-fig5-1.png" alt="rosenthal-fig5-1" width="600" height="650" vspace="10" /><br />
<img width="600" height="650" src="rosenthal-fig5-2.png" alt="rosenthal-fig5-2" vspace="10" /><br />
<img width="600" height="650" src="rosenthal-fig5-3.png" alt="rosenthal-fig5-3" vspace="10" /><br />
<img width="600" height="650" src="rosenthal-fig5-4.png" alt="rosenthal-fig5-4" vspace="10" />
<p><i>Figure 5: User view of RSC journal page</i></p>
</div>

<div class="divider-dot">&nbsp;</div>
<h4>3.3 Preservation</h4>

<p>In 2009 a pilot program instrumented the detailed behavior of LOCKSS boxes in the GLN, and compared them with LOCKSS boxes in PLNs. This comparison revealed a set of inefficiencies in the way the GLN performed the five polling functions, primarily because PLNs have fewer nodes preserving more homogeneous collections of content. The LOCKSS team proposed fixes for these inefficiencies, and implemented the ones that didn't require significant resources to good effect.</p>

<p>It didn't prove possible to divert sufficient resources from satisfying users' immediate concerns to implement the remaining fixes. These fixes fall into three groups: filtering, proof of possession polls, and symmetric polls.</p>

<p>The combined effect of the grant-funded work to implement these three sets of changes was expected to be a major decrease in the amount of computation, I/O, memory, and network traffic consumed by the LOCKSS software preserving a given amount of content in the GLN. Another way of looking at this is that libraries' existing investments in hardware resources to run LOCKSS software would, if provided with sufficient additional disk storage, be capable of handling the growth of the content available to preserve for much longer.</p>

<p><b>3.3.1 Filtering</b></p>

<p>Each LOCKSS box in the network collects its content directly from the publisher. As described in Section 3.1, much of this content is now dynamically generated, and will differ from one LOCKSS box to another. Examples are personalizations such as "Institution: Stanford University", watermarks such as "Downloaded 11/22/11 by 192.168.1.100", and lists of citing papers.</p>

<p>The prevalence of dynamically generated content makes it less and less likely that the copies at remote LOCKSS boxes available to repair any damage will be bit-for-bit identical to the local copy before it was damaged. For example, the offered repair may have</p>

<p><span class="code">&lt;div class="institution"&gt;"Institution: Edinburgh University"&lt;/div&gt;</span></p>

<p>where the damaged copy had</p>

<p><span class="code">&lt;div class="institution"&gt;"Institution: Stanford University"&lt;/div&gt;</span></p>

<p>Before an offered repair is accepted, two questions need to be answered:</p>

<ul>
	<li style="padding-bottom: .5em;">Is the repair functionally equivalent to the content it is repairing?</li>

	<li>Is the repair unaltered since it was originally collected?</li>
</ul>

<p>LOCKSS boxes used the same polling mechanism to answer both questions. Over time, the increase of dynamic content is reducing its effectiveness. We proposed instead to use separate but synergistic mechanisms, adapting the ideas developed by students of Professor Mema Roussopoulos at Harvard's Computer Science department for exploiting local "polls" in the LOCKSS context to answer the second question [<a href="09rosenthal.html#5">5</a>], and reserving the existing LOCKSS polling mechanism to answer the first.</p>

<p>Content is defined as "functionally equivalent" by comparing it after filtering to remove the dynamic parts, such as personalizations. Content that is the same after these parts are removed is regarded as functionally equivalent. Removing the need for this filtering from the mechanism that assures that content is unchanged since collection allows the filtering process for functional equivalence to be more aggressive, and thus more robust against changes to the look-and-feel of the publisher's web site. We expected that in many cases it would be possible to filter everything except the content the author generated, which might for example be flagged with</p>

<p><span class="code">&lt;div class="text"&gt;"author's words"&lt;/div&gt;</span></p>

<p>and the equivalent for formats other than HTML.</p>

<p>Experience over the last 7 years led us to believe that basing the determination of functional equivalence on more aggressive, and thus more robust filtering should materially reduce the load on the LOCKSS team of coping with changes to publishers' web sites.</p>

<p><b>3.3.2 Symmetric Polls</b></p>

<p>Before enhancement the LOCKSS polling mechanism used only asymmetric polls. These polls are asymmetric because the poller proves that its content agrees with that at the agreeing voters, but the voter does not prove that its content agrees with that at the poller.</p>

<p>A voter in a symmetric poll generates two nonces <i>N<sub>v</sub></i> and <i>N<sub>s</sub></i>. The vote it sends to the poller includes both. When a poller receives a vote containing <i>N<sub>s</sub></i>, while it is verifying the vote it computes a new vote containing <i>(N<sub>p</sub>,N<sub>s</sub>,H(N<sub>p</sub>,N<sub>s</sub>, content(AU)))</i> that it sends back to the voter. The voter verifies this return vote and, if it agrees, it has proof that its content matches that at the poller. An asymmetric poll with <i>Q</i> voters can create a maximum of <i>Q</i> "willing repairer" relationships; a symmetric poll with <i>Q</i> voters can create a maximum of <i>2Q</i>. In practice most polls create fewer than these limits.</p>

<p>Symmetric polling was predicted to have a more significant effect on diverse networks such as the GLN, in which the probability that a random pair of peers both have instances of the same AU is low, than on tightly controlled networks such as CLOCKSS, where the probability is close to 1.</p>

<p><b>3.3.3 Proof of Possession</b></p>

<p>Recent CS research has distinguished between Proof of Retrievability (PoR) [<a href="09rosenthal.html#4">4</a>], and Proof of Possession (PoP) [<a href="09rosenthal.html#2">2</a>]:</p>

<ul>
	<li style="padding-bottom: .5em;">PoR processes the entire file, and guarantees that, during the proof, the prover had access to a complete, intact copy of the file in question.</li>

	<li>PoP samples the content of the file to provide high confidence that, during the proof, the prover had access to a copy of the file in question <i>without</i> proving that the copy was complete, and intact.</li>
</ul>

<p>Because, for large files, even quite small samples can provide very high confidence that the prover has a copy, PoP can be much cheaper than PoR.</p>

<p>Before enhancement the LOCKSS polling mechanism used only PoR polls. They are PoR because each poll hashes the entire content of the AU instance at the poller and the voters. In the LOCKSS context, only detection and prevention actually require PoR, whereas location, verification and authorization can use PoP. </p>

<p>PoP polls were implemented by allowing a poller whose instance of an AU needs more "willing repairers" to include a modulus <i>M</i> along with <i>N<sub>p</sub></i>. A URL is included in the vote, and thus its content hashed by each voter and the poller, only if the hash of a nonce and the URL's name modulo <i>M</i> is zero. Thus <i>M = 2</i> includes about half the URLs in the vote. Since hashing is the major cost, PoP polls consume a factor of nearly <i>M</i> less resource at the poller and each voter than PoR polls.</p>

<p><b>3.3.4 Local Polls</b></p>

<p>PoP polls are not effective as integrity checks because they only examine a sample of the content. Their use must be combined with some means of compensating for this reduced integrity checking. Most digital preservation systems perform integrity checks by computing a hash of the content as it is ingested, storing both content and hash, and at intervals recomputing the hash of the content to compare with the stored hash. This results in either:</p>

<ul>
	<li>A match. This indicates that either:
<ul style="list-style-type: disc;">
	<li style="padding-top: .5em; padding-bottom: .5em;">The content and the hash are unmodified, or</li>

	<li>The content has been modified and the hash modified to match.</li>
</ul></li>
	<li style="padding-top: .5em;">A mis-match, indicating that either the content or the hash has been modified, or possibly both, but not so they match. </li>
</ul>

<p>Techniques, for example based on Merkle trees, are available to detect modification of the hash [<a href="09rosenthal.html#12">12</a>], but alone they do not allow for recovery from the damage. Stored hashes are thus not an adequate basis for a system such as LOCKSS that must recover from damage, and that must defend against a wide range of threats [<a href="09rosenthal.html#29">29</a>]. The LOCKSS system did not, and still does not <i>depend</i> on storing hashes.</p>

<p>Local polls do use hashes computed at ingest and stored, but only as <i>hints</i>. A local poll on an AU computes the hash of the unfiltered content of each URL in the AU and compares it with the URL's stored hash. Any mis-match causes the poll's result to be disagreement, otherwise the result is agreement. An agreeing local poll reduces the AU's priority for a PoR poll, a disagreeing local poll raises it. The use of local polls can thus increase the interval between expensive PoR polls without increasing the intervals between integrity checks, thus reducing overall resource cost.</p>

<div class="divider-full">&nbsp;</div>
<h3>4 Preservation Performance</h3>

<div class="divider-dot">&nbsp;</div>
<h4>4.1 Monitoring</h4>

<p>In order to prove that the preservation enhancements actually delivered their expected benefits, it was necessary to collect and analyze data describing the performance of the networks. The pre-existing data collection and analysis technology was inadequate to this task; it didn't collect enough data and failed to collect some parameters needed for meaningful analysis. As a result, a significant part of the enhancement effort involved developing improved data collection and analysis technology.</p>

<p><b>4.1.1 Data Collection</b></p>

<p>The data collection system is a modular Python framework developed during the grant to collect network performance statistics from individual LOCKSS daemons. The core functionality of the framework is to poll the administrative user interface of each peer in a network and to parse the returned XML into a Pythonic data structure for immediate use or storage into a MySQL database. The specific data to be collected and stored is defined by data collection plugins, essentially Python modules. All collected data is grouped into collections or observations which are tied to the date and time the collector instantiated.</p>

<p>Data was collected from every box in the CLOCKSS Archive. Some GLN box administrators choose to prevent data collection, and in other cases network performance is inadequate for consistent collection of the large volume of data required, so usable data is available from only a subset of the GLN's boxes. Because the conclusions we draw below are not based on absolute values, but on changes through time within the subset, the non-random nature of the GLN sample should not affect them.</p>

<p><b>4.1.2 Data Analysis</b></p>

<p>Subsets of the collected data are analysed by a tool implemented for this project in R [<a href="09rosenthal.html#30">30</a>] for numeric analysis and graph generation. Because the data set may span many observations and may not fit in memory, the tool fetches individual observations from the database for preprocessing then aggregates the results into printable and graph-able data.</p>

<p>The collected data can be analyzed in many ways; what follows is the simplest analysis that shows the effects of the preservation enhancements. After new content is released to a LOCKSS network for preservation, the LOCKSS boxes collect their copies, then call polls on them to locate other boxes holding the same content and establish "willing repairer" relationships with them. The less time it takes for this to happen, the better the polling process is working. For the whole period of our experiments, both networks had backlogs of newly released content that had yet to acquire sufficient willing repairers, so we were measuring how quickly additional willing repairer relationships could be created.</p>

<p><b>4.1.3 Definitions</b></p>

<p>The terms used in the performance analysis are defined as follows:</p>

<ul>
	<li style="padding-bottom: .5em;">The <i>willing repairers</i> of an instance of an AU at a peer in a network describes the set of other peers which have satisfied at least one of the following conditions in the most recent relevant poll:

	<ul style="list-style-type: disc;">
	<li style="padding-top: .5em; padding-bottom: .5em;">The other peer has voted in agreement with this peer in an asymmetric poll on this AU called by this peer in which this peer was in the majority.</li>

	<li>The other peer called a symmetric poll in which this peer voted in agreement with the other peer.</li>
	</ul>
	</li>

	<li style="padding-bottom: .5em;">A <i>New Repairer Event</i> (NRE) occurs whenever there is a change in the number of "willing repairers" an AU instance has, between successive observations by the data collector of that AU instance. We do not exclude the possibility of the number of repairers decreasing.</li>

	<li style="padding-bottom: .5em;">The <i>Days per Willing Repairer</i> (DpWR) of an instance of an AU at a peer is the time between positive NREs at that AU instance. Since NREs are the result of polls, the DpWR depends on the rate at which polls occur in the network, which is stable over time.</li>

	<li style="padding-bottom: .5em;">The <i>aumedian</i> of an AU instance at a peer is the median of the DpWR observed for that AU instance. The aumedian graph plots on the Y axis the proportion of the AU instances across all observable peers whose median DpWR falls within the interval on the X axis.</li>

	<li style="padding-bottom: .5em;">The <i>auidmedian</i> of an AU is median of the set formed by the NREs of all instances of that AU across all observable peers. The auidmedian graph plots on the Y axis the proportion of AUs whose median DpWR across all their instances falls within the interval on the X axis. </li>
</ul>

<p>In the following sections we show the aumedian and auidmedian graphs for data collected for the CLOCKSS and GLN networks. For each network, data was collected in three different periods:</p>

<ul>
	<li style="padding-bottom: .5em;"><i>PreSymPoll</i> &#151; the period immediately preceding symmetric polls being enabled. For CLOCKSS, this dataset consists of 275,142 NREs from 12 peers, and for the GLN 980,230 NREs from 67 peers.</li>

	<li style="padding-bottom: .5em;"><i>PostSymPoll</i> &#151; the period between symmetric polls being enabled and PoP/Local polls being enabled. For CLOCKSS this dataset consists of 96,609 NREs from 12 peers, and for the GLN 365,536 NREs from 53 peers.</li>

	<li><i>PostPoPPoll</i> &#151; the period after PoP/Local polls were enabled. For CLOCKSS this dataset consists of 96,609 NREs from 12 peers, and for the GLN 532,387 NREs from 52 peers.</li>
</ul>

<div class="divider-dot">&nbsp;</div>
<h4>4.2 Symmetric Polls Only</h4>

<p>The effect of enabling symmetric polling on the CLOCKSS network can be seen by comparing the before and after graphs in Figure 6 (comparing the aumedian graphs) which shows the most likely aumedian DpWR improved from between 30-60 to 10-20 days/repairer and Figure 7 (comparing the auidmedian graphs) which shows the most likely auidmedian DpWR improved from 50-60 to 10-20 days/repairer. </p>

<div align="center">
<img src="rosenthal-fig6.png" alt="rosenthal-fig6" width="422" height="773" vspace="10" />
<p><i>Figure 6: CLOCKSS: aumedian before and after symmetric polling</i></p>
</div>
<div class="divider-gray">&nbsp;</div>
<div align="center">
<img src="rosenthal-fig7.png" alt="rosenthal-fig7" width="409" height="771" vspace="10" />
<p><i>Figure 7: CLOCKSS: auidmedian before and after symmetric polling</i></p>
</div>

<p>Although the data is, as expected, noisier in the less controlled GLN, the effect of enabling symmetric polling can be seen by comparing the before and after graphs in Figure 8 (comparing the aumedian graphs) which shows the most likely aumedian DpWR improved from around 120 to under 30 days/repairer and Figure 9 (comparing the auidmedian graphs) which shows the most likely auidmedian DpWR improved from over 50 to under 30 days/repairer.</p>

<div align="center">
<img src="rosenthal-fig8.png" alt="rosenthal-fig8" width="423" height="779" vspace="10" />
<p><i>Figure 8: GLN: aumedian before and after symmetric polling</i></p>
</div>
<div class="divider-gray">&nbsp;</div>
<div align="center">
<img src="rosenthal-fig9.png" alt="rosenthal-fig9" width="403" height="774" vspace="10" />
<p><i>Figure 9: GLN: auidmedian before and after symmetric polling</i></p>
</div>

<p>As predicted, symmetric polling had a greater impact on the GLN than on the CLOCKSS network.</p>

<div class="divider-dot">&nbsp;</div>
<h4>4.3 All Poll Enhancements</h4>

<p>The effect of enabling Proof of Possession and Local polls on the CLOCKSS network can be seen by comparing the before and after graphs in Figure 10 (comparing the aumedian graphs) and Figure 11 (comparing the auidmedian graphs).</p>

<div align="center">
<img src="rosenthal-fig10.png" alt="rosenthal-fig10" width="407" height="766" vspace="10" />
<p><i>Figure 10: CLOCKSS: aumedian before and after PoP/Local polling</i></p>
</div>
<div class="divider-gray">&nbsp;</div>
<div align="center">
<img src="rosenthal-fig11.png" alt="rosenthal-fig11" width="377" height="771" vspace="10" />
<p><i>Figure 11: CLOCKSS: auidmedian before and after PoP/Local polling</i></p>
</div>

<p>As expected, the effect on the CLOCKSS network is not significant, although the auidmedian graph shows some improvement.</p>

<p>The effect of enabling Proof of Possession and Local polls on the GLN can be seen by comparing the before and after graphs in Figure 12 (comparing the aumedian graphs) which shows the most likely aumedian DpWR improved from about 30 to about 10 days/repairer and Figure 13 (comparing the auidmedian graphs) which shows the most likely auidmedian DpWR improved from about 25 to about 15 days/repairer.</p>

<div align="center">
<img src="rosenthal-fig12.png" alt="rosenthal-fig12" width="428" height="782" vspace="10" />
<p><i>Figure 12: GLN: aumedian before and after PoP/Local polling</i></p>
</div>
<div class="divider-gray">&nbsp;</div>
<div align="center">
<img src="rosenthal-fig13.png" alt="rosenthal-fig13" width="405" height="778" vspace="10" />
<p><i>Figure 13: GLN: auidmedian before and after PoP/Local polling</i></p>
</div>

<div class="divider-dot">&nbsp;</div>
<h4>4.4 Future Work</h4>

<p>The effectiveness of these enhanced mechanisms depends upon the policies that peers use to decide when to call PoR, PoP and Local polls. Although the mechanisms are fully implemented and tested, the implementation of these policies is preliminary, and contains a number of tunable parameters which have been set to our best estimate of suitable values.</p>

<p>As will be evident, determining the effect of each policy and parameter change on the performance of a network takes a long time. The results above are the first step in an extended, gradual tuning process.</p>

<div class="divider-full">&nbsp;</div>
<h3>5 Conclusions</h3>

<p>The Mellon Foundation grant allowed the LOCKSS Program to devote resources to making significant functionality and performance improvements to the system. Even in the areas of AJAX and Shibboleth, where deployment issues were not sufficiently resolved for immediate release, the basic mechanisms are in place and working. We expect that work to support initial deployment to individual PLNs will mean that these issues will be fully resolved by the time the broad user base requires these technologies.</p>

<p>It would have been difficult to do this without specific support. Although the experience of the LOCKSS Program suggests that the "Red Hat" model can be an effective business model for digital preservation, it may need to be supplemented at intervals by small, targeted grants if the infrastructure of the system is to keep pace with developments.</p>

<div class="divider-full">&nbsp;</div>
<h3>Acknowledgements</h3>

<p>This work was primarily funded by the Andrew W. Mellon Foundation with additional support from the CLOCKSS Archive, and the libraries of the LOCKSS Alliance.</p>

<div class="divider-full">&nbsp;</div>
<h3>Notes</h3>

<p><span style="vertical-align: super;"><a name="n1">1</a></span> LOCKSS is a trademark of Stanford University. It stands for Lots Of Copies Keep Stuff Safe.</p>

<p><span style="vertical-align: super;"><a name="n2">2</a></span> This business model was successfully pioneered by Michael Tiemann, David Vinayak Wallace, and John Gilmore at Cygnus Support [<a href="09rosenthal.html#9">9</a>], later acquired by Red Hat.</p>

<div class="divider-full">&nbsp;</div>
<h3>References</h3>

<p><a name="1">[1]</a> Sawood Alam, Michael L. Nelson, Herbert Van de Sompel, and David S.H. Rosenthal. Archive Profiling Through CDX Summarization. In submission. Will appear in <i>Lecture Notes in Computer Science</i>, Vol. 9316.</p>

<p><a name="2">[2]</a> N Asokan, Valtteri Niemi, and Pekka Laitinen. On the usefulness of proof-of-possession. In <i>Proceedings of the 2nd Annual PKI Research Workshop</i>, pages 122&#151;127, 2003.</p>

<p><a name="3">[3]</a> Blue Ribbon Task Force on Sustainable Digital Preservation and Access. <a href="http://brtf.sdsc.edu/biblio/BRTF_Final_Report.pdf">Sustainable Economics for a Digital Planet</a>, April 2010.</p>

<p><a name="4">[4]</a> Kevin D. Bowers, Ari Juels, and Alina Oprea. Proofs of retrievability: Theory and implementation. In <i>Proceedings of the 2009 ACM Workshop on Cloud Computing Security, CCSW '09</i>, pages 43&#151;54, New York, NY, USA, 2009. ACM.</p>

<p><a name="5">[5]</a> Prashanth Bungale, Geoffrey Goodell, and Mema Roussopoulos. Conservation vs. consensus in peer-to-peer preservation systems. In <i>IPTPS</i>, February 2005.</p>

<p><a name="6">[6]</a> British Broadcasting Corporation. <a href="https://web.archive.org/web/20000304005431/http://news.bbc.co.uk/">BBC News: Front Page</a>, March 2000.</p>

<p><a name="7">[7]</a> Creative Commons. <a href="http://creativecommons.org/">Web site</a>.</p>

<p><a name="8">[8]</a> David Bern. <a href="https://github.com/odie5533/WarcMITMProxy">WarcMITMProxy</a>.</p>

<p><a name="9">[9]</a> John Gilmore. <a href="http://www.toad.com/gnu/cygnus/">Marketing Cygnus Support &#151; Free Software history</a>.</p>

<p><a name="10">[10]</a> Giorgio Maone. <a href="https://noscript.net/">NoScript</a>.</p>

<p><a name="11">[11]</a> Google. <a href="https://support.google.com/webmasters/answer/182072?hl=en">Googlebot</a>.</p>

<p><a name="12">[12]</a> S. Haber and W. S. Stornetta. How to Time-stamp a Digital Document. <i>Journal of Cryptology: the Journal of the Intl. Association for Cryptologic Research</i>, 3(2):99&#151;111, 1991.</p>

<p><a name="13">[13]</a> Helen Hockx-Yu. <a href="http://www.dcc.ac.uk/webfm_send/1911">Ten years of archiving the UK Web</a>. In <i>10th International Digital Curation Conference</i>, February 2015.</p>

<p><a name="14">[14]</a> Antawan Holmes and Marc Kellogg. Automating functional tests using selenium. In <i>Agile Conference, 2006</i>, pages 270&#151;275. IEEE, 2006. <a href="https://doi.org/10.1109/AGILE.2006.19">http://doi.org/10.1109/AGILE.2006.19</a></p>

<p><a name="15">[15]</a> IIPC. <a href="http://www.netpreserve.org/">International Internet Preservation Consortium</a>.</p>

<p><a name="16">[16]</a> INA. <a href="https://github.com/INA-DLWeb/LiveArchivingProxy">INA-DLWeb Live Archiving Proxy</a>.</p>

<p><a name="17">[17]</a> INA. <a href="http://www.ina.fr/">Institut National de l'Audiovisuel</a>.</p>

<p><a name="18">[18]</a> Internet Archive. <a href="https://archive.org/web/">The Internet Archive Wayback Machine</a>.</p>

<p><a name="19">[19]</a> ISO. <a href="http://www.iso.org/iso/catalogue_detail.htm?csnumber=44717">ISO 28500:2009</a>.</p>

<p><a name="20">[20]</a> P. Maniatis, M. Roussopoulos, TJ Giuli, D. S. H. Rosenthal, and Mary Baker. The LOCKSS Peer-to-Peer Digital Preservation System. <i>ACM TOCS</i>, 23(1), February 2005.</p>

<p><a name="21">[21]</a> Petros Maniatis, Mema Roussopoulos, TJ Giuli, David S. H. Rosenthal, Mary Baker, and Yanto Muliadi. Preserving Peer Replicas By Rate-Limited Sampled Voting. In <i>Proceedings of the Nineteenth ACM Symposium on Operating Systems Principles</i>, pages 44&#151;59, Bolton Landing, NY, USA, October 2003.</p>

<p><a name="22">[22]</a> Memento Development Group. <a href="http://timetravel.mementoweb.org/about/">About the Time Travel Service</a>.</p>

<p><a name="23">[23]</a> Ali Mesbah, Arie van Deursen, and Stefan Lenselink. Crawling Ajax-based web applications through dynamic analysis of user interface state changes. <i>ACM Transactions on the Web (TWEB)</i>, 6(1):3:1&#151;3:30, 2012.</p>

<p><a name="24">[24]</a> Gordon Mohr, Michael Stack, Igor Ranitovic, Dan Avery, and Michele Kimpton. An Introduction to Heritrix: An Open Source Archival Quality Web Crawler. In <i>IWAW04: Proceedings of the International Web Archiving Workshop</i>, September 2004.</p>

<p><a name="25">[25]</a> R. L. Morgan, Scott Cantor, Steven Carmody, Walter Hoehn, and Ken Klingenstein. <a href="https://net.educause.edu/ir/library/pdf/eqm0442.pdf">Federated Security: The Shibboleth Approach</a>. <i>EDUCAUSE Quarterly</i>, 27(4), 2004.</p>

<p><a name="26">[26]</a> David S. H. Rosenthal. <a href="http://blog.dshr.org/2011/01/mementomarketplace-for-archiving.html">Memento &amp; the Marketplace for Archiving</a>. March 2013.</p>

<p><a name="27">[27]</a> David S. H. Rosenthal. <a href="http://blog.dshr.org/2013/03/re-thinking-mementoaggregation.html">Re-Thinking Memento Aggregation</a>. March 2013. </p>

<p><a name="28">[28]</a> David S. H. Rosenthal and Vicky Reich. Permanent Web Publishing. In <i>Proceedings of the USENIX Annual Technical Conference, Freenix Track</i>, pages 129&#151;140, San Diego, CA, USA, June 2000.</p>

<p><a name="29">[29]</a> David S. H. Rosenthal, Thomas S. Robertson, Tom Lipkis, Vicky Reich, and Seth Morabito. Requirements for Digital Preservation Systems: A Bottom-Up Approach. <i>D-Lib Magazine</i>, 11(11), November 2005. <a href="https://doi.org/10.1045/november2005-rosenthal">http://doi.org/10.1045/november2005-rosenthal</a></p>

<p><a name="30">[30]</a> R Core Team. <a href="http://cran.r-project.org/doc/manuals/r-release/R-lang.html">R Language Definition</a>. October 2014.</p>

<p><a name="31">[31]</a> Herbert van der Sompel, Michael Nelson, and Robert Sanderson. <a href="http://tools.ietf.org/html/rfc7089">RFC 7089: HTTP Framework for Time-Based Access to Resource States &#151; Memento</a>, December 2013.</p>

<p><a name="32">[32]</a> W3C. <a href="http://www.w3.org/TR/REC-DOM-Level-1/">Document Object Model (DOM) Level 1 Specification</a>.</p>

<p><a name="33">[33]</a> W3C. <a href="http://www.w3.org/TR/html5/">HTML5: A vocabulary and associated APIs for HTML and XHTML</a>.</p>

<p><a name="34">[34]</a> W3C. <a href="http://www.w3.org/TR/XMLHttpRequest/">XMLHttpRequest Level 1</a>.</p>

<div class="divider-full">&nbsp;</div>
<h3>About the Authors</h3>

<table border="0"  cellpadding="6" bgcolor="#FFFFFF"> 
<tr>
<td align="center"><img src="rosenthal.jpg" class="border" alt="rosenthal" width="100" height="131" /></td>
<td>
<p class="blue"><b>David S. H. Rosenthal</b> has been a senior engineer in Silicon Valley for 30 years, including as a Distinguished Engineer at Sun Microsystems, and as employee #4 at Nvidia. 17 years ago he co-founded the LOCKSS Program at the Stanford University Libraries, and has been its Chief
Scientist ever since. He has an MA from Cambridge University and a Ph.D. from Imperial College, London. </p>
</td>
</tr>
</table>

<div class="divider-full">&nbsp;</div>

<table border="0"  cellpadding="6" bgcolor="#FFFFFF"> 
<tr>
<td align="center"><img src="vargas.jpg" class="border" alt="vargas" width="100" height="128" /></td>
<td>
<p class="blue"><b>Daniel L. Vargas</b> graduated from the University of California, Santa Cruz with a BA in mathematics. He has been working as a system administrator with the LOCKSS Program at Stanford University since 2009. </p>
</td>
</tr>
</table>

<div class="divider-full">&nbsp;</div>

<table border="0"  cellpadding="6" bgcolor="#FFFFFF"> 
<tr>
<td align="center"><img src="lipkis-rev.jpg" class="border" alt="lipkis-rev" width="100" height="115" /></td>
<td>
<p class="blue"><b>Thomas Lipkis</b> is Senior Software Architect of the LOCKSS program at the Stanford University Libraries, where he is primarily responsible for leading the design and implementation of the production LOCKSS system. His background includes work in operating systems, knowledge representation, manufacturing, communications and embedded systems.</p>
</td>
</tr>
</table>

<div class="divider-full">&nbsp;</div>

<table border="0"  cellpadding="6" bgcolor="#FFFFFF"> 
<tr>
<td align="center"><img src="griffin.jpg" class="border" alt="griffin" width="100" height="127" /></td>
<td>
<p class="blue"><b>Claire Griffin</b> is a Senior Software Engineer of the LOCKSS program at the Stanford University Libraries responsible for design and implementation of extensions to the LOCKSS platform. She previously worked a system developer for HighWire Press. She has a background in reputation systems, decentralized multiplayer online worlds and system platform development. </p>
</td>
</tr>
</table>


<div class="divider-full">&nbsp;</div>

 <!-- Standard Copyright line here  -->

<div class="center">

<p class="footer">Copyright &copy; 2015 David S. H. Rosenthal</p>  
  </div>
</td>
 </tr>
</table>

<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
    <td height="1" bgcolor="#2b538e"><img src="../../../img2/transparent.gif" alt="transparent image" width="100" height="2" /></td>
  </tr>
</table>

</td></tr></table>
</td></tr></table>
</form>

</body>
</html>