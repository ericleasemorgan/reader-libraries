<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="DOI" content="10.1045/march2015-mccown" />
<meta name="description" content="D-Lib Magazine" /> 
<meta name="keywords" content="Mobile Web, Archiving, MobileFinder" />
<link rel="metadata" href="03mccown.meta.xml" />
<link rel="metadata" href="../03bib.meta.bib" />
<link rel="metadata" href="../03ris.meta.ris" />
<link href="../../../style/style1.css" rel="stylesheet" type="text/css" />
<title>Tools for Discovering and Archiving the Mobile Web</title>
</head>

<body>
<form action="https://www.dlib.org/cgi-bin/search.cgi" method="get">

<table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#2b538e">
<tr>
<td><img src="../../../img2/space.gif" alt="" width="10" height="2" /></td></tr>
</table>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="bottom" colspan="4" align="right" bgcolor="#4078b1">

<table border="0">
<tr>
<td align="right" class="search"><img src="../../../img2/search2.gif" alt="" width="51" height="20" align="middle" />Search D-Lib:</td>

<td>
<input type="text" name="words" value="" size="25" />
</td>

<td align="left" valign="middle">
<input type="submit" name="search" value="Go!" />
<input type="hidden" name="config" value="htdig" />
<input type="hidden" name="restrict" value="" />
<input type="hidden" name="exclude" value="" /> 
</td>
</tr>
</table>

</td></tr></table>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="bottom" colspan="4">

<table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#e04c1e" id="outer" summary="Main Table">
<tr>
<td><img src="../../../img2/space.gif" alt="" width="10" height="1" /></td></tr>
</table>

<table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#F6F6F6" id="bannertable">
  <tr>
    <td width="830" bgcolor="#4078b1" class="backBannerImage" align="left"><img src="../../../img2/D-Lib-blocks.gif" alt="D-Lib Magazine" width="450" height="100" border="0" /></td>
  </tr>
  <tr>
    <td width="830" bgcolor="#e04c1e"><img src="../../../img2/transparent.gif" alt="spacer" height="1" /></td>
  </tr>
  <tr>
    <td width="830" bgcolor="#eda443" align="left"><img src="../../../img2/magazine.gif" alt="The Magazine of Digital Library Research" width="830" height="24" border="0" /></td>
  </tr>
  <tr>
    <td width="830" bgcolor="#e04c1e"><img src="../../../img2/transparent.gif" alt="spacer" height="1" /></td>
   </tr>
</table>

<table width="100%" border="0" cellpadding="0" cellspacing="0" id="navtable">
  <tr>
    <td width="5" height="20" bgcolor="#2b538e">&nbsp;</td>
    <td width="24" height="20" bgcolor="#2b538e"><img src="../../../img2/transparent.gif" alt="" width="24" height="20" /></td>
    <td height="20" align="left" bgcolor="#2b538e" class="navtext" nowrap="nowrap"><a href="../../../dlib.html">HOME</a>&nbsp;|&nbsp;<a href="../../../about.html">ABOUT D-LIB</a>&nbsp;|&nbsp;<a href="../../../contents.html" class="navtext">CURRENT ISSUE</a>&nbsp;|&nbsp;<a href="../../../back.html">ARCHIVE</a>&nbsp;|&nbsp;<a href="../../../author-index.html">INDEXES</a>&nbsp;|&nbsp;<a href="../../../groups.html">CALENDAR</a>&nbsp;|&nbsp;<a href="../../author-guidelines.html">AUTHOR GUIDELINES</a>&nbsp;|&nbsp;<a href="https://www.dlib.org/mailman/listinfo/dlib-subscribers">SUBSCRIBE</a>&nbsp;|&nbsp;<a href="../../letters.html">CONTACT D-LIB</a></td>
    <td width="5" height="20" bgcolor="#2b538e">&nbsp;</td>
  </tr>
</table>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td width="55" height="1" bgcolor="#e04c1e"><img src="../../../img2/space.gif" alt="transparent image" width="1" height="1" /></td></tr>
</table>

<!-- CONTENT TABLE -->
<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
  <td>
 
<!-- BEGIN MAIN CONTENT TABLE -->

<table width="100%" border="0" cellspacing="0" cellpadding="10" bgcolor="#ffffff">
<tr>

<td width="10"><img src="../../../img2/space.gif" alt="" width="1" height="1" /></td>

<td valign="top"> 

<h3 class="blue-space">D-Lib Magazine</h3>
<p class="blue">March/April 2015<br />
Volume 21, Number 3/4<br />
<a href="../03contents.html">Table of Contents</a>
</p> 

<div class="divider-full">&nbsp;</div>

<h3 class="blue-space">Tools for Discovering and Archiving the Mobile Web</h3>

<p class="blue">
Frank McCown, Monica Yarbrough and Keith Enlow<br /> 
Harding University<br />
{fmccown, mwallers, kenlow}&#064;harding.edu


<br /><br />DOI: 10.1045/march2015-mccown
 </p>

<div class="divider-full">&nbsp;</div>

<p class="blue"><a href="03mccown.print.html" class="fc">Printer-friendly Version</a></p>

<div class="divider-full">&nbsp;</div>

 <!-- Abstract or TOC goes here --> 

<h3 class="blue">Abstract</h3>

<p class="blue">
Many websites are adapting their content for users who are accessing the Web using smartphones and tablets. The growth of this Mobile Web has required web archivists to change their practices in order to collect this ephemeral web content. We have created a tool called MobileFinder which can be used to automatically detect mobile pages when given the URL of a desktop web page. We used this tool in an experiment to gauge what techniques popular websites are currently using to expose mobile content, and we incorporated the tool into Heritrix to demonstrate its usefulness to the web archiving community.
</p>

<!-- Article goes next --> 

<div class="divider-full">&nbsp;</div>
<h3>Introduction</h3>

<p>When Apple introduced the iPhone in 2007, its touch screen interface revolutionized the smartphone industry and set a new standard which other phone manufactures would soon emulate. They also sparked a revolution within with the Mobile Web: the iPhone web browser was able to render web pages created with HTML, CSS, and JavaScript, making older markup languages like CHTML, iHTML, and WML unnecessary to reach smartphone users. Other smartphone manufacturers followed suit and produced equally sophisticated web browsers. This set off a flurry of activity as web developers started to build web pages that would fit smaller screens and were tuned to users on the go. </p>

<p>The growth of the Mobile Web has prompted web archivists to archive both the desktop version and mobile version of websites. However, there are a number of ways that a website might expose their mobile pages, and modern web archiving tools like Heritrix are not currently able to automatically discover mobile content or focus their crawling on mobile content without manual configuration. </p>

<p>We have created a tool to automatically discover mobile web pages when given a seed URL. We adapted our tool to be used as a web service and made minimal code changes to Heritrix to use the tool to automatically discover mobile websites. We also performed an experiment using our web service to discover mobile sites and looked for markers that should indicate that mobile content is available to a web crawler. We share our findings crawling the Mobile Web and the tools we built in hopes that other web archivists will benefit from our experiences.</p>

<div class="divider-full">&nbsp;</div>
<h3>Mobile Publication Methods</h3>

<p>There are three primary techniques used by websites to deliver mobile pages.  We refer to these techniques collectively as <i>mobile publication methods</i>:</p>

<ol>
	<li style="padding-bottom: .5em;">Using responsive web design (RWD) techniques that deliver the same content to both desktop and mobile devices</li>

	<li style="padding-bottom: .5em;">Dynamically serving different HTML and CSS to mobile devices using the same URL</li>

	<li>Using different URLs to send out desktop or mobile pages</li>
</ol>

<p>When sites use responsive web design (RWD), the desktop and mobile devices receive the same HTML contents (Marcotte, <a href="03mccown.html#4">2010</a>).  The CSS contains media queries that apply different rules for styling the page so a desktop's page may look very different than a mobile's page.  An example is shown in Figure 1 where accessing <a href="http://www.vizio.com">www.vizio.com</a> returns the same content to desktops (left) as it does mobile devices.  However, the CSS radically transforms the content to fit the smaller viewport of the mobile device (right).</p>

<div align="center">
<img src="mccown-fig1.png" alt="mccown-fig1" width="722" height="366" vspace="10" />
<p><i>Figure 1: Accessing www.vizio.com on a desktop (left) and mobile device (right). RWD is used to render the page differently depending on the device's viewport size.</i></p>
</div>

<p>RWD is ideal for web archivists because archiving the mobile pages for a site means archiving the desktop pages since they are one and the same.  However, the crawler needs to be aware that RWD is being used so it does not waste resources making additional requests with mobile user-agents.  </p>

<p>Some websites use the second publication method and dynamically serve different content depending on the user-agent in the HTTP request.  An example is shown in Figure 2 where a desktop browser (left) accessing <a href="http://www.cnn.com">www.cnn.com</a> is served radically different HTML and CSS than when a mobile browser (right) requests the same URL.  In this case, an archive wishing to capture both the desktop and mobile versions of the website must configure their web crawler to first crawl with a mobile user-agent and then crawl it again with a desktop user-agent.  The tools used to view the archived pages should also be made aware that the pages crawled with a mobile user-agent are designed specifically for a mobile browser (Kelly, Brunelle, Weigle, &amp; Nelson, <a href="03mccown.html#3">2013</a>).</p>

<div align="center">
<img src="mccown-fig2.png" alt="mccown-fig2" width="766" height="368" vspace="10" />
<p><i>Figure 2:  Accessing www.cnn.com on a desktop (left) and mobile device (right). The same URL produces different responses depending on the user agent.</i></p>
</div>

<p>The third publication method used to deliver mobile pages employs client-side or server-side redirection.  That is, a request for a desktop version of a web page using a user-agent for a mobile device is automatically redirected by the client or the server to the mobile version of the page.  Redirection most often takes place by the server returning a 302 HTTP status, but the client can also redirect using JavaScript.  On the left side of Figure 3, a request to <a href="https://www.whitehouse.gov">www.whitehouse.gov</a> by a desktop browser results in the desktop version of the website.  But if a mobile browser requests the same URL, the browser is redirected to <a href="https://m.whitehouse.gov">m.whitehouse.gov</a> as shown on the right side of Figure 3.</p>

<div align="center">
<img src="mccown-fig3.png" alt="mccown-fig3" width="756" height="375" vspace="10" />
<p><i>Figure 3:  Accessing www.whitehouse.gov on a desktop (left) and m.whitehouse.gov on a mobile device (right). The site employs server-side redirection to serve the correct content to mobile devices.</i></p>
</div>

<div class="divider-full">&nbsp;</div>
<h3>Crawling Mobile Pages</h3>

<p>All three mobile publication methods (RWD, different content from the same URL, and different URLs) are currently in widespread use.  Regardless of which method is used, most web masters want their desktop and mobile websites to be easily discovered and indexed by web search engines like Google, so they must take care to ensure their sites are crawlable. This also benefits web archivists since they typically use web crawling as the primary method to archive websites.</p>

<p>Google has led the way in providing guidelines on how desktop and mobile websites should be configured to properly handle requests from web crawlers (Google, <a href="03mccown.html#2">2014</a>).  For RWD sites, there is little for a webmaster to do; Google scans each page it crawls for media queries to determine if RWD techniques are being used.</p>

<p>When sites dynamically serve different HTML on the same URL to mobile user-agents (mobile publication method 2), Google recommends that web servers use the "<span class="code">Vary: User-Agent</span>" HTTP header to give a hint to web crawlers that different content will be served when the server gets requests from different user-agents.  The crawler will then need to make separate requests using standard desktop user-agent strings and user-agents for common mobile devices.</p>

<p>When separate URLs are used to serve desktop-only and mobile-only content (publication method 3), Google recommends that webmasters add annotations in the desktop and mobile pages to help their crawler discover corresponding URLs for the other platform.  Desktop pages are supposed to have <span class="code">&lt;link rel="alternate"&gt;</span> tags that point to the corresponding mobile URLs, and the mobile pages are to use <span class="code">&lt;link rel="canonical"&gt;</span> tags that point to the corresponding desktop URL.  </p>

<p>Web archiving tools like Heritrix are not currently configured to look for these markers in order to automatically discover and crawl mobile pages.  Web archivists instead must know <i>a priori</i> which of the mobile publication methods is being used so they can properly configure a web crawler to crawl a mobile site.  This can be challenging when there are a large number of sites to be crawled, and the archivist doesn't know if the sites have mobile-specific pages or not.  Ideally the crawler should be able to discover automatically if a website contains mobile pages, and to use the most efficient method to crawl them.  </p>

<p>We now discuss our work in creating a web service which allows web crawlers to be modified to crawl mobile sites with a minimum of code changes.</p>

<div class="divider-full">&nbsp;</div>
<h3>MobileFinder Web Service</h3>

<p>We first developed software to automatically detect mobile web pages when given the root URL of a website (Schnieder &amp; McCown, <a href="03mccown.html#6">2013</a>).  The software would send multiple HTTP requests with a variety of desktop and mobile user-agents and examine the responses to determine if a website was serving mobile pages and if so, which mobile publication method the website was using. </p>

<p>This software was later enhanced and incorporated into a REST-based web service called MobileFinder that would allow a client to discover information about a given seed URL.  For example, if MobileFinder were queried with the URL <a href="https://www.whitehouse.gov">www.whitehouse.gov</a>, the service would return the XML in Figure 4 which indicates that the URL <a href="https://m.whitehouse.gov">m.whitehouse.gov</a> should be used to access the mobile page and that this determination was due to the fact that the URL was discovered with a server-side redirect.  The user-agent string used by MobileFinder to discover the mobile page is also provided in the response; the user-agent can be supplied by the client, if so desired, when making the initial service request.</p>

<p class="code">
&lt;mobileFinder&gt;<br />
&nbsp; &nbsp; &lt;url&gt;<span class="blue">http://www.whitehouse.gov/&lt;/</span>url&gt;<br />
&nbsp; &nbsp; &lt;mobileUrl&gt;<span class="blue">http://m.whitehouse.gov/</span>&lt;/mobileUrl&gt;<br />
&nbsp; &nbsp; &lt;reason&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp;  &lt;code&gt;<span class="blue">300</span>&lt;/code&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;message&gt;<span class="blue">Server redirect</span>&lt;/message&gt;<br />
&nbsp; &nbsp; &lt;/reason&gt;<br />
&nbsp; &nbsp; &lt;useragent&gt;<span class="blue">Mozilla/5.0 (Android; Linux armv7l; rv:9.0) Gecko/20111216 Firefox/9.0 Fennec/9.0</span>&lt;/useragent&gt;<br />
&nbsp; &nbsp; &lt;timeAccessed&gt;<span class="blue">2014-04-20 15:23:42</span>&lt;/timeAccessed&gt;<br />
&lt;/mobileFinder&gt;
</p>

<p><i>Figure 4:  XML response from MobileFinder web service</i></p>

<p>MobileFinder caches its responses for a configurable amount of time so future requests for a particular URL don't have to be re-computed.  The HTTP responses are stored, as well as snapshots of the fully rendered web pages, using PhantomJS; this makes it easier for us to ensure MobileFinder is working properly.</p>

<div class="divider-full">&nbsp;</div>
<h3>Experiment</h3>

<p>We devised an experiment using MobileFinder to give us an idea as to how popular each of the three mobile publication methods were. We randomly selected 1,000 URLs from Alexa's top ranked 1M websites (Alexa's top 1,000,000 websites, <a href="03mccown.html#1">2014</a>).  Each of these URLs points to the root page of a website that receives a significant amount of web traffic as recorded by Alexa.  In April 2014, we fed each of the 1,000 URLs to MobileFinder and recorded the responses. </p>

<p>MobileFinder concluded that 62% of the randomly selected URLs had a mobile-specific root page. Figure 5 shows the three mobile publication methods used by the random selection of Alexa URLs. The majority of mobile pages (68%) used RWD techniques (method 1).  Twenty-four percent of mobile pages were served via the same URL to a mobile user agent (method 2), and only 8% of mobile pages were served from a different URL (method 3).</p>

<div align="center">
<img src="mccown-fig5.png" alt="mccown-fig5" width="399" height="222" class ="borderGray"vspace="10" />
<p><i>Figure 5:  Mobile publication methods used to discover mobile pages from randomly selected 1,000 URLs.</i></p>
</div>

<p>We also wanted to know what percentage of these websites were conforming to Google's guidelines by offering "markers" to crawlers to help them crawl mobile content.  In other words, we wanted to know if a website:</p>

<ol>
	<li style="padding-bottom: .5em;">used the "<span class="code">Vary: User-Agent</span>" HTTP header when dynamically serving different HTML on the same URL to mobile user-agents (mobile publication method 2),</li>

	<li>or used <span class="code">&lt;link rel="alternate"&gt;</span> and <span class="code">&lt;link rel="canonical"&gt;</span> tags when using separate URLs to serve desktop-only and mobile-only content (publication method 3).</li>
</ol>

<p>Of the 240 URLs that used method 2, only 27% of them also used the Vary header.  For the 80 sites using method 3, <i>none</i> of them used the <span class="code">&lt;link&gt;</span> tag to point to the corresponding mobile or desktop URL.  Although our sample is relatively small, this finding suggests that most websites are not following Google's guidelines, so archiving crawlers should not yet rely on these markers to discover mobile content.</p>

<div class="divider-full">&nbsp;</div>
<h3>Heritrix Mobile</h3>

<p>Heritrix is one of the premier web crawlers used by web archivists to crawl websites, but it does not have the built-in capability to discover mobile web pages.  Integrating the logic behind MobileFinder into Heritrix was an expensive proposition, so we instead made minimal modifications to Heritrix so it could use the MobileFinder web service.  We provided new configuration options so the Heritrix user could seed the crawler with the standard desktop URLs and indicate they wanted the mobile versions crawled as well as the desktop versions.  </p>

<p>When the modified Heritrix was configured to crawl mobile sites, it would take a seed URL and send it to MobileFinder to see if there were additional seeds that should be added to the initial seed list.  It also used the user-agent string provided by MobileFinder or provided in the configuration options to crawl the mobile pages.</p>

<p>We ran a limited experiment feeding Heritrix the URLs of 10 popular websites that were known to have mobile pages, and Heritrix was successfully able to crawl both the desktop and mobile sites.  The code modifications served as a proof-of-concept that an existing web crawler with no specialized logic for crawling the mobile web could be modified to use our web service to provide mobile web crawling capabilities.</p>

<div class="divider-full">&nbsp;</div>
<h3>Conclusion</h3>

<p>As the mobile web grows, web archivists will need tools to automate the discovery of this content so it can be captured.  We have created MobileFinder to aid archivists in this endeavor, and the MobileFinder web service code has been made publically available to others who would like to incorporate it into their web crawling tools (MobileFinder, <a href="03mccown.html#5">n.d.</a>).  In the small experiment we ran, we found that most mobile pages are created using responsive design techniques which benefits web archivists because it requires no additional crawling to capture both the desktop and mobile versions of a website.  This technique is likely to increase in popularity in the future (Summerfield, <a href="03mccown.html#7">2013</a>).  But the experiment also showed that some websites are serving mobile content at the same URL to mobile agents or using different URLs to serve mobile content; although these last two methods are not as popular as RWD, a web archiving tool needs to be aware of when these methods are being used so it doesn't miss finding mobile content.  </p>

<div class="divider-full">&nbsp;</div>
<h3>Acknowledgements</h3>

<p>This research was supported by the National Science Foundation (IIS 1008492). </p>

<div class="divider-full">&nbsp;</div>
<h3>References</h3>

<p><a name="1">[1]</a> <i><a href="http://s3.amazonaws.com/alexa-static/top-1m.csv.zip">Alexa's top 1,000,000 websites</a></i>. (2014).</p>

<p><a name="2">[2]</a> Google. (2014, Feb 11). <i><a href="https://developers.google.com/webmasters/smartphone-sites/details">Building Smartphone-Optimized Websites</a></i>. </p>

<p><a name="3">[3]</a> Kelly, M., Brunelle, J. F., Weigle, M. C., &amp; Nelson, M. L. (2013, Nov/Dec). <i>A Method for Identifying Personalized Representations in Web Archives</i>. D-Lib Magazine. <a href="https://developers.google.com/webmasters/smartphone-sites/details">http://doi.org/10.1045/november2013-kelly</a></p>

<p><a name="4">[4]</a> Marcotte, E. (2010, May 25). <i><a href="http://alistapart.com/article/responsive-web-design">Responsive Web Design</a></i>. A List Apart.</p>

<p><a name="5">[5]</a> <i><a href="http://www.harding.edu/fmccown/research/mobilefinder/">MobileFinder</a></i>. (n.d.).</p>

<p><a name="6">[6]</a> Schnieder, R., &amp; McCown, F. (2013). "First steps in archiving the mobile web: automated discovery of mobile websites". <i>Proceedings of the 13th ACM/IEEE-CS joint conference on Digital libraries</i> (pp. 53-56). New York: ACM.</p>

<p><a name="7">[7]</a> Summerfield, L. (2013, November 25). <i><a href="https://blog.hubspot.com/insiders/why-responsive-web-design">6 Undeniable Reasons Why The Future of Web Design is Responsive</a></i>. HubSpot.</p>


<div class="divider-full">&nbsp;</div>
<h3>About the Authors</h3>

<table border="0"  cellpadding="6" bgcolor="#FFFFFF"> 
<tr>
<td align="center"><img src="mccown.jpg" class="border" alt="mccown.jpg" width="100" height="143" /></td>
<td>
<p class="blue"><b>Frank McCown</b> is an associate professor of Computer Science at Harding University. He completed his Ph.D. at Old Dominion University where he focused on digital preservation of websites using the publicly available Web infrastructure (search engines and caches). His research interests include digital preservation, web crawling, and web search engines. </p>
</td>
</tr>
</table>

<div class="divider-full">&nbsp;</div>

<table border="0"  cellpadding="6" bgcolor="#FFFFFF"> 
<tr>
<td align="center"><img src="yargrough.jpg" class="border" alt="yargrough" width="100" height="143" /></td>
<td>
<p class="blue"><b>Monica Yarbrough</b> is a software engineer at Thales-Raytheon Systems. She graduated in 2014 from Harding University with a double major in Computer Science and Mathematics.</p>
</td>
</tr>
</table>

<div class="divider-full">&nbsp;</div>

<table border="0"  cellpadding="6" bgcolor="#FFFFFF"> 
<tr>
<td align="center"><img src="enlow.jpg" class="border" alt="enlow" width="100" height="161" /></td>
<td>
<p class="blue"<b>Keith Enlow</b> graduated from Harding University with a BS in Computer Engineering in 2014. He now works in Little Rock, AR as a software engineer for ABC Financial Services.
</p>
</td>
</tr>
</table>

<div class="divider-full">&nbsp;</div>

 <!-- Standard Copyright line here  -->

<div class="center">

<p class="footer">Copyright &copy; 2015 Frank McCown, Monica Yarbrough and Keith Enlow</p>  
  </div>
</td>
 </tr>
</table>

<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
    <td height="1" bgcolor="#2b538e"><img src="../../../img2/transparent.gif" alt="transparent image" width="100" height="2" /></td>
  </tr>
</table>

</td></tr></table>
</td></tr></table>
</form>

</body>
</html>