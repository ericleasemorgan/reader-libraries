<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="DOI" content="10.1045/november2013-kelly" />
<meta name="description" content="D-Lib Magazine" /> 
<meta name="keywords" content="Digital Archives, Personalized Representations, WARC" />
<link rel="metadata" href="11kelly.meta.xml" />
<link rel="metadata" href="../11bib.meta.bib" />
<link rel="metadata" href="../11ris.meta.ris" />
<link href="../../../style/style1.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="../../../favicon.ico" type="image/x-icon" />
<title>A Method for Identifying Personalized Representations in Web Archives</title>

<style type="text/css">

p.nospace
{
	font-size: 13px;
	padding-left: 6em;
	padding-right: 1em;
	margin-bottom: 0pt;
	text-align: left;
	}
	
p.nospaceQuote
{
	font-size: 13px;
	padding-left: 6em;
	padding-right: 6em;
	margin-bottom: 0pt;
	text-align: left;
	}

p.cellnospace
{
	font-size: 13px;
	padding-left: .5em;
	padding-right: 1em;
	margin-bottom: 0pt;
	text-align: left;
	}
</style>
</head>

<body>
<form action="https://www.dlib.org/cgi-bin/search.cgi" method="get">

<table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#2b538e">
<tr>
<td><img src="../../../img2/space.gif" alt="" width="10" height="2" /></td></tr>
</table>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="bottom" colspan="4" align="right" bgcolor="#4078b1">

<table border="0">
<tr>
<td align="right" class="search"><img src="../../../img2/search2.gif" alt="" width="51" height="20" align="middle" />Search D-Lib:</td>

<td>
<input type="text" name="words" value="" size="25" />
</td>

<td align="left" valign="middle">
<input type="submit" name="search" value="Go!" />
<input type="hidden" name="config" value="htdig" />
<input type="hidden" name="restrict" value="" />
<input type="hidden" name="exclude" value="" /> 
</td>
</tr>
</table>

</td></tr></table>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="bottom" colspan="4">

<table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#e04c1e" id="outer" summary="Main Table">
<tr>
<td><img src="../../../img2/space.gif" alt="" width="10" height="1" /></td></tr>
</table>

<table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#F6F6F6" id="bannertable">
  <tr>
    <td width="830" bgcolor="#4078b1" class="backBannerImage" align="left"><img src="../../../img2/D-Lib-blocks.gif" alt="D-Lib Magazine" width="450" height="100" border="0" /></td>
  </tr>
  <tr>
    <td width="830" bgcolor="#e04c1e"><img src="../../../img2/transparent.gif" alt="spacer" height="1" /></td>
  </tr>
  <tr>
    <td width="830" bgcolor="#eda443" align="left"><img src="../../../img2/magazine.gif" alt="The Magazine of Digital Library Research" width="830" height="24" border="0" /></td>
  </tr>
  <tr>
    <td width="830" bgcolor="#e04c1e"><img src="../../../img2/transparent.gif" alt="spacer" height="1" /></td>
   </tr>
</table>

<table width="100%" border="0" cellpadding="0" cellspacing="0" id="navtable">
  <tr>
    <td width="5" height="20" bgcolor="#2b538e">&nbsp;</td>
    <td width="24" height="20" bgcolor="#2b538e"><img src="../../../img2/transparent.gif" alt="" width="24" height="20" /></td>
    <td height="20" align="left" bgcolor="#2b538e" class="navtext" nowrap="nowrap"><a href="../../../dlib.html">HOME</a>&nbsp;|&nbsp;<a href="../../../about.html">ABOUT D-LIB</a>&nbsp;|&nbsp;<a href="../../../contents.html" class="navtext">CURRENT ISSUE</a>&nbsp;|&nbsp;<a href="../../../back.html">ARCHIVE</a>&nbsp;|&nbsp;<a href="../../../author-index.html">INDEXES</a>&nbsp;|&nbsp;<a href="../../../groups.html">CALENDAR</a>&nbsp;|&nbsp;<a href="../../author-guidelines.html">AUTHOR GUIDELINES</a>&nbsp;|&nbsp;<a href="https://www.dlib.org/mailman/listinfo/dlib-subscribers">SUBSCRIBE</a>&nbsp;|&nbsp;<a href="../../letters.html">CONTACT D-LIB</a></td>
    <td width="5" height="20" bgcolor="#2b538e">&nbsp;</td>
  </tr>
</table>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td width="55" height="1" bgcolor="#e04c1e"><img src="../../../img2/space.gif" alt="transparent image" width="1" height="1" /></td></tr>
</table>

<!-- CONTENT TABLE -->
<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
  <td>
 
<!-- BEGIN MAIN CONTENT TABLE -->

<table width="100%" border="0" cellspacing="0" cellpadding="10" bgcolor="#ffffff">
<tr>

<td width="10"><img src="../../../img2/space.gif" alt="" width="1" height="1" /></td>

<td valign="top"> 

<h3 class="blue-space">D-Lib Magazine</h3>
<p class="blue">November/December 2013<br />
Volume 19, Number 11/12<br />
<a href="../11contents.html">Table of Contents</a>
</p> 

<div class="divider-full">&nbsp;</div>

<h3 class="blue-space">A Method for Identifying Personalized Representations in Web Archives</h3>

<p class="blue">
Mat Kelly, Justin F. Brunelle, Michele C. Weigle, and Michael L. Nelson<br /> 
Old Dominion University<br />
{mkelly,jbrunelle,mweigle,mln}&#064;cs.odu.edu


<br /><br />doi:10.1045/november2013-kelly
 </p>

<div class="divider-full">&nbsp;</div>

<p class="blue"><a href="11kelly.print.html" class="fc">Printer-friendly Version</a></p>

<div class="divider-full">&nbsp;</div>

 <!-- Abstract or TOC goes here --> 

<h3 class="blue">Abstract</h3>

<p class="blue">
Web resources are becoming increasingly personalized &#151; two different users clicking on the same link at the same time can see content customized for each individual user. These changes result in multiple representations of a resource that cannot be canonicalized in Web archives. We identify characteristics of this problem by presenting a potential solution to generalize personalized representations in archives. We also present our proof-of-concept prototype that analyzes WARC (Web ARChive) format files, inserts metadata establishing relationships, and provides archive users the ability to navigate on the additional dimension of environment variables in a modified Wayback Machine. 
</p>

<!-- Article goes next --> 

<div class="divider-full">&nbsp;</div>
<h3>Introduction</h3>

<p>Personalized Web resources offer different representations [<a href="11kelly.html#8">8</a>] to different users based on the <span class="codelg">user-agent</span> string and other values in the HTTP request headers, GeoIP, and other environmental factors. This means Web crawlers capturing content for archives may receive representations based on the crawl environment which will differ from the representations returned to the interactive users. In summary, what we archive is increasingly different from what we as interactive users experience. </p>

<p>Web servers often provide lighter-weight representations to mobile browsers and the larger, full-feature representations to desktop browsers. Content viewed from a mobile browser is often different than content viewed from a traditional desktop browser [<a href="11kelly.html#9">9</a>, <a href="11kelly.html#28">28</a>]. This allows mobile devices to more easily and more quickly browse the Web. With the increasing prevalence of mobile browsers on the Web (50% - 68% of sites have mobile representations [<a href="11kelly.html#25">25</a>]), it is becoming important to capture these mobile representations of resources.  </p>

<p>Mobile pages often contain links to additional resources instead of embedded text and often reduce the number of images embedded in the page [<a href="11kelly.html#9">9</a>]. For example, the mobile representation of <a href="http://espn.go.com/">http://espn.go.com/</a> contains a section on ESPN Videos, while the desktop representation does not. When http://espn.go.com (the "original resource", identified by URI-R), is accessed, it redirects to <a href="http://m.espn.go.com">http://m.espn.go.com</a>, effectively giving two separate but related URI-R values that go into the archive. Subsequently, the URIs of their archived versions ("mementos", identified by URI-M) are indexed separately and the relationships between URI-Rs and URI-Ms is not presented to the user. To quantify the differences, the desktop representation contains 201 links, while the mobile representation contains only 58 links. These link sets are mutually exclusive, with the mobile representation linking to specific resources (such as box-scores and gamecasts) while the desktop representation links to higher-level resources (such as narratives that include box-scores and may have links to gamecasts). A user may review news articles or other content on a mobile device and be unable to recall the article in an archive. To capture and record the complete set of content at <a href="http://espn.go.com">http://espn.go.com</a>, each of these different representations, both mobile and desktop, need to be stored in Web archives.</p>

<p>Heritrix [<a href="11kelly.html#18">18</a>], the Internet Archive's crawler, offers archivists the ability to modify the <span class="codelg">user-agent</span> string to simulate a variety of browsers during archiving. Heritrix can crawl the mobile Web by setting its <span class="codelg">user-agent</span> string to a mobile browser. This can potentially lead to multiple representations of the same content being captured. If a desktop and mobile representation of the same resource are captured simultaneously, they will potentially collide in an archive.</p>

<p>As archiving expands into the mobile and other dynamic domains, archives will contain representations generated with a variety of environmental influences. Therefore, it is no longer sufficient to only navigate archives in the temporal dimension; archives must also provide users the opportunity to understand how a representation was crawled and navigate representations by their environmental influences. The factors influencing the representations seen by a crawler or user need to be recorded and presented to the user viewing the captured representation. </p>

<p>In this work, we explore the issue of personalized representations in Web archives, propose a framework to solve this problem, and present a proof-of-concept prototype that integrates personalized representations. We study live resources (identified by URI-Rs) seen by users and proposed methods for mapping archived representations called mementos (identified by URI-Ms) to a canonical representation. This prototype extends the description of mementos from only "when" they were archived (temporal dimension) to "where" and "how" (GeoIP and browser environments). Users can then browse between mementos based on temporal or environmental dimensions.</p>

<div class="divider-dot">&nbsp;</div>
<p><b>Personalized, Anonymous Representations</b> </p>

<p>Dynamic and personalized representations of Web 2.0 resources that are generated by technologies such as JavaScript can differ greatly depending on several factors. For example, some sites attempt to provide alternate representations by interpreting the <span class="codelg">user-agent</span> portion of the HTTP GET headers and use content negotiation to determine which representation to return. </p>

<p>We ran a pair of limited crawls of the cnn.com front page with Heritrix 3.1 and then accessed the mementos captured by Heritrix with a desktop Mac and an Android phone. The first crawl captured the cnn.com front page and specified a desktop version of the Mozilla browser as the <span class="codelg">user-agent</span> in the header string, as seen in Figure 1. The resulting Web ARChive (WARC) file [<a href="11kelly.html#26">26</a>] is viewed in a local installation of the Wayback Machine [<a href="11kelly.html#29">29</a>] and is shown in Figures 3(a) and 3(c). </p>

<p>The second crawl captured the cnn.com front page and specified an iPhone version of the Mozilla browser as the <span class="codelg">user-agent</span> string in the header, as seen in Figure 2. The resulting WARC, as viewed in the Wayback Machine, is shown in Figures 3(b) and 3(d). The mobile and desktop representations differ in archives, but their relationship as permutations of each other is neither recorded nor seen by users; a user of the Wayback Machine may not understand how these representations are generated since they are identified by the same URI-R. We refer to these differing representations of the same URI-R built with differing environments as <i>personalized representations</i> of the resource R. </p>

<p>The headers in Figures 1 and 2 reference the <span class="codelg">user-agent</span> string with http://yourdomain.com, which is a place holder for the URI for whom the crawl is being executed. For example, a crawl originating from Old Dominion University's Computer Science department would read http://www.cs.odu.edu/. </p>

<div style="padding-left:2em;">
<div class="code">
WARC/1.0<br />
WARC-Type: request<br /> 
WARC-Target-URI: http://www.cnn.com/<br /> 
WARC-Date: 2013-03-05T16:57:00Z<br /> 
WARC-Concurrent-To: &lt;urn:uuid:d338e6e5-6854-329b-adbb-de70a62e11f0&gt;<br /> 
WARC-Record-ID: &lt;urn:uuid:a3e3e726-97bc-3cca-af5e-d83dd1827e05&gt; <br />
Content-Type: application/http; msgtype=request <br />
Content-Length: 266<br /> 
<br />
GET / HTTP/1.0 <br />
User-Agent: Mozilla/5.0 (compatible; heritrix/3.1.0 +http://yourdomain.com) <br />
Connection: close<br /> 
Referer: http://cnn.com/ <br />
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 <br />
Host: www.cnn.com<br />
Cookie: CG=US:--:--; CG=US:--:-- 
</div>
</div>
<p style="padding-left:2em;">Figure 1. HTTP GET request from Heritrix with the desktop Mozilla <span class="codelg">user-agent</span>.</p>
<div class="divider-white">&nbsp;</div>
<div class="divider-gray">&nbsp;</div>
<div class="divider-white">&nbsp;</div>
<div style="padding-left:2em;">
<div class="code">
WARC/1.0<br />
WARC-Type: request <br />
WARC-Target-URI: http://www.cnn.com/ <br />
WARC-Date: 2013-03-05T16:38:08Z<br /> 
WARC-Concurrent-To: &lt;urn:uuid:cc7f75cc-fbaa-352a-8939-7cf5dd7792c7&gt; <br />
WARC-Record-ID: &lt;urn:uuid:fcc902ba-b327-3f43-a5a8-a29861c4fa7e&gt;<br /> 
Content-Type: application/http; msgtype=request<br /> 
Content-Length: 400<br /> 
<br />
GET / HTTP/1.0<br /> 
User-Agent: Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_0 like Mac OS X; en-us) <br />
AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8A293 Safari/ <br />
6531.22.7 (compatible; heritrix/3.1.0 +http://yourdomain.com)<br /> 
Connection: close<br /> 
Referer: http://cnn.com/ <br />
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 <br />
Host: www.cnn.com <br />
Cookie: CG=US:--:--; CG=US:--:-- 
</div>
</div>
<p style="padding-left:2em;">Figure 2. HTTP GET request from Heritrix with the iPhone Mozilla <span class="codelg">user-agent</span>.</p>

<p>These examples illustrate the potential for collisions of personalized representations with the same URI within Web archives. The potential exists for a mobile and a desktop representation of a page (or constituent and embedded resources) to be captured simultaneously, and therefore be indistinguishable. The live Web version of cnn.com is identified by http://www.cnn.com/ regardless of the <span class="codelg">user-agent</span> string and resulting representation. While the distinction between representations could be accomplished with the <span class="codelg">Vary</span> HTTP headers [<a href="11kelly.html#8">8</a>] which would alert caches and clients that the representation is personalized, CNN does not employ this header. The result is both the mobile and desktop versions use http://www.cnn.com/ for the URI-R values.</p>


<div align="center">
<table border="0" width="760" cellspacing="10">

<tr>
<td colspan="2">
<img src="kelly-fig3-ab.png" alt="kelly-fig3-ab" width="731" height="228" class="border" />
</td>
</tr>
<tr>
<td valign="top">
<p class="cellnospace"><i>Figure a: The cnn.com memento when crawled by Heritrix with a desktop Mozilla <span class="codelg">user-agent</span> accessed from a Mac.</i></p>
</td>
<td>
<p class="cellnospace"><i>Figure b: The cnn.com memento when crawled by Heritrix with an iPhone mozilla <span class="codelg">user-agent</span> accessed from a Mac.</i></p>
</td>
</tr>
</table>
</div>

<div class="divider-white">&nbsp;</div>

<div align="center">
<table border="0" width="760" cellspacing="10">

<tr>
<td colspan="2">
<img src="kelly-fig3-cd.png" alt="kelly-fig3-cd" width="744" height="666" class="border" />
</td>
</tr>
<tr>
<td valign="top">
<p class="cellnospace"><i>Figure c: The cnn.com memento when crawled by Heritrix with a desktop Mozilla <span class="codelg">user-agent</span> accessed from an Android Phone.</i></p>
</td>
<td>
<p class="cellnospace"><i>Figure d: The cnn.com memento when crawled by Heritrix with an iPhone Mozilla <span class="codelg">user-agent</span> accessed from an Android Phone.</i></p>
</td>
</tr>
</table>
</div>
<p class="indent">Figure 3: Mementos differ based on the parameters influencing the representations at crawl/capture time and the devices used to access the mementos.</p>

<p>Some sites provide local news and weather content depending on the GeoIP of the requester. For example, a user requesting http://www.nbcnews.com/ without an IP (via anonymous browser) will get news and weather from New York, NY with a request for the user to enter a local zip code (Figure 4b). Alternatively, a user requesting the page from Suffolk, Virginia will receive news and weather from neighboring Portsmouth, Virginia (Figure 4a). </p>

<div align="center">
<table border="0" width="760" cellspacing="10">
<tr>
<td valign="top">
<img src="kelly-fig4-a.png" alt="kelly-fig4-a" width="744" height="386" class="border" />
</td>
</tr>
<tr>
<td valign="top">
<p class="cellnospace"><i>Figure a: When browsing from Suffolk, VA, nbcnews.com shows headlines from Suffolk and Portsmouth, VA.</i></p>
</td>
</tr>

<tr>
<td valign="top">
<img src="kelly-fig4-b.png" alt="kelly-fig4-b" width="744" height="352" class="border" />
</td>
</tr>
<tr>
<td valign="top">
<p class="cellnospace"><i>Figure b. When browsing anonymously, nbcnews.com shows headlines from New York City, NY.</i></p>

</td>
</tr>
</table>
</div>
<p class="indent">Figure 4: The live versions of nbcnews.com differ based on the ability to interpret the GeoIP of the requester.</p>

<p>Figure 4 contains examples of personalized representations that pose problems for archives. The factors that influence the representations need to be documented, and users of archives should be able to not only browse mementos by time, but also by which representations are available. </p>

<p>The representations in Figure 4 demonstrate that environment variables do not have an impact limited to the <i>look and feel</i> or stylesheets of a resource. The content in the page (specifically, the local news stories and weather shown in the representations in Figure 4) changes depending on the environment, in this case the GeoIP. For this reason, we need to link to the original request, which is not referenced in HTTP response headers. </p>

<div class="divider-dot">&nbsp;</div>
<p><b>Related Work</b></p>
 
<p>The prevalence of dynamic Web 2.0 content has increased on the Web [<a href="11kelly.html#19">19</a>, <a href="11kelly.html#22">22</a>]. Several papers have identified the roles of JavaScript and other Web 2.0 technologies in a social and Web environment that is becoming increasingly unarchivable [<a href="11kelly.html#4">4</a>, <a href="11kelly.html#6">6</a>, <a href="11kelly.html#15">15</a>, <a href="11kelly.html#23">23</a>, <a href="11kelly.html#35">35</a>]. The mobile Web is also growing, with mobile devices contributing 18% of all Web traffic. [<a href="11kelly.html#13">13</a>] Additionally, the iPhone has a version of the Memento client [<a href="11kelly.html#30">30</a>], which has the potential to highlight the problems identified in this paper. </p>

<p>Several efforts have investigated how to capture dynamic content, although not with archival intent. These efforts, however, contribute greatly to the understanding of how dynamic resources can change on the client. Livshits et al. at Microsoft Research have performed extensive research in the monitoring and capture of client-side JavaScript [<a href="11kelly.html#10">10</a>&#151;<a href="11kelly.html#12">12</a>, <a href="11kelly.html#16">16</a>]. Most of this work has targeted debugging and security monitoring. Other works have included the interpretation of client-side state for crawling purposes [<a href="11kelly.html#1">1</a>, <a href="11kelly.html#5">5</a>, <a href="11kelly.html#14">14</a>]. Several efforts have focused on monitoring Web 2.0 resources on the client [<a href="11kelly.html#2">2</a>, <a href="11kelly.html#3">3</a>, <a href="11kelly.html#10">10</a>, <a href="11kelly.html#11">11</a>, <a href="11kelly.html#17">17</a>, <a href="11kelly.html#21">21</a>]. Other work has studied the capture of dynamic content for search engine optimization or search engine indexing [<a href="11kelly.html#24">24</a>]. </p>

<div class="divider-dot">&nbsp;</div>
<p><b>Identification Models</b></p> 

<p>It is important to understand the potential methods of identifying a memento that has personalized representations. There are three approaches that we considered: identification in the URI, content negotiation, and modifications to the client. </p>

<p>The first option would modify the URI that identifies an archived version of a resource to include information about the representation using HashBang (#!) URIs [<a href="11kelly.html#7">7</a>, <a href="11kelly.html#27">27</a>, <a href="11kelly.html#24">34</a>]. The information in the HashBang portion of the URI will identify the specific representation state, such as a mobile or desktop version.  However, this URI does not generalize and does not integrate with existing archives which index resources by URI.</p>

<p>The second option using content negotiation, similar to that done by the Memento Framework's Memento-Datetime [<a href="11kelly.html#20">20</a>, <a href="11kelly.html#31">31</a>&#151;<a href="11kelly.html#33">33</a>] would specify a URI-M to access and also specify the environment variables &#151; like <span class="codelg">user-agent</span> or GeoIP &#151; to use when picking a representation of the resource. However, this shifts the responsibility away from the server, requiring a specialized client. </p>

<p>The third option starts with a post-processing of the content captured by the crawler. The post-processor needs to provide metadata embedded in the memento that specifies the environment variables that went into creating the captured representation. The client that replays the representation needs to specify which representation is being shown to archive users. There are also navigation controls to allow for migration between representations captured with different environment variables, effectively giving the user the ability to navigate mementos based on the environment as well as traditional temporal parameters. </p>

<p>This is the most complex of the options provided, but is also the most extensible and effective. This method also requires the most modification of existing tools, and is likely only effective for a subset of archives until widespread adoption takes place. However, this provides the highest degree of information to be provided to and controlled by the users. </p>

<p>We selected this third option for implementation. We created a script to identify representations of resources that were generated with different environment variables, and modify WARC files to identify these different related representations as personalized representations. Then we modified a local installation of the Wayback Machine to allow for navigation between these personalized representations. The details of these efforts are explained in the remainder of this paper. </p>

<p>During consideration of the impact these changes will have on services, we kept the Memento Framework in mind [<a href="11kelly.html#32">32</a>]. We can modify Memento TimeMaps to include the relationships identified by Web archives. This effectively utilizes the services that already consume information from the archives to carry related representations from the archives to the users. We propose a multipart HTTP response that returns multiple related TimeMaps as part of a single request. When a user requests a TimeMap for http://www.example.com/, the archive discovers that there is a mobile representation, http://m.example.com/ of the resource and returns the TimeMap for the original representation and the mobile representation of example.com as a multipart message, with each separate TimeMap being sent as a separate part. </p>

<div class="divider-dot">&nbsp;</div>
<p><b>Identifying Personalized Representations </b></p> 

<p>We identified related representations by analyzing the WARC records' metadata and finding URIs that are derivations of one another (such as http://m.example.com/ and http://www.example.com/). We read the WARCs and from the <span class="codelg">warcinfo</span> record we extracted the <span class="codelg">user-agent</span> string and IP of the crawler for the WARC file's records. Then, we extracted each URI-R from the <span class="codelg">response</span> records and wrote the metadata records. </p>

<p>We wrote a post-processor script to discover personalized representations given a directory of WARC files, simulating the analysis of an entire local archive. The script reads the individual WARC records and extracts information about the mementos such as the <span class="codelg">user-agent</span> used, the crawler settings, and the URN of each record. We then used URI guessing and <span class="codelg">user-agent</span> analysis [<a href="11kelly.html#25">25</a>] to find related WARC records based on the extracted information. A URI such as http://m.example.com/ is treated as a personalized representation of http://example.com/. Similarly, http://www.cnn.com/ when accessed with a mobile browser (and associated <span class="codelg">user-agent</span> string) is treated as a personalized representation of http://www.cnn.com/ accessed with a desktop browser. </p>

<p>Once we identified the personalized representations of the resources, we created a metadata record for each personalized representation. In the record (shown in Figure 5), we used values to identify the <span class="codelg">user-agent</span> (<span class="codelg">http-header-user-agent</span>), submitting user's (or crawler's) IP address (<span class="codelg">contributor-ip</span>), the URN of the personalized representation of this resource (<span class="codelg">hasVersion</span>), and the geographic location of the contributor (<span class="codelg">geo-location</span>). </p>

<div style="padding-left:2em;">
<div class="code">
WARC/1.0<br /> 
WARC-Type: metadata<br /> 
WARC-Target-URI: http://www.cnn.com/ <br />
WARC-Date: 2013-03-05T16:57:00Z<br /> 
WARC-Concurrent-To: &lt;urn:uuid:d338e6e5-6854-329b-adbb-de70a62e11f0&gt; <br />
WARC-Record-ID: &lt;urn:uuid:d32e3c28-c5d0-3df2-b1f8-1ffb93a38865&gt;<br /> 
Content-Type: application/warc-fields <br />
Content-Length: 216<br /><br /> 

http-header-user-agent: Mozilla/5.0 (compatible; heritrix/3.1.0 <br />
+http://yourdomain.com) <br />
contributor-ip: 192.168.1.7 <br />
hasVersion: &lt;urn:uuid:cc7f75cc-fbaa-352a-8939-7cf5dd7792c7&gt; <br />
geo-location: multicast <br />
description:
</div>
</div>
<p style="padding-left:2em;">Figure 5. A sample metadata record that creates a link to the mobile representation of the desktop cnn.com resource.</p>

<p>The metadata records are inserted into the WARC file containing the personalized representation to identify all other representations of the resource available in the local archive. </p>

<p>The metadata record in Figure 5 identifies the WARC record for the desktop representation of cnn.com &#151; identified by <span class="codelg">urn:uuid:d338e6e5-6854-329b-adbb-de70a62e11f0</span> &#151; as a personalized representation of the mobile WARC record of cnn.com &#151; identified by <span class="codelg">urn:uuid:cc7f75cc-fbaa-352a-8939-7cf5dd7792c7</span> &#151; via the hasVersion value. It also records the <span class="codelg">user-agent</span> for the concurrent record and the IP address of the contributor &#151; in this case, the host running the Heritrix crawler &#151; via the <span class="codelg">contributor-ip</span> value. The geographic location of the IP address is also identified via the <span class="codelg">geo-location</span> value. In this record, the contributor uses a multicast address that cannot be mapped to a geographic location. This <span class="codelg">metadata</span> record can be expanded to include additional information about the representation being described through the <span class="codelg">description</span> value. </p>

<p>A complementing metadata record for the mobile representation of cnn.com identifies a link back to the desktop representation. This creates a bidirectional link for personalized representations so that each personalized representation identifies its counterpart. The examples in this paper have focused on 1-to-1 links between personalized representations (a single desktop and a single mobile representation). However, it is possible to have one-to-n relationships identified in the metadata (multiple desktop representations and multiple mobile representations). This would identify multiple personalized representations for a single resource. The post-processing of WARCs will add time and complexity to the process of ingesting WARCs into a repository. Since records in WARC files are not sorted, our post-processing script uses linear match between two sets of mementos, which runs in O(n<sup>2</sup>) time. The metadata records that we add only increase the WARC file size by approximately 1 KB per personalized representation. This is a small size increase for WARC files that range from hundreds of MB to two GB. </p>

<div class="divider-dot">&nbsp;</div>
<p><b>Recognizing personalized representations</b></p>  

<p>To replay the WARCs and provide a means to experience the relationship that we established between the mobile and desktop captures, we proposed an implementation consisting of a modification of Wayback Machine with an additional user interface element that allows the user to quickly toggle between the representations of the page captured. In this prototype (Figure 6), we provide a drop-down menu that displays all versions available for the current URI as established by the <span class="codelg">metadata</span> record (Figure 5) that we added to the WARC during post-processing. </p>

<div align="center">
<table border="0" width="760" cellspacing="10">
<tr>
<td valign="top">
<img src="kelly-fig6-a.png" alt="kelly-fig6-a" width="744" height="350" class="border" />
</td>
</tr>
<tr>
<td valign="top">
<p class="cellnospace"><i>Figure a. Mobile and desktop versions of the cnn.com front page exist in archives. The user has the option of which version to access.</i></p>
</td>
</tr>

<tr>
<td valign="top">
<img src="kelly-fig6-b.png" alt="kelly-fig6-b" width="744" height="346" class="border" />
</td>
</tr>
<tr>
<td valign="top">
<p class="cellnospace"><i>Figure b. Two source locations of the cnn.com front page are available from Washington, DC and Portsmouth, VA. The user has the option of which version to access.</i></p>
</td>
</tr>
</table>
<p class="nospaceQuote">Figure 6: Modifications to local Wayback allow for additional indexing and thus further reference for the URI currently being replayed to additional representations of the memento in the archive. In the Wayback toolbar we have provided a means for a user to quickly view other representations available for the page being replayed. The dropdowns are conditionally displayed based on whether additional representations are available.</p>
</div>

<p>By comparing the various <span class="codelg">user-agent</span> strings available in combination with the IP of the crawler, we can allow the user to choose which dimension (e.g., GeoIP and <span class="codelg">user-agent</span>) is most important (only the <span class="codelg">user-agent</span> dimension is shown) and retain that setting in traversing the available mementos. When a user selects an option in our modified UI, this setting is set in the user's browser as a cookie. This cookie is retrieved and the settings read to get a temporally adjacent memento from the TimeMap for the URI. Whereas replaying the archive is usually limited to the dimensions of <i>what</i> (URI) and <i>when</i> (Memento-Datetime), the UI extension adds the additional dimensions of <i>where</i> (GeoIP) and <i>how</i> (<span class="codelg">user-agent</span>). </p>

<div class="divider-full">&nbsp;</div>
<h3>Conclusion</h3>

<p>Current technologies introduce the opportunity for collisions in Web archives. The granularity of URI-Ms makes differentiating between representations impossible with the current configurations in archives. Temporal data alone is no longer sufficient to describe a memento; environmental variables must also be recorded and presented to the user, allowing the user to navigate between multiple dimensions of a representation. Users can then decide whether browsing on the temporal dimension or the environmental parameters is more suitable for their goals. </p>

<p>We present examples of the representation collision problem as well as a proof-of-concept solution. We use a post-processor to analyze WARCs and insert metadata identifying related representations of mementos. Through a modified Wayback Machine, we allow users to navigate personalized representations of mementos through their environmental parameters as well as on the temporal dimension. Our future work will focus on allowing users to nominate candidates for merging as related personalized representations, effectively providing a tool for crowd-sourcing the problem with personalized representations.</p>


<div class="divider-full">&nbsp;</div>
<h3>Acknowledgements</h3>

<p>This work is supported in part by NSF grant 1009392 and the Library of Congress.</p>

<div class="divider-full">&nbsp;</div>
<h3>References</h3>

<p><a name="1">[1]</a> K. Benjamin, G. von Bochmann, M. Dincturk, G.-V. Jourdan, and I. Onut. A Strategy for Efficient Crawling of Rich Internet Applications. In Web Engineering, Lecture Notes in Computer Science, pages 74&#151;89, 2011. <a href="https://doi.org/10.1007/978-3-642-22233-7_6">http://doi.org/10.1007/978-3-642-22233-7_6</a></p>

<p><a name="2">[2]</a> E. Benson, A. Marcus, D. Karger, and S. Madden. Sync Kit: A Persistent Client-Side Database Caching Toolkit for Data Intensive Websites. In Proceedings of the 19th international conference on World Wide Web, WWW '10, 2010. <a href="https://doi.org/10.1145/1772690.1772704">http://doi.org/10.1145/1772690.1772704</a></p>

<p><a name="3">[3]</a> S. Chakrabarti, S. Srivastava, M. Subramanyam, and M. Tiwari. Memex: A Browsing Assistant for Collaborative Archiving and Mining of Surf Trails. In Proceedings of the 26th VLDB Conference, 26th VLDB, 2000. <a href="http://dl.acm.org/citation.cfm?id=758378">http://dl.acm.org/citation.cfm?id=758378</a></p>

<p><a name="4">[4]</a> E. Crook. Web Archiving in a Web 2.0 World. In Proceedings of the Australian Library and Information Association Biennial Conference, pages 1&#151;9, 2008. <a href="https://doi.org/10.1108/02640470910998542">http://doi.org/10.1108/02640470910998542</a></p>

<p><a name="5">[5]</a> C. Duda, G. Frey, D. Kossmann, and C. Zhou. AjaxSearch: Crawling, Indexing and Searching Web 2.0 Applications. Proc. VLDB Endow., 1:1440&#151;1443, August 2008. <a href="http://dl.acm.org/citation.cfm?id=1454195">http://dl.acm.org/citation.cfm?id=1454195</a></p>

<p><a name="6">[6]</a> B. Fleiss. <a href="https://web.archive.org/web/20130130124402/http://www.bkv.com/redpapers-media/SEO-in-the-Web-2.0-Era.pdf">SEO in the Web 2.0 Era: The Evolution of Search Engine Optimization</a>, 2007. </p>

<p><a name="7">[7]</a> Google. <a href="https://support.google.com/webmasters/bin/answer.py?hl=en&amp;answer=174992">AJAX crawling: Guide for webmasters and developers</a>, 2013.</p>

<p><a name="8">[8]</a> I. Jacobs and N. Walsh. <a href="http://www.w3.org/TR/webarch/">Architecture of the World Wide Web, Volume One</a>. Technical Report W3C Recommendation 15 December 2004, W3C, 2004.</p>

<p><a name="9">[9]</a> A. Jindal, C. Crutchfield, S. Goel, R. Kolluri, and R. Jain. The Mobile Web is Structurally Different. In INFOCOM Workshops 2008, IEEE, pages 1&#151;6, 2008. <a href="https://doi.org/10.1109/INFOCOM.2008.4544648">http://doi.org/10.1109/INFOCOM.2008.4544648</a></p>

<p><a name="10">[10]</a> E. Kiciman and B. Livshits. AjaxScope: A Platform for Remotely Monitoring the Client-Side Behavior of Web 2.0 Applications. In The 21st ACM Symposium on Operating Systems Principles, SOSP '07, 2007. <a href="https://doi.org/10.1145/1294261.1294264">http://doi.org/10.1145/1294261.1294264</a></p>

<p><a name="11">[11]</a> K.Vikram, A. Prateek, and B. Livshits. <a href="http://research.microsoft.com/pubs/101931/ccs09.pdf">Ripley: Automatically Securing Web 2.0 Applications Through Replicated Execution</a>. In Proceedings of the Conference on Computer and Communications Security, November 2009.</p>

<p><a name="12">[12]</a> B. Livshits and S. Guarnieri. <a href="http://research.microsoft.com/pubs/118310/paper.pdf">Gulfstream: Incremental Static Analysis for Streaming JavaScript Applications</a>. Technical Report MSR-TR-2010-4, Microsoft, January 2010.</p>

<p><a name="13">[13]</a> T. Macchi. <a href="http://www.bluetrainmobile.com/blog/2012-mobile-traffic-report/#.UcZd59dLuJM">2012 Mobile Traffic Report: How Much Did Mobile Traffic Increase in 2013?</a>, January 2013.</p>

<p><a name="14">[14]</a> A. Mesbah, E. Bozdag, and A. van Deursen. Crawling Ajax by Inferring User Interface State Changes. In Web Engineering, 2008. ICWE '08. Eighth International Conference on, pages 122 &#151;134, July 2008. <a href="https://doi.org/10.1109/ICWE.2008.24">http://doi.org/10.1109/ICWE.2008.24</a></p>

<p><a name="15">[15]</a> A. Mesbah and A. van Deursen. An Architectural Style for Ajax. Software Architecture, Working IEEE/IFIP Conference on, pages 1&#151;9, 2007. <a href="https://doi.org/10.1109/WICSA.2007.7">http://doi.org/10.1109/WICSA.2007.7</a></p>

<p><a name="16">[16]</a> L. A. Meyerovich and B. Livshits. ConScript: Specifying and Enforcing Fine-Grained Security Policies for JavaScript in the Browser. IEEE Symposium on Security and Privacy, 0:481&#151;496, 2010. <a href="https://doi.org/10.1109/SP.2010.36">http://doi.org/10.1109/SP.2010.36</a></p>

<p><a name="17">[17]</a> J. Mickens, J. Elson, and J. Howell. <a href="http://research.microsoft.com/pubs/120937/mugshot.pdf">Mugshot: Deterministic Capture and Replay for JavaScript Applications</a>. In Proceedings of the 7th USENIX conference on Networked systems design and implementation, NSDI'10, 2010.</p>

<p><a name="18">[18]</a> G. Mohr, M. Kimpton, M. Stack, and I. Ranitovic. <a href="http://iwaw.europarchive.org/04/Mohr.pdf">Introduction to Heritrix, an archival quality web crawler</a>. In Proceedings of the 4th International Web Archiving Workshop (IWAW04), September 2004.</p>

<p><a name="19">[19]</a> K. C. Negulescu. <a href="http://www.digitalpreservation.gov/meetings/documents/ndiipp10/NDIIPP072110FinalIA.ppt">Web Archiving @ the Internet Archive</a>. Presentation at the 2010 Digital Preservation Partners Meeting, 2010.</p>

<p><a name="20">[20]</a> M. L. Nelson. <a href="https://ws-dl.blogspot.com/2010/11/2010-11-05-memento-datetime-is-not-last.html">Memento-Datetime is not Last-Modified</a>, 2011.</p>

<p><a name="21">[21]</a> &#064;NesbittBrian. <a href="http://nesbot.com/2011/10/16/play-framework-sample-app-JWebUnit-synchronous-ajax">Play framework sample application with JWebUnit and synchronous Ajax</a>. </p>

<p><a name="22">[22]</a> NetPreserver.org. <a href="http://netpreserve.org/sites/default/files/resources/OverviewFutureWebWorkshop.pdf">IIPC Future of the Web Workshop &#151; Introduction &amp; Overview</a>, 2012.</p>

<p><a name="23">[23]</a> M. E. Pierce, G. Fox, H. Yuan, and Y. Deng. <a href="http://ebooks.iospress.nl/publication/26294">Cyberinfrastructure and Web 2.0. In High Performance Computing and Grids in Action</a>, pages 265&#151;287, 2008.</p>

<p><a name="24">[24]</a> S. Raghavan and H. Garcia-Molina. <a href="http://ilpubs.stanford.edu:8090/725/">Crawling the Hidden Web</a>. Technical Report 2000-36, Stanford InfoLab, 2000.</p>

<p><a name="25">[25]</a> R. Schneider and F. McCown. First Steps in Archiving the Mobile Web: Automated Discovery of Mobile Websites. In JCDL '13: Proceedings of the 13th ACM/IEEE-CS Joint Conference on Digital Libraries. <a href="https://doi.org/10.1145/2467696.2467735">http://doi.org/10.1145/2467696.2467735</a></p>

<p><a name="26">[26]</a> Technical Committee ISO/TC 46. <a href="http://bibnum.bnf.fr/warc/WARC_ISO_28500_version1_latestdraft.pdf">The WARC File Format (ISO 28500)</a>, 2008.</p>

<p><a name="27">[27]</a> J. Tennison. <a href="http://www.jenitennison.com/blog/node/154">Hash uris</a>, 2011.</p>

<p><a name="28">[28]</a> P. Timmins, S. McCormick, E. Agu, and C. Wills. Characteristics of Mobile Web Content. In 1st IEEE Workshop on Hot Topics in Web Systems and Technologies, 2006, HOTWEB '06, pages 1&#151;10, 2006. <a href="https://doi.org/10.1109/HOTWEB.2006.355263">http://doi.org/10.1109/HOTWEB.2006.355263</a></p>

<p><a name="29">[29]</a> B. Tofel. '<a href="http://iwaw.europarchive.org/07/IWAW2007_tofel.pdf">Wayback' for Accessing Web Archives</a>. In Proceedings of the 7th International Web Archiving Workshop (IWAW07), 2007.</p>

<p><a name="30">[30]</a> H. Tweedy, F. McCown, and M. L. Nelson. A Memento Web Browser for iOS. In JCDL '13: Proceedings of the 13th ACM/IEEE-CS Joint Conference on Digital Libraries. <a href="https://doi.org/10.1145/2467696.2467764">http://doi.org/10.1145/2467696.2467764</a></p>

<p><a name="31">[31]</a> H. Van de Sompel, M. L. Nelson, and R. Sanderson. <a href="http://www.mementoweb.org/guide/rfc/ID/">HTTP framework for time-based access to resource states &#151; Memento draft-vandesompel-memento-06</a>, 2013.</p>

<p><a name="32">[32]</a> H. Van de Sompel, M. L. Nelson, R. Sanderson, L. L. Balakireva, S. Ainsworth, and H. Shankar. <a href="http://arxiv.org/abs/0911.1112">Memento: Time Travel for the Web</a>. Technical Report arXiv:0911.1112, 2009.</p>

<p><a name="33">[33]</a> H. Van de Sompel, R. Sanderson, M. L. Nelson, L. L. Balakireva, H. Shankar, and S. Ainsworth. <a href="http://arxiv.org/abs/1003.3661">An HTTP-Based Versioning Mechanism for Linked Data</a>. In Proceedings of the Linked Data on the Web Workshop (LDOW 2010), 2010. (Also available as arXiv:1003.3661). </p>

<p><a name="34">[34]</a> W3C staff and working group participants. <a href="http://www.w3.org/blog/2011/05/hash-uris/">Hash URIs</a>, December 2011. </p>

<p><a name="35">[35]</a> D. F. Zucker. What Does Ajax Mean for You? Interactions, 14:10&#151;12, September 2007. <a href="https://doi.org/10.1145/1288515.1288523">http://doi.org/10.1145/1288515.1288523</a></p>

<div class="divider-full">&nbsp;</div>
<h3>About the Authors</h3>

<table border="0"  cellpadding="6" bgcolor="#FFFFFF"> 
<tr>
<td align="center"><img src="kelly.png" class="border" alt="Photograph" width="100" height="100" /></td>
<td>
<p class="blue"><b>Mat Kelly</b> is a PhD student of Computer Science at Old Dominion University. He is employed by NASA Langley Research Center through Science Systems and Application, Incorporated (SSAI) of Hampton, Virginia; Blade Agency of Gainesville, Florida and Old Dominion University Research Foundation of Norfolk, Virginia. His expertise lies in finding new ways to reinvent the wheel, introducing needless complication and overcoming data protection schemes. He is a Scorpio and is happily married with two dogs and resides in Portsmouth, Virginia.</p>
</td>
</tr>
</table>
<div class="divider-full">&nbsp;</div>

<table border="0"  cellpadding="6" bgcolor="#FFFFFF"> 
<tr>
<td align="center"><img src="brunelle.png" class="border" alt="Photograph" width="100" height="102" /></td>
<td>
<p class="blue"><b>Justin F. Brunelle</b> is a Computer Science graduate student at Old Dominion University. His work involves the impact of multi-state, client-side representations on the archives and how it is preserved in the archives. Justin is also a Senior Application Developer at The MITRE Corporation where he performs research in the cloud computing and big data domains. More information on Justin can be found at <a href="http://www.justinfbrunelle.com/">http://www.justinfbrunelle.com/</a>.</p>
</td>
</tr>
</table>
<div class="divider-full">&nbsp;</div>


<table border="0"  cellpadding="6" bgcolor="#FFFFFF"> 
<tr>
<td align="center"><img src="weigle.png" class="border" alt="Photograph" width="100" height="119" /></td>
<td>
<p class="blue"><b>Michele C. Weigle</b> is an Associate Professor of Computer Science at Old Dominion University. Her research interests include digital preservation, web science, information visualization, and mobile networking. She received her PhD in computer science from the University of North Carolina at Chapel Hill.</p>
</td>
</tr>
</table>
<div class="divider-full">&nbsp;</div>


<table border="0"  cellpadding="6" bgcolor="#FFFFFF"> 
<tr>
<td align="center"><img src="nelson.jpg" class="border" alt="Photograph" width="100" height="160" /></td>
<td>
<p class="blue"><b>Michael L. Nelson</b> is an associate professor of computer science at Old Dominion University. Prior to joining ODU, he worked at NASA Langley Research Center from 1991-2002. He is a co-editor of the OAI-PMH, OAI-ORE, Memento, and ResourceSync specifications. His research interests include repository-object interaction and alternative approaches to digital preservation. More information about Dr. Nelson can be found at: <a href="http://www.cs.odu.edu/~mln/">http://www.cs.odu.edu/~mln/</a>.</p>
</td>
</tr>
</table>
<div class="divider-full">&nbsp;</div>


 <!-- Standard Copyright line here  -->

<div class="center">


<p class="footer">Copyright &copy; 2013 Mat Kelly, Justin F. Brunelle, Michele C. Weigle and Michael L. Nelson</p>  
  </div>
</td>
 </tr>
</table>

<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
    <td height="1" bgcolor="#2b538e"><img src="../../../img2/transparent.gif" alt="transparent image" width="100" height="2" /></td>
  </tr>
</table>

</td></tr></table>
</td></tr></table>
</form>

</body>
</html>