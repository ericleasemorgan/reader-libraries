<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Article">
<head> 
<script type="text/javascript" src="../../../js/ga.js"></script>
<style type="text/css">

.topLeft	{	border-top: 1px solid #000000;
				border-left: 1px solid #000000;
				padding: 10px;
				 vertical-align: text-top;			
			}
			
.topLeftThick	{	border-top: 2px solid #000000;
				border-left: 1px solid #000000;
				 vertical-align: text-top;
			}
	        
.topLeftRight	{border-top: 1px solid #000000;
	         		  border-left: 1px solid #000000;
	         		  border-right: 1px solid #000000;
	         		  padding: 10px;
	         		  vertical-align: text-top;
			}

.topLeftRightThick	{border-top:  2px solid #000000;
	         		  border-left: 1px solid #000000;
	         		  border-right: 1px solid #000000;
	         		  vertical-align: text-top;
			}

.topLeftBottom	{border-top: 1px solid #000000;
	         			  border-left: 1px solid #000000;
	         			  border-bottom: 1px solid #000000;
	         			  padding: 10px;
	         			 vertical-align: text-top;
	        			}        
	     
.all	{border-top: 1px solid #000000;
	      border-left: 1px solid #000000;
	      border-bottom: 1px solid #000000;
	      border-right: 1px solid #000000;
	      padding: 10px;
	      vertical-align: text-top;
	     }	

table.plain {border-collapse: separate;
					border-spacing: 0px;
					margin-left: auto;
					margin-right: auto;					
					}
td.plain {padding: 6px;
			vertical-align: text-top;
					}

table.author {border-collapse: separate;
					border-spacing: 6px;
					}
td.authors {padding: 6px;
					}

li:not(:last-child) {
	margin-bottom: .5em;
	}
				
div.center {margin-left: auto; margin-right: auto;
	}

</style>
<meta charset="utf-8" />
<meta id="DOI" content="10.1045/november16-bullen" />
<meta itemprop="datePublished" content="2016-11-15" />
<meta id="description" content="D-Lib Magazine Article" /> 
<meta id="keywords" content="CONTENTdm, XTF" />
<link rel="metadata" href="11bullen.meta.xml" />
<link rel="metadata" href="../11bib.meta.bib" />
<link rel="metadata" href="../11ris.meta.ris" />
<link href="../../../style/style1.css" rel="stylesheet" type="text/css" />

<title>A Doomsday Scenario: Exporting CONTENTdm Records to XTF</title>
</head>

<body>
<form action="https://www.dlib.org/cgi-bin/search.cgi" method="get">

<div style="height:2px;background:#2b538e"></div>
<div style="height:4px;background:#4078b1"></div>

<div style="height:30px;background:#4078b1">

<span style="color: #ffffff; font-size: 12px; float: right; margin-right: 10px;">Search D-Lib:
<input type="text" id="words" value="" size="25" />
<input type="submit" id="search" value="Go!" />
<input type="hidden" id="config" value="htdig" />
<input type="hidden" id="restrict" value="" />
<input type="hidden" id="exclude" value="" />
</span>
</div>

<div style="height:1px;background:#e04c1e"></div>
<div style="height:1px;background:#4078b1"></div>
<div style="height:1px;background:#abc0d6"></div>
<div style="height:2px;background:#4078b1"></div>
<div style="height:1px;background:#abc0d6"></div>
<div style="height:1px;background:#2b538e"></div>
<div style="height:92px;background:#4078b1"><img width="450" height="90" alt="D-Lib-blocks5" src="../../../img2/D-Lib-blocks5.gif">
</div>
<div style="height:1px;background:#abc0d6"></div>
<div style="height:2px;background:#4078b1"></div>
<div style="height:1px;background:#abc0d6"></div>
<div style="height:2px;background:#e04c1e"></div>
<div style="height:24px;background:#eda443"><img src="../../../img2/magazine5.gif" alt="The Magazine of Digital Library Research" width="830" height="24" /></div>
<div style="height:1px;background:#e04c1e"></div>
<div style="height:28px;background:#2b538e">
<div id="navtable">
<table>
<tr><td class="navtext"><img src="../../../img2/transparent.gif" alt="" width="20" height="20" /><a href="../../../dlib.html">HOME</a>&nbsp;|&nbsp;<a href="../../../about.html">ABOUT D-LIB</a>&nbsp;|&nbsp;<a href="../../../contents.html" class="navtext">CURRENT ISSUE</a>&nbsp;|&nbsp;<a href="../../../back.html">ARCHIVE</a>&nbsp;|&nbsp;<a href="../../../author-index.html">INDEXES</a>&nbsp;|&nbsp;<a href="../../../groups.html">CALENDAR</a>&nbsp;|&nbsp;<a href="../../author-guidelines.html">AUTHOR GUIDELINES</a>&nbsp;|&nbsp;<a href="https://www.dlib.org/mailman/listinfo/dlib-subscribers">SUBSCRIBE</a>&nbsp;|&nbsp;<a href="../../letters.html">CONTACT D-LIB</a></td></tr></table></div></div>
<div style="height:4px;background:#2b538e"></div>
<div style="height:1px;background:#e04c1e"></div>

<div style="padding-left: 2.5em; padding-top: 1em;">

<h3 class="blue-space">D-Lib Magazine</h3>
<p class="blue">November/December 2016<br />
Volume 22, Number 11/12<br />
<a href="../11contents.html">Table of Contents</a>
</p> 

<div class="divider-full">&nbsp;</div>

<h3 class="blue-space">A Doomsday Scenario: Exporting CONTENTdm Records to XTF</h3>

<p class="blue">
Andrew Bullen<br />
Illinois State Library<br />
abullen&#064;ilsos.net

<br /><br />DOI: 10.1045/november2016-bullen
 </p>

<div class="divider-full">&nbsp;</div>

<p class="blue"><a href="11bullen.print.html" class="fc">Printer-friendly Version</a></p>

<div class="divider-full">&nbsp;</div>
 <!-- Abstract or TOC goes here --> 

<h3 class="blue">Abstract</h3>

<p class="blue">
Due to the challenging state budget situation in Illinois, Andrew Bullen of the Illinois State Library was asked to explore how the existing CONTENTdm collections could be migrated to another platform should the State Library be unable to pay its bill for its existing services. Andrew chose XTF, a resource at hand and a logical candidate for undertaking the transfer, and methods that were already available that would allow rapid migration. He describes in detail the process of transferring three collections that represented a reasonable cross section of Illinois Digital Archives content from CONTENTdm to XTF, and offers an evaluation of his test migration approach and lessons learned.</p>

<!-- Article goes next --> 

<div class="divider-full">&nbsp;</div>
<h3>1 Introduction</h3>

<p>Residents of Illinois and Illinois state government employees are living in interesting budgetary times. As of this writing, the Governor and the Illinois State Legislature have yet to pass a budget for FY2016. There is a stopgap budget passed for part of FY2017; however, the budget only covers some expenses until the November 2016 elections. What happens after that is unknown. Naturally, we are concerned about being able to support existing services to Illinois libraries. </p>

<p>One of the main services that we provide to Illinois libraries is the <a href="http://www.idaillinois.org/">Illinois Digital Archives (IDA)</a>, a repository for the digital collections of libraries and cultural institutions in the State of Illinois, based on <a href="http://www.oclc.org/en-US/contentdm.html">CONTENTdm</a>. In light of budget concerns, we thought it prudent to explore what would happen to the collections on IDA if we could not pay our subscription fee to OCLC and were forced to cancel the service. There are currently 156 disparate collections in IDA and more than 468,000 objects in these collections, a fairly substantial instance of CONTENTdm. How could we replace it if we had to cancel our CONTENTdm subscription and convert these collections to another platform? I was charged with investigating our options.</p>

<div class="divider-full">&nbsp;</div>
<h3>2 My Parameters</h3>

<p>Simulating a budget crisis, I had to use resources we would have on hand. Similarly, I chose methods that would allow me to quickly migrate the collections onto a new platform. This limited my tools to PHP, Perl, and a previously installed instance of <a href="http://xtf.cdlib.org/">XTF</a>. We use XTF as the platform for our digital collection of <a href="http://www.ediillinois.org/">deposited electronic Illinois state documents</a>. I am more comfortable with Perl than PHP so I defaulted to that as my primary programming language.</p>

<p>XTF is a useful choice for Illinois libraries as it is also used by the <a href="http://chicagocollections.org/">Chicago Collections Consortium</a>. There is a large and dedicated users group in Chicago that could lend assistance or implementation advice if needed.</p>

<div class="divider-full">&nbsp;</div>
<h3>3 The Test Data</h3>

<p>Since we are a hosted site, I asked CONTENTdm Support to tar together the images of three collections and place them on an FTP site. These collections, listed below, were selected because I was familiar with the metadata and they represented a reasonable cross section of IDA collections.</p>

<ol>
	<li>A simple collection of images (one to one relationship of metadata to object) &#151; <a href="http://www.idaillinois.org/cdm/search/collection/linl/page/1">The Springfield Aviation Company Collection</a>.</li>

	<li>A simple collection of compound objects (a flat, regular, one to many collection of metadata to objects) &#151; <a href="http://www.idaillinois.org/cdm/search/collection/p16614coll23/page/1">The Music of the First World War</a>.</li>

	<li>A complex collection of compound objects (variable, one to many collection of metadata to objects) &#151; <a href="http://www.idaillinois.org/cdm/search/collection/isl/page/1">The Illinois State Library's General Collection</a>.</li>
</ol>

<p>OCLC staff provided me with three tarballs of these collections. I exported the metadata in each of these collections though the CONTENTdm administration site as custom XML files. I chose this method so I could edit the element names to make the resulting records easier to manipulate:</p>

<div style="text-align: center;">
<img style="margin: 10px 0px;" src="bullen-fig1.png" alt="bullen-fig1" width="666" height="869" class="borderGray" />
</div>
<div style="height:12px;background:#ffffff"></div>

<div class="divider-full">&nbsp;</div>
<h3>4 First Conversion</h3>

<p>The Springfield Aviation Company Collection was my first target. I wrote a Perl program to parse the exported monolithic metadata file into separate XML records (<a href="11bullen.html#appendix1">Appendix One</a>).</p>

<p>The resulting XML records were transformed into: </p>

<div style="height:12px;background:#ffffff"></div>
<div class="code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;<br />
&lt;metadata&gt;<br />
&nbsp;&nbsp;&lt;record&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;xmlFileName&gt;11&lt;/xmlFileName&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;cdmCode&gt;linl&lt;/cdmCode&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;Navy V-5 elementary class&lt;/title&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;creator&gt;&lt;/creator&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;contributor&gt;&lt;/contributor&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;subjectLCSH&gt;Air pilots--United States&lt;/subjectLCSH&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;subjectLocal&gt;Springfield Aviation Company; Municipal Airport&lt;/subjectLocal&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;browseTopic&gt;Transportation &amp; Communication; Wars &amp; Military&lt;/browseTopic&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;Students (left to right) DeWall, Spindler, Weber, Allender, Shroyer, Malerick, Broughton, Fisherkeller, Downes, at Municipal Airport, Springfield, Illinois. [Summer 1942]&lt;/description&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;dateOriginal&gt;1942&lt;/dateOriginal&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;date&gt;1942&lt;/date&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;timePeriod&gt;1940s (1940-1949)&lt;/timePeriod&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;source&gt;&lt;/source&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;isPartOf&gt;Sangamon Valley Collection, Southwest Airport Collection, Box 2, Folder 4&lt;/isPartOf&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;language&gt;&lt;/language&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;geographicCoverage&gt;United States--Illinois--Sangamon County--Springfield&lt;/geographicCoverage&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;contributingInstitution&gt;Lincoln Library&lt;/contributingInstitution&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;rights&gt;Contact Lincoln Library, 327 South 7th Street, Springfield, Illinois, (217) 753-4900 for information concerning copyright restrictions applying to the use or reproduction of this image.&lt;/rights&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;dateDigital&gt;2004-06-10&lt;/dateDigital&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;identifier&gt;llsa0012&lt;/identifier&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;type&gt;Image&lt;/type&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;format&gt;Photograph&lt;/format&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;digitalFormat&gt;JPEG&lt;/digitalFormat&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;digitizationSpecifications&gt;TIFF images created with CanoScan 9900F scanner, 300 DPI, grayscale, ArcSoft Photo Studio 5&lt;/digitizationSpecifications&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;transcript&gt;&lt;/transcript&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;tag&gt;&lt;/tag&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;collectionName&gt;Springfield Aviation Company Collection&lt;/collectionName&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;itemURL&gt;http://cdm16614.contentdm.oclc.org:80/cdm/ref/collection/linl/id/28&lt;/itemURL&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;OCLCNumber&gt;&lt;/OCLCNumber&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;dateCreated&gt;2004-11-15&lt;/dateCreated&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;dateModified&gt;2009-12-02&lt;/dateModified&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;cdmNumber&gt;28&lt;/cdmNumber&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;cdmFileName&gt;29.jpg&lt;/cdmFileName&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;cdmFilePath&gt;/linl/image/29.jpg&lt;/cdmFilePath&gt;<br />
&nbsp;&nbsp;&lt;/record&gt;<br />
&lt;/metadata&gt;<br />
</div>
<div style="height:12px;background:#ffffff"></div>

<p>I then created the necessary indexing rules in XTF to create a viable index of the collection and indexed the XML records.  The XTF instance can be found <a href="http://www.finditillinois.org:8080/xtf/search?browse-title=first;sort=title">here</a>. The thumbnails in the brief record display are found in the <span class="codelg">&lt;cdmFileName&gt;</span> element. The JPEG icon file itself is found by simply adding "icon" to the <span class="codelg">&lt;cdmFileName&gt;</span> value, icon29.jpg in the above example.</p>

<p>I opted to build Perl programs for the full record display. The full record is linked to the title element display in the brief record (<a href="11bullen.html#appendix2">Appendix Two</a>). The information I pass to the full record Perl program is the XML record number and the collection name. </p>

<div style="text-align: center;">
<img style="margin: 10px 0px;" src="bullen-fig2.png" alt="bullen-fig2" width="718" height="548" class="borderGray" />
</div>
<div style="height:12px;background:#ffffff"></div>

<p>The full record is built in two parts. The first part is a simple text file, named <span class="codelg">{collection name}.txt</span>, which translates the XML element names into more descriptive text.  <span class="codelg">linl.txt</span> consists of:</p>

<div class="code">
&nbsp;&nbsp;sectionHead:Bibliographic Information<br />
&nbsp;&nbsp;title:Title<br />
&nbsp;&nbsp;subjectLCSH:Subjects (LCSH)<br />
&nbsp;&nbsp;subjectLocal:Subjects (Local)<br />
&nbsp;&nbsp;description:Description<br />
&nbsp;&nbsp;dateOriginal:Original Date<br />
&nbsp;&nbsp;sectionHead:Contributed By<br />
&nbsp;&nbsp;contributingInstitution:Contributor<br />
&nbsp;&nbsp;rights:Rights<br />
&nbsp;&nbsp;isPartOf:Collection<br />
&nbsp;&nbsp;identifier:ID Number<br />
&nbsp;&nbsp;sectionHead:Technical Information<br />
&nbsp;&nbsp;dateDigital:Date Digitized<br />
&nbsp;&nbsp;digitizationSpecifications:Specifications<br />
</div>
<div style="height:12px;background:#ffffff"></div>

<p>The <span class="codelg">sectionHead</span> tag indicates a display header, intended to organize the information on the screen in a more logical manner. Below is a screen shot of the result. View the live record <a href="http://www.finditillinois.org/cgi-bin/idaFullRecord/xtfFullRecord.pl?uid=31&amp;collection=linl">here</a>.</p>

<div style="text-align: center;">
<img style="margin: 10px 0px;" src="bullen-fig3.png" alt="bullen-fig3" width="733" height="777" />
</div>
<div style="height:12px;background:#ffffff"></div>

<p>Shown below is its IDA/CONTENTdm counterpart. View the live record <a href="http://www.idaillinois.org/cdm/ref/collection/linl/id/48">here</a>.</p>

<div style="text-align: center;">
<img style="margin: 10px 0px;" src="bullen-fig4.png" alt="bullen-fig4" width="800" height="641" class="borderGray" />
</div>
<div style="height:12px;background:#ffffff"></div>

<div class="divider-full">&nbsp;</div>
<h3>5 Second Conversion</h3>

<p>My second test collection was The Music of the First World War. This collection, from the Pritzker Military Museum and Library, consists of flat, regular records of compound objects. Each record consists of five parts, a JPEG cover image, a PDF of a whole musical score, and MP3, AIFF, and MIDI copies of the digitized music.</p>

<p>CONTENTdm's export yielded these compound objects in two parts. The first part is the metadata itself and the second is an XML file that points to the actual digital objects. The metadata XML record looks like:</p>

<div style="height:12px;background:#ffffff"></div>
<div class="code">
&nbsp;&nbsp;&lt;record&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;While you're over there in no man's land : I'm over here in lonesome land&lt;/title&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;composer&gt;Stanley, Jack&lt;/composer&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;lyricist&gt;Spiess, Jessie&lt;/lyricist&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;performer&gt;&lt;/performer&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;Published by:: Will Rossiter : Chicago, IL&lt;/description&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;created&gt;1918&lt;/created&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;identifier&gt;M1645 .S8 W5 1918X&lt;/identifier&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;relation&gt;&lt;/relation&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;rights&gt;Access to materials is solely intended for personal use. Other uses of the file and its content, whether commercial, noncommercial, educational, or promotional, may be prohibited without the written permission of the copyright owner, the Pritzker Military Museum &amp; Library. Please contact us at 104 S. Michigan Ave., Chicago, IL 60603, Phone: 312.374.9333.&lt;/rights&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;identifier&gt;23915209&lt;/identifier&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;provenance&gt;&lt;/provenance&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;contributingInstitution&gt;Pritzker Military Museum &amp; Library: The Music of the First World War&lt;/contributingInstitution&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;fullResolution&gt;&lt;/fullResolution&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;cdmid&gt;51&lt;/cdmid&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;cdmaccess&gt;&lt;/cdmaccess&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;cdmcreated&gt;2016-03-17&lt;/cdmcreated&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;cdmmodified&gt;2016-03-17&lt;/cdmmodified&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;cdmoclc&gt;&lt;/cdmoclc&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;cdmfile&gt;52.cpd&lt;/cdmfile&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;cdmpath&gt;/p16614coll23/image/52.cpd&lt;/cdmpath&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;thumbnailURL&gt;http://server16614.contentdm.oclc.org/cgi-bin/thumbnail.exe?CISOROOT=/p16614coll23&amp;CISOPTR=51&lt;/thumbnailURL&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;viewerURL&gt;http://cdm16614.contentdm.oclc.org:80/cdm/ref/collection/p16614coll23/id/51&lt;/viewerURL&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;structure&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;page&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagetitle&gt;Front Cover&lt;/pagetitle&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pageptr&gt;46&lt;/pageptr&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagefile&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagefiletype&gt;thumbnail&lt;/pagefiletype&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagefilelocation&gt;http://server16614.contentdm.oclc.org/cgi-bin/thumbnail.exe?CISOROOT=/p16614coll23&amp;CISOPTR=46&lt;/pagefilelocation&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pagefile&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Etc.
</div>
<div style="height:12px;background:#ffffff"></div>

<p>The <span class="codelg">&lt;cpdfile&gt;</span> element points to an XML file that contains pointers to the actual digital objects:</p>

<div style="height:12px;background:#ffffff"></div>
<div class="code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;<br />
&lt;cpd&gt;<br />
&nbsp;&nbsp;&lt;type&gt;Document&lt;/type&gt;<br />
&nbsp;&nbsp;&lt;page&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagetitle&gt;Front Cover&lt;/pagetitle&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagefile&gt;47.jp2&lt;/pagefile&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pageptr&gt;46&lt;/pageptr&gt;<br />
&nbsp;&nbsp;&lt;/page&gt;<br />
&nbsp;&nbsp;&lt;page&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagetitle&gt;AIFF File&lt;/pagetitle&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagefile&gt;48.aif&lt;/pagefile&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pageptr&gt;47&lt;/pageptr&gt;<br />
&nbsp;&nbsp;&lt;/page&gt;<br />
&nbsp;&nbsp;&lt;page&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagetitle&gt;MIDI File&lt;/pagetitle&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagefile&gt;49.mid&lt;/pagefile&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pageptr&gt;48&lt;/pageptr&gt;<br />
&nbsp;&nbsp;&lt;/page&gt;<br />
&nbsp;&nbsp;&lt;page&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagetitle&gt;MP3 File&lt;/pagetitle&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagefile&gt;50.mp3&lt;/pagefile&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pageptr&gt;49&lt;/pageptr&gt;<br />
&nbsp;&nbsp;&lt;/page&gt;<br />
&nbsp;&nbsp;&lt;page&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagetitle&gt;Whole Score&lt;/pagetitle&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagefile&gt;51.pdf&lt;/pagefile&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pageptr&gt;50&lt;/pageptr&gt;<br />
&nbsp;&nbsp;&lt;/page&gt;<br />
&lt;/cpd&gt;<br />
</div>
<div style="height:12px;background:#ffffff"></div>

<p>For ease of display for this test simulation, I decided to convert the JPEG2000 formatted files into conventional JPEG files. Were I doing this in a real situation, I would install djatoka as a Tomcat webapp so that I properly handle JPEG2000 files (see Chute &amp; Van de Sompel, <a href="../../september08/chute/09chute.html">Introducing djatoka</a>, <i>D-Lib Magazine</i>, 2008). I converted the JPEG2000 files using <a href="http://www.imagemagick.org/script/index.php">Imagemagick</a> for this test instance.</p>

<p>I opted to concatenate the two XML files into one file for ease of indexing and full record display. I wrote a Perl program that brought the two parts together. The resulting XML file looks like:</p>

<div style="height:12px;background:#ffffff"></div>
<div class="code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;<br />
&lt;metadata&gt;<br />
&nbsp;&nbsp;&lt;record&gt;<br />
&nbsp;&nbsp;&lt;xmlFileName&gt;14&lt;/xmlFileName&gt;<br />
&nbsp;&nbsp;&lt;cdmCode&gt;p16614coll23&lt;/cdmCode&gt;<br />
&nbsp;&nbsp;&lt;title&gt;Somewhere in France : (is the Lily)&lt;/title&gt;<br />
&nbsp;&nbsp;&lt;composer&gt;Howard, Joseph E.&lt;/composer&gt;<br />
&nbsp;&nbsp;&lt;lyricist&gt;Johnson, Philander Chase&lt;/lyricist&gt;<br />
&nbsp;&nbsp;&lt;performer&gt;Howard, Joseph E.&lt;/performer&gt;<br />
&nbsp;&nbsp;&lt;description&gt;Published by:: M. Witmark &amp; Sons (New York, NY)&lt;/description&gt;<br />
&nbsp;&nbsp;&lt;created&gt;1918&lt;/created&gt;<br />
&nbsp;&nbsp;&lt;identifier&gt;M1646 .H693 S66 1917S&lt;/identifier&gt;<br />
&nbsp;&nbsp;&lt;relation&gt;https://en.wikipedia.org/wiki/Somewhere_In_France_Is_the_Lily&lt;/relation&gt;<br />
&nbsp;&nbsp;&lt;rights&gt;Access to materials is solely intended for personal use. Other uses of the file and its content, whether commercial, noncommercial, educational, or promotional, may be prohibited without the written permission of the copyright owner, the Pritzker Military Museum &amp; Library. Please contact us at 104 S. Michigan Ave., Chicago, IL 60603, Phone: 312.374.9333.&lt;/rights&gt;<br />
&nbsp;&nbsp;&lt;identifier&gt;71145786&lt;/identifier&gt;<br />
&nbsp;&nbsp;&lt;provenance&gt;&lt;/provenance&gt;<br />
&nbsp;&nbsp;&lt;contributingInstitution&gt;Pritzker Military Museum &amp; Library: The Music of the First World War&lt;/contributingInstitution&gt;<br />
&nbsp;&nbsp;&lt;fullResolution&gt;&lt;/fullResolution&gt;<br />
&nbsp;&nbsp;&lt;cdmid&gt;129&lt;/cdmid&gt;<br />
&nbsp;&nbsp;&lt;cdmaccess&gt;&lt;/cdmaccess&gt;<br />
&nbsp;&nbsp;&lt;cdmcreated&gt;2016-03-18&lt;/cdmcreated&gt;<br />
&nbsp;&nbsp;&lt;cdmmodified&gt;2016-03-18&lt;/cdmmodified&gt;<br />
&nbsp;&nbsp;&lt;cdmoclc&gt;&lt;/cdmoclc&gt;<br />
&nbsp;&nbsp;&lt;cdmfile&gt;130.cpd&lt;/cdmfile&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;frontPage&gt;125.jp2&lt;/frontPage&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;aiffFile&gt;126.aif&lt;/aiffFile&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;midiFile&gt;127.mid&lt;/midiFile&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;mp3File&gt;128.mp3&lt;/mp3File&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pdfFile&gt;129.pdf&lt;/pdfFile&gt;<br />
&nbsp;&nbsp;&lt;&nbsp;&nbsp;cdmFileName&gt;125.jpg&lt;/cdmFileName&gt;<br />
&nbsp;&nbsp;&lt;cdmpath&gt;/p16614coll23/image/130.cpd&lt;/cdmpath&gt;<br />
&nbsp;&nbsp;&lt;thumbnailURL&gt;http://server16614.contentdm.oclc.org/cgi-bin/thumbnail.exe?CISOROOT=/p16614coll23&amp;CISOPTR=129&lt;/thumbnailURL&gt;<br />
&nbsp;&nbsp;&lt;viewerURL&gt;http://cdm16614.contentdm.oclc.org:80/cdm/ref/collection/p16614coll23/id/129&lt;/viewerURL&gt;<br />
&nbsp;&nbsp;&lt;structure&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;page&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagetitle&gt;Front Cover&lt;/pagetitle&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pageptr&gt;124&lt;/pageptr&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagefile&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagefiletype&gt;thumbnail&lt;/pagefiletype&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagefilelocation&gt;http://server16614.contentdm.oclc.org/cgi-bin/thumbnail.exe?CISOROOT=/p16614coll23&amp;CISOPTR=124&lt;/pagefilelocation&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pagefile&gt;...<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Etc.
</div>
<div style="height:12px;background:#ffffff"></div>

<p>I can index the <span class="codelg">&lt;aiffFile&gt;</span>, <span class="codelg">&lt;mp3File&gt;</span>, etc. elements in XTF:</p>

<div style="height:12px;background:#ffffff"></div>
<div class="code">
&lt;!-- midiFile --&gt;<br />
&nbsp;&lt;xsl:template name="get-p16614coll23-midiFile"&gt;<br />
&nbsp;&nbsp;&lt;xsl:choose&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;xsl:when test="/metadata/record/midiFile"&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;midiFile xtf:meta="true"&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xsl:value-of select="string(/metadata/record/midiFile[1])"/&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/midiFile&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;/xsl:when&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;xsl:otherwise&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;midiFile xtf:meta="true"&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xsl:value-of select="''"/&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/midiFile&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;/xsl:otherwise&gt;<br />
&nbsp;&nbsp;&lt;/xsl:choose&gt;<br />
&nbsp;&lt;/xsl:template&gt;<br />
</div>
<div style="height:12px;background:#ffffff"></div>
<div class="code">
&lt;!-- mp3File --&gt;<br />
&nbsp;&lt;xsl:template name="get-p16614coll23-mp3File"&gt;<br />
&nbsp;&nbsp;&lt;xsl:choose&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;xsl:when test="/metadata/record/mp3File"&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;mp3File xtf:meta="true"&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xsl:value-of select="string(/metadata/record/mp3File[1])"/&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/mp3File&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;/xsl:when&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;xsl:otherwise&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;mp3File xtf:meta="true"&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xsl:value-of select="''"/&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/mp3File&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;/xsl:otherwise&gt;<br />
&nbsp;&nbsp;&lt;/xsl:choose&gt;<br />
&nbsp;&lt;/xsl:template&gt;<br />
</div>
<div style="height:12px;background:#ffffff"></div>

<p>I can then link to the different parts of the compound object and make them available directly from the brief record:</p>

<div style="text-align: center;">
<img style="margin: 10px 0px;" src="bullen-fig5.png" alt="bullen-fig5" width="800" height="476" class="borderGray" />
</div>
<div style="height:12px;background:#ffffff"></div>

<div class="divider-full">&nbsp;</div>
<h3>6 Third Conversion</h3>

<p>The third data set was by far the most challenging. It includes a wide variety of material from the Illinois State Library's own collection. Most of the items consist of complex compound objects, and like the second data set, multi-part XML records. The exported parent metadata record looks like:</p>

<div style="height:12px;background:#ffffff"></div>
<div class="code">
&lt;record&gt;<br />
&nbsp;&nbsp;&lt;title&gt;The beautiful life of Frances E. Willard: a memorial volume&lt;/title&gt;<br />
&nbsp;&nbsp;&lt;alternativeTitle&gt;&lt;/alternativeTitle&gt;<br />
&nbsp;&nbsp;&lt;seriesTitle&gt;&lt;/seriesTitle&gt;<br />
&nbsp;&nbsp;&lt;creator&gt;Gordon, Anna Adams, 1853-1931&lt;/creator&gt;<br />
&nbsp;&nbsp;&lt;contributor&gt;&lt;/contributor&gt;<br />
&nbsp;&nbsp;&lt;subjectLCSH&gt;Willard, Frances Elizabeth, 1839-1898;&lt;/subjectLCSH&gt;<br />
&nbsp;&nbsp;&lt;browseTopic&gt;Famous Illinoisans&lt;/browseTopic&gt;<br />
&nbsp;&nbsp;&lt;description&gt;&lt;/description&gt;<br />
&nbsp;&nbsp;&lt;created&gt;1898&lt;/created&gt;<br />
&nbsp;&nbsp;&lt;date&gt;1898&lt;/date&gt;<br />
&nbsp;&nbsp;&lt;timePeriod&gt;1890s (1890-1899)&lt;/timePeriod&gt;<br />
&nbsp;&nbsp;&lt;source&gt;&lt;/source&gt;<br />
&nbsp;&nbsp;&lt;isPartOf&gt;&lt;/isPartOf&gt;<br />
&nbsp;&nbsp;&lt;language&gt;eng&lt;/language&gt;<br />
&nbsp;&nbsp;&lt;geographicCoverage&gt;United States--Illinois&lt;/geographicCoverage&gt;<br />
&nbsp;&nbsp;&lt;contributingInstitution&gt;Illinois State Library&lt;/contributingInstitution&gt;<br />
&nbsp;&nbsp;&lt;rights&gt;Materials in this collection are made available by the Illinois State Library. To request reproductions or inquire about permissions, contact: <a href="https://www.dlib.org/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e9809a8580848ea980859a869ac7878c9d">[email&#160;protected]</a>. Please cite the item title and collection name.&lt;/rights&gt;<br />
&nbsp;&nbsp;&lt;dateDigital&gt;2004-08-11&lt;/dateDigital&gt;<br />
&nbsp;&nbsp;&lt;identifier&gt;4102646&lt;/identifier&gt;<br />
&nbsp;&nbsp;&lt;type&gt;Text&lt;/type&gt;<br />
&nbsp;&nbsp;&lt;format&gt;&lt;/format&gt;<br />
&nbsp;&nbsp;&lt;digitalFormat&gt;&lt;/digitalFormat&gt;<br />
&nbsp;&nbsp;&lt;digitizationSpecifications&gt;TIFF images created with Epson Expression 836XL scanner, 300 DPI, grayscale, Photoshop 7.0&lt;/digitizationSpecifications&gt;<br />
&nbsp;&nbsp;&lt;transcript&gt;&lt;/transcript&gt;<br />
&nbsp;&nbsp;&lt;tag&gt;willard001&lt;/tag&gt;<br />
&nbsp;&nbsp;&lt;oclcNumber&gt;06868272&lt;/oclcNumber&gt;<br />
&nbsp;&nbsp;&lt;collectionName&gt;Illinois State Library - General Collection&lt;/collectionName&gt;<br />
&nbsp;&nbsp;&lt;itemURL&gt;http://cdm16614.contentdm.oclc.org:80/cdm/ref/collection/isl/id/1692&lt;/itemURL&gt;<br />
&nbsp;&nbsp;&lt;oclcNumber&gt;&lt;/oclcNumber&gt;<br />
&nbsp;&nbsp;&lt;dateCreated&gt;2004-11-15&lt;/dateCreated&gt;<br />
&nbsp;&nbsp;&lt;dateModified&gt;2010-06-08&lt;/dateModified&gt;<br />
&nbsp;&nbsp;&lt;cdmNumber&gt;1692&lt;/cdmNumber&gt;<br />
&nbsp;&nbsp;&lt;cdmFileName&gt;1693.cpd&lt;/cdmFileName&gt;<br />
&nbsp;&nbsp;&lt;cdmFilePath&gt;/isl/image/1693.cpd&lt;/cdmFilePath&gt;<br />
</div>
<div style="height:12px;background:#ffffff"></div>

<p>The accompanying compound object XML file:</p>

<div style="height:12px;background:#ffffff"></div>
<div class="code">
&nbsp;&lt;?xml version="1.0"?&gt;<br />
&nbsp;&nbsp;&lt;cpd&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;type&gt;Document&lt;/type&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;page&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagetitle&gt;Table of contents&lt;/pagetitle&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagefile&gt;1256.jpg&lt;/pagefile&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pageptr&gt;1255&lt;/pageptr&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/page&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;page&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagetitle&gt;List of Illustrations&lt;/pagetitle&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagefile&gt;1257.jpg&lt;/pagefile&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pageptr&gt;1256&lt;/pageptr&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/page&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;...<br />
&nbsp;&nbsp;&nbsp;&nbsp;Etc. 
</div>
<div style="height:12px;background:#ffffff"></div>

<p>I admit to facing a quandary at this point. How could I search <b>within</b> each of these complex documents? My indexing instructions to XTF would account for keywords within the titles, descriptions, etc., but I would miss the terms within each document. One approach would be to export the metadata with the page-level metadata flag checked. The huge resulting file generally contains a page-level transcript element for each page of the compound object:</p>

<div style="height:12px;background:#ffffff"></div>
<div class="code">
&lt;transcript&gt;<br />
K.  FINANCIAL COSTS AND PERSONAL INJURIES Following is a breakdown of property and personal injury losses, and other costs involved, as a result of the Chicago riots of October 8-11, 1969: Total Payroll and Expenses of Illinois National Guardsmen, paid by the  State of Illinois Building damages Vehicle damages Medical costs of injured policemen * Other medical costs  Wages paid during policemen's sick leave Wages paid during Asst. Corporation Counsel Richard Elrods hospitalization Total $100,424.42 34,569.17 3,795.00 3,265.87 19,490.91 6,131.62 15,405.00 $183,081.99 * As of February 4, 1970 1. National Guardsmen The State of Illinois, through the office of the Auditor of Public Accounts, reimbursed the Illinois National Guardsmen for their payroll and expenses for their services during the Chicago riots, as follows: Payroll from October 9-11, 1969 Food  Gasoline laundry Travel Repairs Miscellaneous $ 86,872.70 12,366.23 675.25  248.40 18.86 55.03 187.95 $100,424.42 Total 31<br />
&lt;/transcript&gt;
</div>
<div style="height:12px;background:#ffffff"></div>

<p>I could then concatenate the data from each <span class="codelg">&lt;transcript&gt;</span> element for each item in the collection and place it into one single large <span class="codelg">&lt;transcript&gt;</span> element in the XML record. Instead, I opted for a second approach. I concatenated the XML data from the two halves of the record into one XML file:</p>

<div style="height:12px;background:#ffffff"></div>
<div class="code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;<br />
&lt;metadata&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;record&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;xmlFileName&gt;131&lt;/xmlFileName&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;cdmCode&gt;isl&lt;/cdmCode&gt;<br />
&nbsp;&nbsp;&lt;title&gt;A museum, a home, a treasure: the Illinois Executive Mansion&lt;/title&gt;<br />
&nbsp;&nbsp;&lt;alternativeTitle&gt;&lt;/alternativeTitle&gt;<br />
&nbsp;&nbsp;&lt;seriesTitle&gt;&lt;/seriesTitle&gt;<br />
&nbsp;&nbsp;&lt;creator&gt;Illinois Executive Mansion Association&lt;/creator&gt;<br />
&nbsp;&nbsp;&lt;contributor&gt;&lt;/contributor&gt;<br />
&nbsp;&nbsp;&lt;subjectLCSH&gt;Illinois Executive Mansion (Springfield, Ill.); Historic buildings--Illinois--Springfield; Springfield (Ill.)--Buildings, structures, etc.--History&lt;/subjectLCSH&gt;<br />
&nbsp;&nbsp;&lt;browseTopic&gt;Illinois History &amp; Culture&lt;/browseTopic&gt;<br />
&nbsp;&nbsp;&lt;description&gt;&lt;/description&gt;<br />
&nbsp;&nbsp;&lt;dateOriginal&gt;1999&lt;/dateOriginal&gt;<br />
&nbsp;&nbsp;&lt;date&gt;1999&lt;/date&gt;<br />
&nbsp;&nbsp;&lt;timePeriod&gt;1990s (1990-1999)&lt;/timePeriod&gt;<br />
&nbsp;&nbsp;&lt;source&gt;&lt;/source&gt;<br />
&nbsp;&nbsp;&lt;isPartOf&gt;&lt;/isPartOf&gt;<br />
&nbsp;&nbsp;&lt;language&gt;eng&lt;/language&gt;<br />
&nbsp;&nbsp;&lt;geographicCoverage&gt;United States--Illinois--Sangamon County&lt;/geographicCoverage&gt;<br />
&nbsp;&nbsp;&lt;contributingInstitution&gt;Illinois State Library&lt;/contributingInstitution&gt;<br />
&nbsp;&nbsp;&lt;rights&gt;Materials in this collection are made available by the Illinois State Library. To request reproductions or inquire about permissions, contact: <a href="https://www.dlib.org/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e58c96898c8882a58c89968a96cb8b8091">[email&#160;protected]</a>. Please cite the item title and collection name.&lt;/rights&gt;<br />
&nbsp;&nbsp;&lt;dateDigital&gt;2008-03-27&lt;/dateDigital&gt;<br />
&nbsp;&nbsp;&lt;identifier&gt;8817702&lt;/identifier&gt;<br />
&nbsp;&nbsp;&lt;type&gt;Text&lt;/type&gt;<br />
&nbsp;&nbsp;&lt;format&gt;&lt;/format&gt;<br />
&nbsp;&nbsp;&lt;digitalFormat&gt;&lt;/digitalFormat&gt;<br />
&nbsp;&nbsp;&lt;digitizationSpecifications&gt;TIFF images created with Epson Expression 836XL scanner, 300 dpi, 24-bit color.&lt;/digitizationSpecifications&gt;<br />
&nbsp;&nbsp;&lt;transcript&gt;&lt;/transcript&gt;<br />
&nbsp;&nbsp;&lt;tag&gt;8817702&lt;/tag&gt;<br />
&nbsp;&nbsp;&lt;oclcNumber&gt;42691656&lt;/oclcNumber&gt;<br />
&nbsp;&nbsp;&lt;collectionName&gt;Illinois State Library - General Collection&lt;/collectionName&gt;<br />
&nbsp;&nbsp;&lt;itemURL&gt;http://cdm16614.contentdm.oclc.org:80/cdm/ref/collection/isl/id/21127&lt;/itemURL&gt;<br />
&nbsp;&nbsp;&lt;dateCreated&gt;2016-06-02&lt;/dateCreated&gt;<br />
&nbsp;&nbsp;&lt;dateModified&gt;2016-06-02&lt;/dateModified&gt;<br />
&nbsp;&nbsp;&lt;cdmNumber&gt;21127&lt;/cdmNumber&gt;<br />
&nbsp;&nbsp;&lt;cpd&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;type&gt;Document&lt;/type&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;page&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagetitle&gt;Front cover&lt;/pagetitle&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pagefile&gt;31060.jpg&lt;/pagefile&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pageptr&gt;21123&lt;/pageptr&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/page&gt;...<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Etc.
</div>
<div style="height:12px;background:#ffffff"></div>

<p>I then wrote a program that brachiated each XML record's <span class="codelg">&lt;cpd&gt;</span> section, looking for the <span class="codelg">&lt;pagefile&gt;</span> element, and built a concatenated PDF file from the individual JPEG files using ImageMagick. I also used ImageMagick to convert the JPEG2000 files into JPEGs, as needed. My Perl program used system calls to work with ImageMagick. It did not occur to me until after the fact that, yes, there is a Perl library designed to work with ImageMagick called <a href="http://www.imagemagick.org/script/perl-magick.php">PerlMagick</a>. I would install and use PerlMagick if I had to do this again. I named the resulting PDF file with the record number of the XML record and added an element to reflect this: <span class="codelg">&lt;pdfFile&gt;</span>131.pdf<span class="codelg">&lt;/pdfFile&gt;</span>. Building in the indexing rules in XTF allowed me to index the actual content of the created PDF file as well as the XML record. </p>

<p>Having a <span class="codelg">&lt;cpd&gt;</span> page-level section in the XML record allows me to use the JavaScript library <a href="http://www.turnjs.com/">turn.js</a> (free on Github) to load the component JPEG files into a flip book. The resulting screen is shown below. View the live record <a href="http://www.finditillinois.org/cgi-bin/idaFullRecord/xtfFullRecord.pl?uid=44&amp;collection=isl">here</a>.</p>

<div style="text-align: center;">
<img style="margin: 10px 0px;" src="bullen-fig6.png" alt="bullen-fig6" width="742" height="664" class="borderGray" />
</div>
<div style="height:12px;background:#ffffff"></div>

<p>I modified the two loop engine in my xtfFullRecord.pl program to search for a <span class="codelg">&lt;cpd&gt;</span> section, and, if found, build up a string with each of the <span class="codelg">&lt;pagefile&gt;</span> values:</p>

<div style="height:12px;background:#ffffff"></div>
<div class="code">
&nbsp;for my $sample ($xmldoc-&gt;findnodes('/metadata/record')) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;for my $property ($sample-&gt;findnodes('./*')) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $label1 =  $property-&gt;nodeName();<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $value1 = $property-&gt;textContent();<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($label1 eq "cpd") {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $cpd ($property-&gt;findnodes('/metadata/record/cpd/page/pagefile')) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$label2 = $cpd-&gt;nodeName();<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value2 = $cpd-&gt;textContent();<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pageFile = $pageFile . "&lt;div style=\"background-image:url(http://www.finditillinois.org/flipBook/pages/$value2);\"&gt;&lt;/div&gt;\n";<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else { $XMLRecord{$label1} = $value1 }<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;}<br />
</div>
<div style="height:12px;background:#ffffff"></div>

<p>which generates HTML code:</p>

<div style="height:12px;background:#ffffff"></div>
<div class="code">
&lt;div id="magazine"&gt;<br />
	&lt;div style="background-image:url(http://www.finditillinois.org/flipBook/pages/12389.jpg);"&gt;&lt;/div&gt;<br />
	&lt;div style="background-image:url(http://www.finditillinois.org/flipBook/pages/12390.jpg);"&gt;&lt;/div&gt;<br />
	&lt;div style="background-image:url(http://www.finditillinois.org/flipBook/pages/12391.jpg);"&gt;&lt;/div&gt;<br />
	&lt;div style="background-image:url(http://www.finditillinois.org/flipBook/pages/12392.jpg);"&gt;&lt;/div&gt;<br />
	&lt;div style="background-image:url(http://www.finditillinois.org/flipBook/pages/12393.jpg);"&gt;&lt;/div&gt;<br />
...<br />
Etc.
</div>
<div style="height:12px;background:#ffffff"></div>

<p>I used version 3 of turn.js. Version 4 offers a much larger array of features. As of this writing, licensing version 4 costs $45.00 USD. </p>

<div class="divider-full">&nbsp;</div>
<h3>7 Conclusion and Lessons Learned</h3>

<p>This exercise was a fire drill. As such, there were a number of things I did not fully implement, such as faceted browsing and a proper, unified UX. The point of the exercise was to see if the data could be reasonably converted so I did not pay much attention to design elements. Were I to do this again, I would start with solid UX planning. I would also look at examples of all of the metadata in all of the collections being converted in order to plan what elements can be indexed and how faceted browsing could be implemented. The lack of these two steps resulted in wasted coding time and clumsier programs.</p>

<p>I estimate I spent a total of forty hours on this project, most of it learning how to manipulate the raw XML files and understanding how the structures worked together. Since this was intended as a fire drill, I did not turn to CONTENTdm's support for assistance &#151; I puzzled out the pieces in isolation.</p>

<p>Each collection presented different challenges. Each conversion required custom programming. In planning for a conversion, in addition to UX concerns I would recommend reviewing the metadata elements of each collection and normalizing like elements as much as possible.</p>

<p>I think my approach to including the <span class="codelg">&lt;cpd&gt;</span> section as part of the XML metadata record is potentially very useful, particularly if one uses the powerful features of version 4 of turn.js (for example, to build a table of contents using the <span class="codelg">&lt;pagetitle&gt;</span> element). As I mentioned above, I would also install djatoka as a Tomcat webapp so that I could properly handle the component JPEG2000 files.</p>

<p>Were this a real situation, I might also consider using CONTENTdm's APIs as a data transfer medium. CONTENTdm has a number of useful APIs for directly accessing information contained in its indexes and files. I have been working on a <a href="http://www.finditillinois.org/wordpress/">cookbook of techniques for using the APIs</a> to manipulate CONTENTdm collections. Please note that neither path &#151; manipulating the XML directly or using CONTENTdm's APIs &#151; is an easy one for conversion.</p>

<p>Finally, I only used part of XTF, and then only in its default mode. The Perl program for full record display, for example, could have been implemented in XSLT. Rowan Brownlee describes how to do this in his excellent tutorial, "<a href="http://xtf.cdlib.org/documentation/resources/">Rowan Brownlee's Beginner's Guide to XTF</a>". XTF, or whatever content management system one might use as a backend, should be configured and customized to properly accommodate the exported data set. </p>

<div class="divider-full"><a id="appendix1">&nbsp;</a></div>
<h3>Appendix One</h3>

<div style="height:12px;background:#ffffff"></div>
<div class="code">
&nbsp;#!/usr/bin/perl<br /><br />

&nbsp;my $fileCount = 1;<br /><br />

&nbsp;open (XML, "linlXML.xml");<br />
&nbsp;while (&lt;XML&gt;) {<br />
&nbsp;&nbsp;my $line = $_;<br />
&nbsp;&nbsp;my $a = index ($line, "&lt;record&gt;");<br />
&nbsp;&nbsp;my $b = index ($line, "&lt;/record&gt;");<br /><br />
	
&nbsp;&nbsp;if ($a &gt; -1) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;my $fileName = $fileCount . ".xml";<br />
&nbsp;&nbsp;&nbsp;&nbsp;open (RESULTS, "&gt;$fileName");<br />
&nbsp;&nbsp;&nbsp;&nbsp;print RESULTS "&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n";<br />
&nbsp;&nbsp;&nbsp;&nbsp;print RESULTS "&lt;metadata&gt;\n\t&lt;record&gt;\n";<br />
&nbsp;&nbsp;&nbsp;&nbsp;print RESULTS "\t\t&lt;xmlFileName&gt;$fileCount&lt;/xmlFileName&gt;\n\t\t&lt;cdmCode&gt;linl&lt;/cdmCode&gt;\n";<br />
&nbsp;&nbsp;&nbsp;&nbsp;$fileCount++;<br />
&nbsp;&nbsp;}<br />
&nbsp;&nbsp;elsif ($b &gt; -1) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;print RESULTS "\t&lt;/record&gt;\n&lt;/metadata&gt;";<br />
&nbsp;&nbsp;&nbsp;&nbsp;close (RESULTS);<br />
&nbsp;&nbsp;}<br />
&nbsp;&nbsp;else { print RESULTS "\t" . $line }<br />
&nbsp;}<br />
&nbsp;close (XML);
</div>
<div style="height:24px;background:#ffffff"></div>

<div class="divider-full"><a id="appendix2">&nbsp;</a></div>
<h3>Appendix Two</h3>

<div style="height:12px;background:#ffffff"></div>
<div class="code">
#!/usr/bin/perl<br /><br />

use REST::Client;<br />
use XML::LibXML;<br /><br />

my $query_string = $ENV{'QUERY_STRING'};<br />
my ($uid, $collection) = split (/\&amp;/,$query_string);<br />
my ($junk,$uid) = split (/\=/,$uid);<br />
($junk,$collection) = split (/\=/,$collection);<br /><br />

my @LABELS;<br /><br />

open (LABELS, "$collection.txt");<br />
while (&lt;LABELS&gt;) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;$line = $_;<br />
&nbsp;&nbsp;&nbsp;&nbsp;chomp($line);<br />
&nbsp;&nbsp;&nbsp;&nbsp;push (@LABELS, $line);<br />
}<br />
close (LABELS);<br /><br />

my %XMLRecord;<br /><br />

my $collectionURL = "http://www.finditillinois.org/idaTest/xml/$collection/" . $uid . ".xml";<br />
my $client = REST::Client-&gt;new();<br />
$client-&gt;GET("$collectionURL");<br />

my $parser = XML::LibXML-&gt;new();<br />
my $xmldoc = XML::LibXML-&gt;load_xml(<br />
&nbsp;&nbsp;&nbsp;&nbsp;string =&gt; $client-&gt;responseContent()<br />
&nbsp;&nbsp;&nbsp;&nbsp;);<br /><br />

for my $sample ($xmldoc-&gt;findnodes('/metadata/record')) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;for my $property ($sample-&gt;findnodes('./*')) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $label1 = $property-&gt;nodeName();<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $value1 = $property-&gt;textContent();<br /><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$XMLRecord{$label1} = $value1;<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
}<br /><br />

my $imgURL = "http://www.finditillinois.org/idaTest/img/$collection/images/" . $XMLRecord{'cdmFileName'};<br /><br />

print "Content-type: text/html\n\n";<br />
print &lt;&lt;EOF;<br />
&lt;html lang="en"&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;head&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta charset="UTF-8" /&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;Illinois Digital Archives :: $XMLRecord{'collectionName'}&lt;/title&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;link rel="stylesheet" type="text/css" href="http://www.finditillinois.org/idaTest/css/normalize.css" /&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;link rel="stylesheet" type="text/css" href="http://www.finditillinois.org/idaTest/css/demo.css" /&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;link rel="stylesheet" type="text/css" href="http://www.finditillinois.org/idaTest/css/component.css" /&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;link rel="stylesheet" type="text/css" href="http://www.finditillinois.org/idaTest/css/searchBox.css" /&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script src="http://www.finditillinois.org/idaTest/js/modernizr.custom.js"&gt;&lt;/script&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script language="javascript"&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function switchMenu(obj) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var el = document.getElementById(obj);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( el.style.display != 'none' ) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;el.style.display = 'none';<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;el.style.display = '';<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/script&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/head&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;!-- Top Navigation --&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div class="codrops-top clearfix"&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div class="column"&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div id="sb-search" class="sb-search fixed"&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;form method="GET" action=""&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input class="sb-search-input" placeholder="Search the Illinois Digital Archives" value="" name="keyword" id="search"&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input class="sb-search-submit" type="submit" value="Search!"&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span class="sb-icon-search"&gt;&lt;/span&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/form&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p /&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;a href="http://www.idaillinois.org/"&gt;HOME&lt;/a&gt;&nbsp;|&nbsp;&lt;a href="http://www.idaillinois.org/ui/custom/default/collection/default/resources/custompages/about/help.php" target="new"&gt;Help&lt;/a&gt;&nbsp;|&nbsp;&lt;a href="http://www.idaillinois.org/ui/custom/default/collection/default/resources/custompages/bin/allInstitutions.php"&gt;All collections&lt;/a&gt;&nbsp;|&nbsp;&lt;a href="http://www.idaillinois.org/ui/custom/default/collection/default/resources/custompages/bin/byInstitution.php"&gt; ...by Institution&lt;/a&gt;&nbsp;|&nbsp;&lt;a href="mailto:islimg\@ilsos.net"&gt;Contact Us&lt;/a&gt;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;header class="codrops-header"&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;&lt;span&gt;A service of the &lt;strong&gt;&lt;a href="https://www.cyberdriveillinois.com/departments/library/"&gt;Illinois State Library&lt;/a&gt;&lt;/strong&gt; and the &lt;strong&gt;&lt;a href="https://www.cyberdriveillinois.com/"&gt;Office of the Illinois Secretary of State&lt;/a&gt;&lt;/strong&gt;&lt;/span&gt;ILLINOIS DIGITAL ARCHIVES&lt;/h1&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;a href="https://www.cyberdriveillinois.com/" target="new"&gt;&lt;img src="http://www.idaillinois.org/ui/custom/default/collection/default/resources/custompages/img/librarytitleseal.png"  width="180px"/&gt;&lt;/a&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p /&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/header&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p /&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;section class="grid-wrap"&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p /&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;h2 style="color: #f7941d; background-color: #333333; text-align: center"&gt;$XMLRecord{'collectionName'}&lt;/h2&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p /&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;center&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;img src="$imgURL" title="$XMLRecord{'description'}" alt="$XMLRecord{'title'}" width="80%" /&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/center&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p /&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;center&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;EOF<br />
&nbsp;&nbsp;&nbsp;&nbsp;my $tableCount = 0;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $labelName (@LABELS) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($labelName, $realName) = split (/\:/,$labelName);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($labelName eq "sectionHead") {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($tableCount &gt; 0) { print  "&lt;/table&gt;\n" }<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableCount++;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print "&lt;p /&gt;&lt;table width=\"90%\" border=\"1\"&gt;\n";<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print "&lt;tr&gt;\n&lt;td colspan=\"2\" width=\"100%\"&gt;\n";<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print "&lt;h2 style=\"color: #f7941d; background-color: #333333; text-align: center\"&gt;$realName&lt;/h2&gt;\n";<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print "&lt;/td&gt;\n&lt;/tr&gt;\n";<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print "&lt;tr&gt;\n&lt;td bgcolor=\"#333333\" width=\"20%\" align=\"right\"&gt;&lt;strong style=\"color: />#f7941d;\"&gt;$realName:&lt;/strong&gt;&nbsp;&lt;/td&gt;\n";<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print "&lt;td width=\"80%\"&gt;$XMLRecord{$labelName}&lt;/td&gt;\n&lt;/tr&gt;\n";<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />
&nbsp;&nbsp;&nbsp;&nbsp;print &lt;&lt;EOF1;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/table&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/center&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p /&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h2 style=\"margin-left: 10px;\"&gt;&lt;a href="$collectionURL"&gt;Original XML Record&lt;/a&gt;&lt;/h2&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p /&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/section&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!-- /container --&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script src="http://www.finditillinois.org/idaTest/js/uisearch.js"&gt;&lt;/script&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new UISearch( document.getElementById( 'sb-search' ) );<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/script&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new GridScrollFx( document.getElementById( 'grid' ), {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;viewportFactor : 0.4<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} );<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/script&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;EOF1<br />
&nbsp;&nbsp;&nbsp;&nbsp;print "&lt;/html&gt;\n";<br />
</div>
<div style="height:12px;background:#ffffff"></div>

<div class="divider-full">&nbsp;</div>
<h3>About the Author</h3>

<p class="blue"><b>Andrew Bullen</b> is the Information Technology Coordinator at the Illinois State Library (ISL). Among his other responsibilities is the technical management of the digital information systems at ISL. His CV can be found <a href="http://www.andrewbullen.us/">here</a>.</p>

<div class="divider-full">&nbsp;</div>

 <!-- Standard Copyright line here  -->

<div class="center">
<p class="footer">Copyright &reg; 2016 Andrew Bullen</p>  
</div>

<div style="height:1px;background:#2b538e"></div>
</div>

</form>
<script data-cfasync="false" src="../../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
</html>