<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"                         "http://www.w3.org/TR/REC-html40/loose.dtd">

<html>

   <!-- Formatting 12/6/05, bw; proofed, cr; author-requested corrections made 12/13, bw --> 

  <head>     

<title>Harvard's Perspective on the Archive Ingest and Handling Test
</title> 

           <link rel="metadata" href="12abrams.meta.xml"> 

  

 <link rel="stylesheet" type="text/css" href="../style/main.css" title="Default Style Sheet"> 

<style type="text/css">
.codetext {font-family: Courier, Courier New, San-Serif;
					}
	td.SmallTableFont {font-size: 90%;
					}

</style>

                    

<meta name="DOI" content="10.1045/december2005-abrams">            

<meta HTTP-EQUIV="content-type" content="text/html; CHARSET=iso-8859-1">

 

         <meta name="description" content="D-Lib Magazine"> 

          

  <meta name="keywords" content="D-Lib Magazine, Digital Libraries, Digital Library Research">

 </head>   

<body bgcolor="#ffffff"> 

 <div class="center">  

<table width="700" border="0" cellspacing="0" cellpadding="0" align="center">                                          

<tr>                   
<td class="center">      
<p><font style="font-weight: bold;">
<a class="menu" href="../../../Architext/AT-dlib2query.html" target="_top">Search</a> &nbsp; <a name="Top">|</a>  &nbsp;
<a class="menu" href="../../../back.html" target="_top">Back Issues</a> &nbsp; |  &nbsp;            
<a class="menu" href="../../../author-index.html" target="_top">Author Index</a> &nbsp; | &nbsp;          
<a class="menu" href="../../../title-index.html" target="_top">Title Index</a> &nbsp; | &nbsp;           
<a class="menu" href="../12contents.html" target="_top">Contents</a> 
</font>
</p>
</td>   

</tr> 
</table>  

<p align="center">
<img src="../images/articles00.gif" width="500" height="16" alt="Articles">
</p>
 </div>

   <!-- Begin Article Header -->    

 <table border="0" cellpadding="0" cellspacing="0" width="100%"> 

 <colgroup>         

 <col width="6%">         

  <col width="94%"> </colgroup>           

 <tr>                 

   <td><img src="../images/spacer00.gif" width="10" height="10" alt="spacer"></td> 

                 <td>

 <h3 class="blue">D-Lib Magazine<br>December 2005</h3>  

                <h6 class="blue">Volume 11 Number 12<br><br>

            ISSN 1082-9873</h6>           

 

<H2 class="blue-space">Harvard's Perspective on the Archive Ingest and Handling Test</H2>


 </td>          

 </tr>           

 <tr>                   

<td>&nbsp;</td>                  

<td>

  

<p class="blue"> <a href="../authors/12authors.html#ABRAMS">Stephen Abrams</a>, <i>Digital Library Program Manager</i>
 </p>

<p class="blue"> <a href="../authors/12authors.html#CHAPMAN">Stephen Chapman</a>, <i>Preservation Librarian for Digital Initiatives </i>
 </p>

<p class="blue"> <a href="../authors/12authors.html#FLECKER">Dale Flecker</a>, <i>Associate Director for Planning and Systems</i>
 </p>
 
 <p class="blue"> <a href="../authors/12authors.html#KREIGSMAN">Sue Kreigsman</a>, <i>Digital Projects Librarian</i>
 </p>
 
 <p class="blue"> <a href="../authors/12authors.html#MARINUS">Julian Marinus</a>, <i>Digital Library Software Engineer</i>
 </p>
 
 <p class="blue"> <a href="../authors/12authors.html#MCGATH">Gary McGath</a>, <i>Digital Library Software Engineer</i>
 </p>
 
 <p class="blue"> <a href="../authors/12authors.html#WENDLER">Robin Wendler</a>, <i>Metadata Analyst</i>
 </p>

 <p class="blue"><i>Harvard University Library</i><br>
&#123;stephen_abrams,steve_chapman,dale_flecker,suzanne_kriegsman,julian_marinus,gary_mcgath, robin_wendler&#125;&#064;harvard.edu</p>


</td>          </tr>  </table>      <div class="center">

 <p><img src="../images/redline00.gif" width="500" height="2" alt="Red Line"></p> </div> 

  

   <table border="0" cellpadding="0" cellspacing="0" width="90%"> <colgroup>

         <col width="6%">          <col width="94%"> </colgroup>

           <tr>                  

<td><img src="../images/spacer00.gif" width="10" height="10" alt="spacer"></td>                 

<td>

  <!-- Abstract or TOC goes here --> 

<!-- Story goes next --> 


<H3>Introduction</H3>

<p>
The Harvard University Library (HUL) has operated a preservation repository, the Digital Repository Service (DRS), for the past five years, with over 3.2 million digital objects (12 TB) currently under managed storage [<a href="12abrams.html#1">1</a>].  By both policy and design, the DRS is intended for highly "curated" digital assets; that is, those that are owned and submitted by known users, created according to well-known workflows and meeting well-known technical specifications, and in a small set of approved formats.  In the future, however, we feel that most, if not all, of these restrictions will be gradually eliminated, thus positioning the DRS much more as an institutional repository.  In view of this, the Archive and Ingest Handling Test (AIHT), organized by the Library of Congress, and requiring the import, export, and manipulation of a sizeable test corpus of unknown provenance, was an excellent opportunity for us to investigate a number of issues we can expect to face in the future.
</p>

<p>
The most significant of these issues include:
</p>

<ul type="disc">
	<li>Automated extraction of technical metadata from digital objects</li>
	<li class="spacetop">Automated generation of DRS-compliant Submission Information Packages (SIPs)</li>
	<li class="spacetop">Identification of explicit and implicit constraints on acceptable digital objects throughout the current repository architecture and workflows</li>
	<li class="spacetop">Systematic preservation migrations</li>
	<li class="spacetop">Post-migration quality assurance testing</li>
	<li class="spacetop">Metadata models for capturing provenance information</li>
	<li class="spacetop">Repository export</li>
</ul>


<p>
The AIHT project team drew upon the expertise of HUL staff in the following areas:
</p>


<ul type="disc">
	<li>Digital reformatting</li>
	<li class="spacetop">Administrative and financial reporting</li>
	<li class="spacetop">Repository design, implementation, and workflow</li>
	<li class="spacetop">Format identification, validation, and characterization</li>
	<li class="spacetop">Metadata analysis</li>
</ul>


<p>
The AIHT project was successful on two levels.  On a large scale, the project validated the supposition that significant bodies of digital material can be transferred easily between preservation institutions making use of radically different technological infrastructures.  More parochially, the project uncovered a number of areas of DRS design, practice, and policy that will require some level of enhancement as HUL expands the services and scope of the repository to better serve the needs of the university for reliable long-term access to its manifold digital assets.
</p>



<h3>Phase I: Ingest</h3>

<p>
During the ingest phase a number of scaling issues arose almost immediately.  The test corpus was delivered as a single 9 GB compressed archive file (<code>911da.tar.gz</code>) on an NTFS-formatted disk.  As the DRS ingest process is implemented on a Unix server, this necessitated staging the data through a Windows platform.  However, many of the most commonly used Windows decompression tools have a file size limitation of 4 GB.  Once an appropriate tool was installed, the archive file was decompressed and expanded to a locally-attached NAS disk.  However, although this disk had a total capacity of over 100 GB, any single file was limited to 2 GB, so the initial attempt failed.  It was therefore necessary to transfer the original compressed archive by FTP to a Unix environment, where it was decompressed (a file size-related patch was necessary for the Unix tool as well) and expanded into 57,450 individual files, which were then FTP'ed back to the Windows platform.  While the single 9 GB file was transferred in approximately 3 hours, moving 12 GB of individual files took over 35 hours, with numerous error restarts.  (In particular, the FTP client balked at transferring zero length files.)  Given the unknown provenance of the test data, we were surprised, albeit pleasantly, to discover that all of the files were virus free. 
</p>

<p>
The DRS draws a fundamental distinction between primary content and metadata about that content.  Content is stored in a RAID-based file system, with automatic replication to an off-site robotic tape library; administrative, technical, and structural metadata are stored in an Oracle 9i relational database.  (In the HUL infrastructure, descriptive metadata is stored in public access catalogs external to the repository.  As issues of access were out of scope for the AIHT project, no descriptive metadata was generated or stored.)  Access to metadata stored in the repository is mediated through a Java API.
</p>

<p align="center"><img src="Figure1.jpg" width="501" height="381" alt="Flow chart showing the DRS architecture"><br><br>
<b>Figure 1. DRS architecture</b></p>

<p>
DRS SIPs take the form of an arbitrary number of individual content files along with a single XML-formatted control file containing loader directives and administrative and technical metadata about the content files.  Minimum standards for required DRS technical metadata have been established for text, image, and audio content types and are enforced through a variety of mechanisms, including the SIP schema, database table-level constraints, and the repository API.  (Image metadata is consistent with the NISO Z39.87 data dictionary [<a href="12abrams.html#2">2</a>]; audio metadata is consistent with the evolving AES-X098B schema [<a href="12abrams.html#3">3</a>].)  Thus, the main technical challenge of Phase I was to generate the necessary control file and populate it with appropriate metadata.  This was accomplished using an extension to the standard JHOVE Audit output handler [<a href="12abrams.html#4">4</a>].
</p>

<p>
The default high-level behavior of the Audit handler can be summarized as follows:
</p>



<div class="codetext">

audit(<i>directory</i>)<br>
{<br>
&nbsp; &nbsp;for (<i>all files in directory</i>) {<br>
&nbsp; &nbsp; &nbsp;if (<i>file is directory</i>) {<br>

&nbsp; &nbsp; &nbsp; &nbsp;audit(<i>file</i>);<br>
&nbsp; &nbsp; &nbsp;}<br>
&nbsp; &nbsp; &nbsp;else {<br>
&nbsp; &nbsp; &nbsp; &nbsp; <i>validate and characterize file</i>;<br>

&nbsp; &nbsp; &nbsp; &nbsp; <i>output summary file information</i>;<br>
&nbsp; &nbsp; &nbsp;}<br>
&nbsp; &nbsp;}<br>
}
</div>

<p>
A new output handler, known as DSIP (DRS SIP handler), was created by extending the Audit class such that the output format conforms to the schema for the DRS SIP control file [<a href="12abrams.html#5">5</a>].
</p>

<p>
At the time that the project began, JHOVE modules were available for the following formats: ASCII, GIF, JPEG, PDF, TIFF, UTF-8, and XML.  As part of the project, new modules were developed for the AIFF, HTML, JPEG 2000, and WAVE formats.  (All of these modules were subsequently included in the May 26, 2005, production release of JHOVE.)  This module set was sufficient to support over 93% of the files in the AIHT corpus.  The distribution of the remaining 7% showed a very long and shallow tail, with more than 90 additional formats suggested by unique file extensions.  It should be further noted that the format of the files as determined by JHOVE differed, in some cases significantly, from the MIME types supplied in the original transfer manifest from the Library of Congress and from the formats implied by the file extensions.
</p>

<table border="1" width="600" cellspacing="1" cellpadding="3" align="center">
<caption><b>Table 1</b></caption>
	<tr>
		<td valign="bottom"><i><b>Format</b></i></td>
		<td valign="bottom"><i><b>MIME type</b></i></td>
		<td valign="bottom"><i><b>By manifest</b></i></td>
		<td valign="bottom"><i><b>By extension</b></i></td>

		<td valign="bottom"><i><b>As validated<br>by JHOVE</b></i></td>
	</tr>
	<tr>
		<td align="left">AIFF</td>
		<td align="left">audio/x-aiff</td>
		<td align="right">162</td>

		<td align="right">151</td>
		<td align="right">162</td>
	</tr>
	<tr>
		<td align="left">ASCII/UTF-8</td>
		<td align="left">text/plain</td>
		<td align="right">20,207</td>

		<td align="right">10,822</td>
		<td align="right">30,887</td>
	</tr>
		<tr>
		<td align="left">GIF</td>
		<td align="left">image/gif</td>
		<td align="right">1,337</td>

		<td align="right">1,320</td>
		<td align="right">1,339</td>
	</tr>
		<tr>
		<td align="left">HTML</td>
		<td align="left">text/html</td>
		<td align="right">16,667</td>

		<td align="right">16,579</td>
		<td align="right">3,649</td>
	</tr>
		<tr>
		<td align="left">JPEG</td>
		<td align="left">image/jpeg</td>
		<td align="right">12,752</td>

		<td align="right">12,763</td>
		<td align="right">12,576</td>
	</tr>
	<tr>
		<td align="left">PDF</td>
		<td align="left">application/pdf</td>
		<td align="right">1,663</td>

		<td align="right">1,664</td>
		<td align="right">1,659</td>
	</tr>
		<tr>
		<td align="left">TIFF</td>
		<td align="left">image/tiff</td>
		<td align="right">1,538</td>

		<td align="right">1,533</td>
		<td align="right">1,537</td>
	</tr>
	<tr>
		<td align="left">WAVE</td>
		<td align="left">audio/x-wave</td>
		<td align="right">2,015</td>

		<td align="right">2,016</td>
		<td align="right">2,015</td>
	</tr>
	<tr>
		<td align="left">XML</td>
		<td align="left">text/xml</td>
		<td align="right">0</td>

		<td align="right">1</td>
		<td align="right">8</td>
	</tr>
	<tr>
		<td align="left">Unknown</td>
		<td align="left">application/octet-stream</td>
		<td align="right">1,141</td>

		<td align="right">10,643</td>
		<td align="right">3,618</td>
	</tr>
	<tr>

		<td align="right" colspan="3">57,492</td>
		<td align="right">57,492</td>

		<td align="right">57,450</td>
	</tr>
</table>

<p>
The HTML format appears to be particularly problematic: over 78% of the files putatively identified as HTML in the transfer manifest were determined to be malformed by JHOVE.  These files were ingested into the DRS as plain text files.  Files whose format could not be determined by JHOVE were ingested as opaque objects of type "application/octet-stream".
</p>

<p>
Note the discrepancy in the total number of files: 57,492 documented in the transfer manifest vs. 57,450 found on the file system.  In fact, the manifest recorded information about 49 files not found on the file system and the file system contained 7 files not recorded in the manifest.  The majority of these discrepancies can be traced to file system incompatibilities between NTFS and UFS with regard to pathname length, case, and character set.
</p>

<p>
As mentioned previously, the DRS is currently implemented to enforce a number of constraints based on the assumption that all depositors will follow DRS technical specifications for object creation.  In the context of the AIHT project these constraints had to be relaxed to permit the ingestion of the test data.  The more significant of these changes included:
</p>


<ul type="disc">
	<li>Permit 0 length files (34 files had a length of 0)</li>
	<li class="spacetop">Accept previously unsupported formats: AIFF, HTML, PDF, and WAVE</li>
	<li class="spacetop">In audio metadata, accept a bit depth of 8 (rather than the standard of 16 previously established for internal audio conversion projects)</li>
	<li class="spacetop">In image metadata, accept bits/sample of 1,1,1 (a highly unusual configuration for raster data organized into three 1-bit channels found in 27 files) </li>
</ul>



<h3>Phase II: Export and Re-import</h3>

<p>
Prior to the AIHT project, the DRS API did not include export functionality: sets of files could be requested by name (or other uniquely identifying properties) but there was no facility for bulk export.  A simple Dissemination Information Package (DIP) format was established in the form of a compressed archive file (harvard.tar.gz) consisting of the 57,450 individual content files and a single METS file [<a href="12abrams.html#6">6</a>] containing administrative and technical metadata.  The administrative metadata included the original pathname of the file, its size, MIME type, and MD5 checksum.  Technical metadata for images was formatted in the MIX schema [<a href="12abrams.html#7">7</a>]; for audio, the AES-X098B schema was used; and for text, the NYU text METS extension schema (textmd.xsd).
</p>

<p>
For the re-import step of Phase II, the DIPs from the other three participating institutions were evaluated for consistency with the DRS architecture.  The Johns Hopkins DIP did not include technical metadata while the Old Dominion DIP was based on MPEG-21 DIDL (Digital Item Description Language) [<a href="12abrams.html#8">8</a>], an unfamiliar technology; therefore we decided to import the Stanford DIP.  This consisted of a METS file and two parallel directory trees: one for the content files and one for the technical metadata about those files.  The technical metadata for each content file was stored in its own separate file.  Due to this distributed organization, we were not able to use a simple XSL stylesheet transformation, but rather had to create a Perl script to generate the DRS SIP; the process would have been simpler if the DIP METS file directly contained all of the metadata.
</p>

<p>
Stanford also used JHOVE to generate much of its technical metadata.  Unfortunately, however, they were working with an older version of the code, pre-release 1.0 (beta 2) of 2004-07-19.  HUL used the then current internal development version, pre-release 1.0 (beta 3) of 2005-02-04, which corrected a number of known errors in the previous version as well as providing several new format modules.  This version disparity led to some inconsistencies in the reporting of the technical metadata between the initial ingest and the re-import of the Stanford DIP.
</p>

<table border="1" width="600" cellspacing="1" cellpadding="3" align="center">
<caption><b>Table 2</b></caption>
	<tr>
		<td valign="bottom"><i><b>Format</b></i></td>
		<td valign="bottom"><i><b>MIME type</b></i></td>

		<td valign="bottom"><i><b>Original DIP</b></i></td>
		<td valign="bottom"><i><b>Stanford DIP</b></i></td>
	</tr>
	<tr>
		<td align="left">AIFF</td>
		<td align="left">audio/x-aiff</td>
		<td align="right">162</td>

		<td align="right">162</td>
	</tr>
	<tr>
		<td align="left">ASCII/UTF-8</td>
		<td align="left">text/plain</td>
		<td align="right">30,887</td>
		<td align="right">30,910</td>

	</tr>
		<tr>
		<td align="left">GIF</td>
		<td align="left">image/gif</td>
		<td align="right">1,339</td>
		<td align="right">0</td>
	</tr>

		<tr>
		<td align="left">HTML</td>
		<td align="left">text/html</td>
		<td align="right">3,649</td>
		<td align="right">1,222</td>
	</tr>
		<tr>

		<td align="left">JPEG</td>
		<td align="left">image/jpeg</td>
		<td align="right">12,576</td>
		<td align="right">10,766</td>
	</tr>
	<tr>
		<td align="left">PDF</td>

		<td align="left">application/pdf</td>
		<td align="right">1,659</td>
		<td align="right">1,662</td>
	</tr>
		<tr>
		<td align="left">TIFF</td>
		<td align="left">image/tiff</td>

		<td align="right">1,537</td>
		<td align="right">1,537</td>
	</tr>
	<tr>
		<td align="left">WAVE</td>
		<td align="left">audio/x-wave</td>
		<td align="right">2,015</td>

		<td align="right">0</td>
	</tr>
	<tr>
		<td align="left">XML</td>
		<td align="left">text/xml</td>
		<td align="right">8</td>
		<td align="right">5</td>

	</tr>
	<tr>
		<td align="left">Unknown</td>
		<td align="left">application/octet-stream</td>
		<td align="right">3,618</td>
		<td align="right">11,186</td>
	</tr>

	<tr>

		<td align="right" colspan="3">57,450</td>
		<td align="right">57,450</td>
	</tr>
</table>

<p>
Post-mortem investigation disclosed the following reasons for these discrepancies:
</p>


<ul type="disc">
	<li>ASCII/UTF-8:  The Stanford DIP characterized 23 HTML files as plain text.  The Harvard DSIP tool, making use of the HTML module newly available in the beta 3 pre-release, characterized these files as HTML.</li>

	<li class="spacetop">GIF:  The beta 2 GIF module contained a known error in which the image bits/sample property was not reported.  As this is a required property for DRS image metadata, all Stanford GIF files were ingested into the DRS as opaque objects of type "application/octet-stream".</li>

	<li class="spacetop">HTML:  The HTML module introduced in the beta 3 pre-release was used to characterize the files based on parsing the content.  As this facility was not available in beta 2, the Stanford characterization was based on other, less definitive, criteria, such as file extension.</li>

	<li class="spacetop">JPEG:  The Stanford DIP characterized 1,810 fewer files as JPEG.  The beta 2 JPEG module contained a known error in which files containing an optional EXIF metadata segment were erroneously reported as invalid.  This error was corrected in the beta 3 pre-release.</li>

	<li class="spacetop">PDF:  The Stanford DIP characterized 3 additional files as PDF that DSIP rejected as being not well-formed.  One of the files had a PDF header that did not start at byte offset 0.  Although this is a technical violation of the PDF syntax [<a href="12abrams.html#9">9</a>], the looser requirements of the Acrobat reader allow the header to start anywhere in the first 1024 bytes.  The PDF module in the current production release of JHOVE (1.0 of 2005-05-26) follows this looser restriction with appropriate notification.</li>

	<li class="spacetop">WAVE:  The beta 2 WAVE module contained a known error in which the audio data encoding property was not reported.  As this is a required property for DRS audio metadata, all Stanford WAVE files were ingested as opaque objects of type "application/octet-stream".</li>

	<li class="spacetop">XML:  The Stanford import characterized 3 fewer files as XML.  The beta 2 XML module did not report the character encoding for these files.  As this is a required property for DRS text metadata, these files were ingested as opaque objects of type "application/octet-stream".</li>
</ul>

<p>
These discrepancies point out the importance of standardizing on processing tools and criteria for format well-formedness and validity.  They also highlight an unfortunate feature of the current DRS, which only permits deposit of objects accompanied by minimally required metadata.  Objects without this minimal metadata can be ingested only by being downgraded to opaque objects of type "application/octet-stream".  Future enhancements to the repository will relax this restriction.
</p>



<h3>Phase III: Format Migration</h3>

<p>
HUL chose to perform a migration of various image files to the JPEG 2000 format [<a href="12abrams.html#10">10</a>].  There is great local interest at Harvard in the retrospective conversion of substantial numbers of existing TIFF images to enhance their utility by permitting the dynamic image manipulation facilitated by the JPEG 2000 format.  The three goals that guided the design of the migration were:
</p>


<ul type="disc">
	<li>To preserve fully the integrity of the GIF, JPEG, and TIFF source data when transformed into the JPEG 2000 (JP2) format</li>
	<li class="spacetop">To maximize the utility of the new JP2 objects</li>
	<li class="spacetop">To minimize migration costs</li>
</ul>

<p>
The source population of 15,452 GIF, JPEG, and TIFF files was subdivided into 25 classes based on format, color space, compression, bits/sample, and image size.  Each class had a corresponding set of unique codec parameters.  In keeping with our established goals of preserving integrity and maximizing usability, the codec configuration used the following specifications:
</p>


<ul type="disc">
	<li>RLCP (resolution-layer-component-position) progression order</li>
	<li class="spacetop">Tile size 1024&times;1024</li>
	<li class="spacetop">Reversible 5-3 wavelet transform</li>
	<li class="spacetop">Decomposition levels based on source image maximum pixel size</li>
	<li class="spacetop">Two quality layers: 50% (35dB pSNR) and 100% (full quality)</li>
	<li class="spacetop">Reversible channel quantization</li>
	<li class="spacetop">Highest quality coding predictor offset</li>
	<li class="spacetop">Grayscale and sRGB colorspaces for single- and multi-channel images, respectively</li>
</ul>


<p>
These ensured lossless compression and fast decoding and permitted the dynamic manipulation (pan and zoom) of the resulting images.  Since none of the advanced color management features of the JPEG 2000 JPX profile was required &#150; none of the JPEG files included embedded color profiles and none of the TIFF files made use of the WhitePoint or PrimaryChromaticities colorimetry tags &#150; the JP2 profile was used instead.  As the codec did not accept GIF as a source format, the 1,339 GIF files were first transformed to equivalent uncompressed RGB TIFFs.
</p>

<p>
The initial attempt at transformation failed for a significant proportion of the source images (5,031 out of 15,452, or 32.5%):
</p>

<table border="1" width="95%" cellspacing="1" cellpadding="2" align="center">
<caption><b>Table 3</b></caption>
	<tr>
		<td valign="bottom" class="SmallTableFont"><i><b>Format</b></i></td>
		<td valign="bottom" class="SmallTableFont"><i><b>Color<br>space</b></i></td>
		<td valign="bottom" class="SmallTableFont"><i><b>Compression</b></i></td>
		<td valign="bottom" class="SmallTableFont"><i><b>Bits /<br>sample</b></i></td>
		<td valign="bottom" class="SmallTableFont"><i><b>Maximum<br>pixel-size</b></i></td>

		<td valign="bottom" align="center"colspan="3" class="SmallTableFont" ><i><b>Source files</b></i></td>
		<td valign="bottom" align="center" colspan="3" class="SmallTableFont"><i><b>JPEG 2000 files</b></i></td>
	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" rowspan="4">GIF</td>
	<td class =" SmallTableFont" valign="top" rowspan="4">Palette</td>
	<td class =" SmallTableFont" valign="top" rowspan="4">LZW</td>

	<td class =" SmallTableFont" valign="top" rowspan="4">8</td>
	<td class =" SmallTableFont" valign="top" align="right">1-300</td>
	<td class =" SmallTableFont" valign="top" align="right">963</td>
	<td class =" SmallTableFont" valign="top" rowspan="4" align="right">1,339</td>
	<td class =" SmallTableFont" valign="top" rowspan="4" align="right">1,339</td>
	<td class =" SmallTableFont" valign="top" align="right">391</td>

	<td class =" SmallTableFont" valign="top" rowspan="4" align="right">706</td>
	<td class =" SmallTableFont" valign="top" rowspan="4" align="right">706</td>
	</tr>
	
	
	<tr>
	<td class =" SmallTableFont" valign="top" align="right">30 -600</td>
	<td class =" SmallTableFont" valign="top" align="right">171</td>
	<td class =" SmallTableFont" valign="top" align="right">126</td>

	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" align="right">601-1200</td>
	<td class =" SmallTableFont" valign="top" align="right">204</td>
	<td class =" SmallTableFont" valign="top" align="right">188</td>
	</tr>
	
	<tr>

	<td class =" SmallTableFont" valign="top" align="right">1201-2400</td>
	<td class =" SmallTableFont" valign="top" align="right">1</td>
	<td class =" SmallTableFont" valign="top" align="right">1</td>
	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" rowspan="12">JPEG</td>
	<td class =" SmallTableFont" valign="top" rowspan="12">YCbCr</td>

	<td class =" SmallTableFont" valign="top" rowspan="12">DCT</td>
	<td class =" SmallTableFont" valign="top" rowspan="5">8</td>
	<td class =" SmallTableFont" valign="top" align="right">10-300</td>
	<td class =" SmallTableFont" valign="top" align="right">2</td>
	<td class =" SmallTableFont" valign="top" rowspan="5" align="right">67</td>
	<td class =" SmallTableFont" valign="top" rowspan="12" align="right">12,576</td>

	<td class =" SmallTableFont" valign="top" align="right">2</td>
	<td class =" SmallTableFont" valign="top" rowspan="5" align="right">66</td>
	<td class =" SmallTableFont" valign="top" rowspan="12" align="right">8,183</td>
	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" align="right">301-600</td>
	<td class =" SmallTableFont" valign="top" align="right">12</td>

	<td class =" SmallTableFont" valign="top" align="right">12</td>
	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" align="right">601-1200</td>
	<td class =" SmallTableFont" valign="top" align="right">37</td>
	<td class =" SmallTableFont" valign="top" align="right">36</td>
	</tr>

	
	<tr>
	<td class =" SmallTableFont" valign="top" align="right">1201-2400</td>
	<td class =" SmallTableFont" valign="top" align="right">13</td>
	<td class =" SmallTableFont" valign="top" align="right">13</td>
	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" align="right">2401-4800</td>

	<td class =" SmallTableFont" valign="top" align="right">3</td>
	<td class =" SmallTableFont" valign="top" align="right">3</td>
	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" rowspan="6">8,8,8</td>
	<td class =" SmallTableFont" valign="top" align="right">1-300</td>
	<td class =" SmallTableFont" valign="top" align="right">3,390</td>

	<td class =" SmallTableFont" valign="top" align="right" rowspan="6">12,501</td>
	<td class =" SmallTableFont" valign="top" align="right">1,922</td>
	<td class =" SmallTableFont" valign="top" align="right" rowspan="6">8,117</td>
	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" align="right">301-600</td>
	<td class =" SmallTableFont" valign="top" align="right">3,061</td>

	<td class =" SmallTableFont" valign="top" align="right">1,798</td>
	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" align="right">601-1200</td>
	<td class =" SmallTableFont" valign="top" align="right">3,729</td>
	<td class =" SmallTableFont" valign="top" align="right">2,749</td>
	</tr>

	
	<tr>
	<td class =" SmallTableFont" valign="top" align="right">1201-2400</td>
	<td class =" SmallTableFont" valign="top" align="right">2,107</td>
	<td class =" SmallTableFont" valign="top" align="right">1,440</td>
	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" align="right">2401-4800</td>

	<td class =" SmallTableFont" valign="top" align="right">210</td>
	<td class =" SmallTableFont" valign="top" align="right">207</td>
	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" align="right">4801-9600</td>
	<td class =" SmallTableFont" valign="top" align="right">4</td>
	<td class =" SmallTableFont" valign="top" align="right">1</td>

	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top">8,8,8,8</td>
	<td class =" SmallTableFont" valign="top" align="right">601-1200</td>
	<td class =" SmallTableFont" valign="top" align="right">8</td>
	<td class =" SmallTableFont" valign="top" align="right">8</td>
	<td class =" SmallTableFont" valign="top" align="right">0</td>

	<td class =" SmallTableFont" valign="top" align="right">0</td>
	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" rowspan="9">TIFF</td>
	<td class =" SmallTableFont" valign="top">Bitonal</td>
	<td class =" SmallTableFont" valign="top">None</td>
	<td class =" SmallTableFont" valign="top">8</td>

	<td class =" SmallTableFont" valign="top" align="right">2401-4800</td>
	<td class =" SmallTableFont" valign="top" align="right">6</td>
	<td class =" SmallTableFont" valign="top" align="right">6</td>
	<td class =" SmallTableFont" valign="top" rowspan="9" align="right">1,537</td>
	<td class =" SmallTableFont" valign="top" align="right">6</td>
	<td class =" SmallTableFont" valign="top" align="right">6</td>

	<td class =" SmallTableFont" valign="top" rowspan="9" align="right">1,532</td>
	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" rowspan="8">RGB</td>
	<td class =" SmallTableFont" valign="top" rowspan="5">None</td>
	<td class =" SmallTableFont" valign="top" rowspan="5">8,8,8</td>
	<td class =" SmallTableFont" valign="top" align="right">1-300</td>

	<td class =" SmallTableFont" valign="top" align="right">561</td>
	<td class =" SmallTableFont" valign="top" align="right" rowspan="5">1,510</td>
	<td class =" SmallTableFont" valign="top" align="right">561</td>
	<td class =" SmallTableFont" valign="top" align="right" rowspan="5">1,510</td>
	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" align="right">301-600</td>

	<td class =" SmallTableFont" valign="top" align="right">2</td>
	<td class =" SmallTableFont" valign="top" align="right">2</td>
	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" align="right">601-1200</td>
	<td class =" SmallTableFont" valign="top" align="right">927</td>
	<td class =" SmallTableFont" valign="top" align="right">927</td>

	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" align="right">1201-2400</td>
	<td class =" SmallTableFont" valign="top" align="right">2</td>
	<td class =" SmallTableFont" valign="top" align="right">2</td>
	</tr>	
	
	<tr>
	<td class =" SmallTableFont" valign="top" align="right">2401-4800</td>

	<td class =" SmallTableFont" valign="top" align="right">18</td>
	<td class =" SmallTableFont" valign="top" align="right">18</td>
	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" rowspan="2">LZW</td>
	<td class =" SmallTableFont" valign="top" rowspan="2">8,8,8</td>
	<td class =" SmallTableFont" valign="top" align="right">1201-2400</td>

	<td class =" SmallTableFont" valign="top" align="right">3</td>
	<td class =" SmallTableFont" valign="top" align="right" rowspan="2">16</td>
	<td class =" SmallTableFont" valign="top" align="right">2</td>
	<td class =" SmallTableFont" valign="top" align="right" rowspan="2">11</td>
	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" align="right">2401-4800</td>

	<td class =" SmallTableFont" valign="top" align="right">13</td>
	<td class =" SmallTableFont" valign="top" align="right">9</td>
	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top">PackBits</td>
	<td class =" SmallTableFont" valign="top">8,8,8,8</td>
	<td class =" SmallTableFont" valign="top" align="right">601-1200</td>

	<td class =" SmallTableFont" valign="top" align="right">5</td>
	<td class =" SmallTableFont" valign="top" align="right">5</td>
	<td class =" SmallTableFont" valign="top" align="right">5</td>
	<td class =" SmallTableFont" valign="top" align="right">5</td>
	</tr>
	
	<tr>
	<td class =" SmallTableFont" valign="top" align="right" colspan="6">15,452</td>

	<td class =" SmallTableFont" valign="top" align="right">15,452</td>
	<td class =" SmallTableFont" valign="top" align="right">15,452</td>
	<td class =" SmallTableFont" valign="top" align="right">10,421</td>
	<td class =" SmallTableFont" valign="top" align="right">10,421</td>
	<td class =" SmallTableFont" valign="top" align="right">10,421</td>
	</tr>

	</table>
	
<p>
Post-mortem investigation revealed the following limitations and errors in the codec, all of which were quickly addressed by the codec vendor in a subsequent release.
</p>


<ul type="disc">
	<li>GIF (633 failures):  All of these images made use of transparent background color.  The derived TIFF files maintained the transparent background color, which unfortunately was not a feature of TIFF supported by the codec.</li>

	<li class="spacetop">JPEG (4,393 files):  The 4,385 single-channel and three-channel images were subject to a program bug in the codec.  Additionally, the codec did not support four-channel JPEG source images, so all 8 of those files were rejected.</li>

	<li class="spacetop">TIFF (5 failures):  All of these images were subject to a program bug in the codec.</li>
</ul>


<p>
The total file size of the resulting JPEG 2000 files increased 1.4 GB over that of the original source files, a 28% increase.  In general, the resulting file sizes for images derived from GIF and JPEG sources increased by a factor of three, while those derived from TIFF sources decreased by a factor of three.
</p>

<table border="1" width="600" cellspacing="1" cellpadding="3" align="center">
<caption><b>Table 4</b></caption>
	<tr>
		<td valign="bottom" colspan="4" align="right"><i><b>Source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></i></td>

		<td valign="bottom" colspan="2"><i><b>JPEG 2000</b></i></td>
	</tr>
	
	<tr>
		<td valign="bottom"><i><b>Format</b></i></td>
		<td valign="bottom"><i><b>Files</b></i></td>
		<td valign="bottom"><i><b>Total</b></i></td>
		<td valign="bottom"><i><b>Average</b></i></td>

		<td valign="bottom"><i><b>Total</b></i></td>
		<td valign="bottom"><i><b>Average</b></i></td>
	</tr>
	<tr>
		<td align="left">GIF</td>
		<td align="right">706</td>
		<td align="right">35 MB</td>

		<td align="right">51 KB</td>
		<td align="right">111 MB</td>
		<td align="right">161 KB</td>
	</tr>
	<tr>
		<td align="left">JPEG</td>
		<td align="right">8,183</td>

		<td align="right">1.7 GB</td>
		<td align="right">214 KB</td>
		<td align="right">5.3 GB</td>
		<td align="right">678 KB</td>
	</tr>
	<tr>
		<td align="left">TIFF</td>

		<td align="right">1,532</td>
		<td align="right">3.3 GB</td>
		<td align="right">2.2 MB</td>
		<td align="right">1.1 GB</td>
		<td align="right">700 KB</td>
	</tr>

	<tr>
		<td align="right" colspan="2">10,421</td>
		<td align="right">5.0 GB</td>
		<td align="right">501 KB</td>
		<td align="right">6.4 GB</td>
		<td align="right">647 KB</td>

	</tr>
	</table>
	
<p>
Since approximately 19% of the original images were in the RGB color space, an additional codec option to perform an RGB-to-YUV color space transformation could have been specified.  Since this would have the effect of removing correlations between the color channels, we would have expected to see somewhat better compression ratios.
</p>

<p>
Automated and manual quality assurance testing was performed subsequent to the migration.  JHOVE was used to verify that all of the resulting JPEG 2000 images met the established specifications.  Manual side-by-side viewing of before and after images was performed on a small, through representative, sample under ISO 3664 calibrated viewing conditions [<a href="12abrams.html#11">11</a>].  A commercial image processing application was used to perform pixel-by-pixel comparisons of source and target images.  For all TIFF-to-JPEG 2000 migrations, which did not require a color space transform, the comparison showed exact numerical equivalence; for all JPEG-to-JPEG 2000 migrations, which did involve a YCbCr-to-sRGB color space transform, the comparison revealed small errors (on the order of &sigma;= 0.02), presumably the result of numerical round-off.  In all cases, however, the JPEG 2000 images were considered to be visually lossless by trained observers of the Harvard College Library Digital Imaging Group (HCL-DIG).   Thus, at best the transformation process can be considered mathematically lossless and at worst, perceptually lossless.
</p>

<p>
The current DRS data model does not provide a mechanism to capture arbitrary provenance metadata.  Based on our Phase III investigation, the HUL team recommended the use of the PREMIS event model for this purpose [<a href="12abrams.html#12">12</a>].   Unfortunately, the project schedule did not allow sufficient time for HUL to attempt to implement any changes to the DRS.  (In addition to the necessary table model and API changes, this would have required significant alteration of existing work flows.)  Provenance metadata for the derived JPEG 2000 images were maintained in the DRS in the form of discursive text inserted into an existing administrative note field.
</p>


<h3>Conclusions</h3>

<p>
In general, the test proceeded smoothly along the lines defined in the project proposal.  There were no major difficulties that necessitated significant changes to the original HUL project plan.  The test provided HUL with important information regarding potential changes to its Digital Repository Service that will increase its ability to accept a wider range of digital resources generated by agents and processes beyond HUL's control or influence.  JHOVE proved to be a fundamentally important infrastructure component, used by all project participants for the automated validation of content files, extraction of technical metadata, and generation of repository-compliant SIPs.  The format migration process was fully automated once the appropriate codec specifications were developed.  Our results suggest that for images, effective post-transformation QA testing can be performed in an automated manner.
</p>

<p>
All AIHT participants successfully completed all required project phases, thus, the project was successful in validating a key assumption of the evolving National Digital Information Infrastructure Preservation Program (NDIIPP) infrastructure [<a href="12abrams.html#13">13</a>]: namely, that significant bodies of digital content can be transferred without loss between institutions utilizing radically different preservation architectures and technologies.  However, the scaling problems uncovered during the project underscore the importance of identifying and deploying robust tools and protocols in preservation workflows.  In general, the limiting factor in large-scale data transfer appears to be the number of objects, rather than their individual or total size.  This suggests that appropriate SIPs and DIPs for such transfers should be arbitrarily nestable container objects.  The design of such objects would be a fruitful area for collaborative standardization within the digital library and preservation communities.
</p>


<h3> References</h3>

<p>
[<a name="1">1</a>]	Harvard University Library, <i>Overview: Digital Repository Service (DRS)</i>, August 11, 2004 &lt;<a href="http://hul.harvard.edu/ois/systems/drs/">http://hul.harvard.edu/ois/systems/drs/</a>&gt;.
</p>

<p>
[<a name="2">2</a>]	NISO Z39.87 / AIIM 20-2002, <i>Data Dictionary-Technical Metadata for Digital Still Images</i>, Draft Standard for Trial Use, June 1, 2002-December 31, 2003 &lt;<a href="http://www.niso.org/standards/standard_detail.cfm?std_id=731">http://www.niso.org/standards/standard_detail.cfm?std_id=731</a>&gt;.
</p>

<p>
[<a name="3">3</a>]	AES-X098B, <i>Administrative and structural metadata for audio objects</i>  (work in progress by the Audio Engineering Society SC-03-06 Working Group on Digital Library and Archive Systems).
</p>

<p>
[<a name="4">4</a>]	Harvard University Library, <i>JHOVE - JSTOR/Harvard Object Validation Environment</i>, May 26, 2005 &lt;<a href="http://hul.harvard.edu/jhove/">http://hul.harvard.edu/jhove/</a>&gt;.
</p>

<p>
[<a name="5">5</a>]	Harvard University Library, <i>DRS User Manual for Data Loading</i>, October 4, 2005 &lt;<a href="http://hul.harvard.edu/ois/systems/drs/load_manual/wwhelp/wwhimpl/js/html/wwhelp.htm">http://hul.harvard.edu/ois/systems/drs/load_manual/wwhelp/wwhimpl/js/html/wwhelp.htm</a>&gt;.
</p>

<p>
[<a name="6">6</a>]	Library of Congress, <i>METS: Metadata Encoding and Transmission Standard Official Web Site</i>, January 25, 2005 &lt;<a href="http://www.loc.gov/standards/mets/">http://www.loc.gov/standards/mets/</a>&gt;.
</p>

<p>
[<a name="7">7</a>]	Library of Congress, <i>MIX: NISO Metadata for Images in XML Schema Official Web Site</i>, August 30, 2004 &lt;<a href="http://www.loc.gov/standards/mix/">http://www.loc.gov/standards/mix/</a>&gt;.
</p>

<p>
[<a name="8">8</a>]	ISO/IEC 21000-2:2005, <i>Information technology - Multimedia framework (MPEG-21) - Part 2: Digital Item Declaration</i>, October 6, 2005.
</p>

<p>
[<a name="9">9</a>]	Adobe Systems Incorporated, <i>PDF Reference: Adobe Portable Document Format Version 1.6</i> (5th ed.; Berkeley: Peachpit Press, 2005) &lt;<a href="http://partners.adobe.com/public/developer/en/pdf/PDFReference16.pdf">http://partners.adobe.com/public/developer/en/pdf/PDFReference16.pdf</a>&gt;.
</p>

<p>
[<a name="10">10</a>]	ISO/IEC 15444-1, <i>Information technology - JPEG 2000 image coding system: Core coding system</i>, September 23, 2004.
</p>

<p>
[<a name="11">11</a>]		ISO 3664:2000, <i>Viewing conditions - Graphic technology and photography</i>, August 15, 2005.
</p>

<p>
[<a name="12">12</a>]	OCLC/RLG, <i>Data Dictionary for Preservation Metadata: Final Report of the PREMIS Working Group</i>, May 2005 &lt;<a href="http://www.oclc.org/research/projects/pmwg/premis-final.pdf">http://www.oclc.org/research/projects/pmwg/premis-final.pdf</a>&gt;.
</p>

<p>
[<a name="13">13</a>]	Library of Congress, <i>Preserving Our Digital Heritage: Plan for the National Digital Information Infrastructure Preservation Program</i>, October 2002 &lt;<a href="http://www.digitalpreservation.gov/repor/ndiipp_plan.pdf">http://www.digitalpreservation.gov/repor/ndiipp_plan.pdf</a>&gt;.
</p>



 <!-- Standard Copyright line here  -->
<center><h6>Copyright &copy; 2005 Stephen Abrams, Stephen Chapman, Dale Flecker, Sue Kreigsman,<br> Julian Marinus, Gary McGath, and Robin Wendler</h6>   
</center> 
</td>     

</tr>    

<!-- Begin the bottom sections -->      

<tr>      

 <td><img src="../images/spacer00.gif" width="10" height="10" alt="spacer"></td>

     <td> <hr width="80%" noshade size="1"></td>   

 </tr>    

 <tr>      

 <td><img src="../images/spacer00.gif" width="10" height="10" alt="spacer"></td>     <td>     

 <p class="cbs">     

 <a href="12abrams.html#Top">Top</a>      | <a href="../12contents.html">Contents</a><br>



      <a href="../../../Architext/AT-dlib2query.html">Search</a>      |  <a href="../../../author-index.html">Author Index</a>      |  <a href="../../../title-index.html">Title Index</a>      |  <a href="../../../back.html">Back Issues</a><br> 

<a href="../shirky/12shirky.html">Previous Article</a>      |  <a href="../choudhury/12choudhury.html">Next article</a> <br><a href="../../../dlib.html">Home</a>     | <a href="https://www.dlib.org/cdn-cgi/l/email-protection#3c5850555e7c5f524e55124e594f485352124a5d12494f">E-mail the Editor</a></p>      </td>    </tr>     <tr>       <td><img src="../images/spacer00.gif" width="10" height="10" alt="spacer"></td>     <td> <hr width="80%" noshade size="1"></td>    </tr>    

 <tr>      

<td><img src="../images/spacer00.gif" width="10" height="10" alt="spacer"></td>



      <td>     

 <p class="small70"><a href="../../../access.html">D-Lib Magazine Access Terms and Conditions</a></p> 

      <p class="small70">doi:10.1045/december2005-abrams</p> 

       <p> &nbsp;</p>  </td>

     </tr> 

   </table>  

  <script data-cfasync="false" src="../../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>   

</html>

